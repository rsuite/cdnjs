(function(a){a.fn.multilevelpushmenu=function(b){return this.each(function(){var j=a(this),r=(j.context!=undefined)?j:a("body"),k=0,d=(b.menu!=undefined)?b.menu:j.find("nav");var v=a.extend({container:r,containersToPush:null,menuID:((r.prop("id")!=undefined&&r.prop("id")!="")?r.prop("id"):this.nodeName.toLowerCase())+"_multilevelpushmenu",wrapperClass:"multilevelpushmenu_wrapper",menuInactiveClass:"multilevelpushmenu_inactive",menu:d,menuWidth:0,menuHeight:0,collapsed:false,backText:"Back",backItemClass:"backItemClass",backItemIcon:"fa fa-angle-right",groupIcon:"fa fa-angle-left",mode:"overlap",overlapWidth:40},b);function o(y){if(y.stopPropagation&&y.preventDefault){y.stopPropagation();y.preventDefault()}else{y.cancelBubble=true;y.returnValue=false}}function u(){var y=a("<nav />").prop({id:v.menuID,className:v.wrapperClass}).appendTo(v.container);m(v.menu,y)}function m(z,y){if(z.level==undefined){z.level=0}a.each(z,function(){var E=a("<div />").attr({"class":"levelHolderClass","data-level":z.level,style:"left: "+((z.level==0&&!v.collapsed)?0:"-200%")}).appendTo(y);var A=(x(v.menuWidth)||(h(v.menuWidth)&&v.menuWidth>0));if(A){E.width(v.menuWidth)}var C=a("<h2 />").text(this.title).appendTo(E);var B=a("<i />").prop({"class":"floatRight cursorPointer "+this.icon}).prependTo(C);B.click(function(F){f(F,E,z)});if(z.level>0){n(E)}var D=a("<ul />").appendTo(E);a.each(this.items,function(){var G=a("<li />").appendTo(D);var F=a("<a />").prop({href:this.link}).text(this.name).appendTo(G);var H=a("<i />").prop({"class":"floatRight "+this.icon}).prependTo(F);if(this.items){F.click(function(I){g(I,E,G)});i(F);this.items.level=z.level+1;m(this.items,G)}})})}function e(){var y=v.menu;if(y.length==0){return false}y.prop({id:v.menuID,className:v.wrapperClass});q(y)}function q(y){if(y.level==undefined){y.level=0}a.each(y,function(){var D=a("<div />").attr({"class":"levelHolderClass","data-level":y.level,style:"left: "+((y.level==0&&!v.collapsed)?0:"-200%")}).appendTo(y);var z=(x(v.menuWidth)||(h(v.menuWidth)&&v.menuWidth>0));if(z){D.width(v.menuWidth)}var B=y.children("h2");B.appendTo(D);var A=B.children("i");A.addClass("floatRight cursorPointer");A.click(function(E){f(E,D,y)});if(y.level>0){n(D)}var C=y.children("ul");C.appendTo(D);a.each(C.children("li"),function(){var F=a(this);var E=F.children("a");var G=E.children("i");G.addClass("floatRight");if(F.children("ul").length>0){E.click(function(H){g(H,D,F)});i(E);F.level=y.level+1;q(F)}})})}function f(C,B,A){if(a(".levelHolderClass").is(":animated")){return false}var y;o(C);if(A.level==0&&B.position().left<0){B.removeClass(v.menuInactiveClass);B.animate({left:0},function(){B.find("ul").show(500)});p(B.width()-v.overlapWidth)}else{var D=v.container.find("#"+v.menuID+" div.levelHolderClass").filter(function(){return((a(this).attr("data-level")>B.attr("data-level"))&&(a(this).position().left>=0))});var z=v.container.find("#"+v.menuID+" div.levelHolderClass").filter(function(){return((a(this).attr("data-level")<=B.attr("data-level"))&&(a(this).position().left>=0))});if(D.length==0){if(A.level==0){B.stop().animate({left:((-1)*B.width()+v.overlapWidth)},function(){B.find("ul").hide(500,function(){B.addClass(v.menuInactiveClass)})});p((-1)*B.width()+v.overlapWidth)}}else{D.each(function(E,F){y=(a(F).css("filter").match(/DXImageTransform\.Microsoft\.Shadow/))?a(F).get(0).filters.item("DXImageTransform.Microsoft.Shadow").strength:0;a(F).stop().animate({left:"-100%",width:a(F).width()-(D.length+z.length-a(F).attr("data-level")-1)*(v.overlapWidth+y)-y})});z.each(function(E,F){y=(a(F).css("filter").match(/DXImageTransform\.Microsoft\.Shadow/))?a(F).get(0).filters.item("DXImageTransform.Microsoft.Shadow").strength:0;a(F).stop().animate({width:a(F).width()-D.length*(v.overlapWidth+y)-y});p((-1)*(D.length*(v.overlapWidth+y)))})}B.css("visibility","visible");B.find("."+v.backItemClass).css("visibility","visible");B.find("ul").css("visibility","visible");B.removeClass(v.menuInactiveClass)}}function n(B){var y=a("<div />").attr({"class":v.backItemClass}).appendTo(B);var z=a("<a />").prop({href:"#"}).text(v.backText).appendTo(y);var A=a("<i />").prop({"class":"floatRight "+v.backItemIcon}).prependTo(z);z.click(function(C){c(C,B)})}function c(C,B){if(a(".levelHolderClass").is(":animated")){return false}var z;o(C);if(v.mode=="overlap"){var y=v.container.find("#"+v.menuID+" div.levelHolderClass").filter(function(){return(a(this).position().left>=0&&a(this)!=B)});y.each(function(D,E){z=(a(E).css("filter").match(/DXImageTransform\.Microsoft\.Shadow/))?a(E).get(0).filters.item("DXImageTransform.Microsoft.Shadow").strength:0;a(E).stop().animate({width:a(E).width()-v.overlapWidth-(z*2)},function(){a(E).removeClass(v.menuInactiveClass)});p((-1)*(v.overlapWidth+z))});var A=v.container.find("#"+v.menuID+" div.levelHolderClass").filter(function(){return(a(this).attr("data-level")==B.attr("data-level")-1)});A.css("visibility","visible");A.find("."+v.backItemClass).css("visibility","visible");A.find("ul").css("visibility","visible")}B.stop().animate({left:"-100%",width:B.width()-(z*2)})}function g(C,B,A){if(a(".levelHolderClass").is(":animated")){return false}var z;o(C);if(v.mode=="overlap"){var y=v.container.find("#"+v.menuID+" div.levelHolderClass").filter(function(){return(a(this).position().left>=0&&a(this)!=B)});y.each(function(E,F){z=(a(F).css("filter").match(/DXImageTransform\.Microsoft\.Shadow/))?a(F).get(0).filters.item("DXImageTransform.Microsoft.Shadow").strength:0;a(F).stop().animate({width:a(F).width()+v.overlapWidth},function(){a(F).addClass(v.menuInactiveClass)});p(v.overlapWidth+z)});var D=v.container.find("#"+v.menuID+" div.levelHolderClass").filter(function(){return(a(this).attr("data-level")>B.attr("data-level"))});y.find("ul").css("visibility","hidden");y.find("."+v.backItemClass).css("visibility","hidden");D.css("visibility","visible");D.find("."+v.backItemClass).css("visibility","visible");D.find("ul").css("visibility","visible")}A.find("div:first").removeClass(v.menuInactiveClass).stop().animate({left:0})}function i(y){var z=a("<i />").prop({"class":"iconSpacing "+v.groupIcon}).prependTo(y)}function s(){var C=Math.max.apply(null,a("#"+v.menuID+" div.levelHolderClass").map(function(){return a(this).width()}).get()),y=Math.max.apply(null,a("#"+v.menuID+" div.levelHolderClass").map(function(){return a(this).attr("data-level")}).get()),D=C+y*v.overlapWidth,B=Math.max.apply(null,a("#"+v.menuID+" div.levelHolderClass").map(function(){return a(this).height()}).get());var z=(x(v.menuWidth)||(h(v.menuWidth)&&v.menuWidth>0)),A=(x(v.menuHeight)||(h(v.menuHeight)&&v.menuHeight>0));(z)?a("#"+v.menuID+" div.levelHolderClass").width(v.menuWidth):a("#"+v.menuID+" div.levelHolderClass").width(C);(A)?a("#"+v.menuID).height(v.menuHeight):a("#"+v.menuID).height(B);r.width(D);r.height(B)}function t(y){if(y){a("#"+v.menuID+" div.levelHolderClass:first").find("ul").hide();a("#"+v.menuID+" div.levelHolderClass:first").addClass(v.menuInactiveClass);a("#"+v.menuID+" div.levelHolderClass:first").stop().animate({left:((-1)*a("#"+v.menuID+" div.levelHolderClass:first").width()+v.overlapWidth)})}}function p(y){if(v.containersToPush==null){return false}a.each(v.containersToPush,function(){a(this).stop().animate({marginLeft:a(this).offset().left-a(this).position().left+y})})}function h(y){return typeof y==="number"&&parseFloat(y)==parseInt(y,10)&&!isNaN(y)}function x(y){return typeof y==="string"&&(y.indexOf("%")!=-1||y.indexOf("px")!=-1||y.indexOf("em")!=-1)}var l=(b.menu!=undefined)?u():e();var w=s();var t=t(v.collapsed)})}}(jQuery));