!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vega-lib"),require("vega-lite")):"function"==typeof define&&define.amd?define(["vega-lib","vega-lite"],t):e.vegaEmbed=t(e.vega,e.vl)}(this,function(e,t){"use strict";var r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};function n(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var i="http://www.w3.org/1999/xhtml",o={svg:"http://www.w3.org/2000/svg",xhtml:i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function a(e){var t=e+="",r=t.indexOf(":");return r>=0&&"xmlns"!==(t=e.slice(0,r))&&(e=e.slice(r+1)),o.hasOwnProperty(t)?{space:o[t],local:e}:e}function s(e){var t=a(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===i&&t.documentElement.namespaceURI===i?t.createElement(e):t.createElementNS(r,e)}})(t)}function u(){}function c(e){return null==e?u:function(){return this.querySelector(e)}}function l(){return[]}var h=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var f=document.documentElement;if(!f.matches){var p=f.webkitMatchesSelector||f.msMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector;h=function(e){return function(){return p.call(this,e)}}}}var v=h;function m(e){return new Array(e.length)}function d(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}d.prototype={constructor:d,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var g="$";function y(e,t,r,n,i,o){for(var a,s=0,u=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],n[s]=a):r[s]=new d(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function w(e,t,r,n,i,o,a){var s,u,c,l={},h=t.length,f=o.length,p=new Array(h);for(s=0;s<h;++s)(u=t[s])&&(p[s]=c=g+a.call(u,u.__data__,s,t),c in l?i[s]=u:l[c]=u);for(s=0;s<f;++s)(u=l[c=g+a.call(e,o[s],s,o)])?(n[s]=u,u.__data__=o[s],l[c]=null):r[s]=new d(e,o[s]);for(s=0;s<h;++s)(u=t[s])&&l[p[s]]===u&&(i[s]=u)}function _(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function b(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function E(e){return e.trim().split(/^|\s+/)}function x(e){return e.classList||new S(e)}function S(e){this._node=e,this._names=E(e.getAttribute("class")||"")}function j(e,t){for(var r=x(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function A(e,t){for(var r=x(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function N(){this.textContent=""}function k(){this.innerHTML=""}function O(){this.nextSibling&&this.parentNode.appendChild(this)}function $(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function R(){return null}function T(){var e=this.parentNode;e&&e.removeChild(this)}function V(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function C(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}S.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var I={},L=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(I={mouseenter:"mouseover",mouseleave:"mouseout"}));function M(e,t,r){return e=P(e,t,r),function(t){var r=t.relatedTarget;r&&(r===this||8&r.compareDocumentPosition(this))||e.call(this,t)}}function P(e,t,r){return function(n){var i=L;L=n;try{e.call(this,this.__data__,t,r)}finally{L=i}}}function q(e){return function(){var t=this.__on;if(t){for(var r,n=0,i=-1,o=t.length;n<o;++n)r=t[n],e.type&&r.type!==e.type||r.name!==e.name?t[++i]=r:this.removeEventListener(r.type,r.listener,r.capture);++i?t.length=i:delete this.__on}}}function D(e,t,r){var n=I.hasOwnProperty(e.type)?M:P;return function(i,o,a){var s,u=this.__on,c=n(t,o,a);if(u)for(var l=0,h=u.length;l<h;++l)if((s=u[l]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=r),void(s.value=t);this.addEventListener(e.type,c,r),s={type:e.type,name:e.name,value:t,listener:c,capture:r},u?u.push(s):this.__on=[s]}}function B(e,t,r){var n=b(e),i=n.CustomEvent;"function"==typeof i?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}var z=[null];function U(e,t){this._groups=e,this._parents=t}U.prototype=function(){return new U([[document.documentElement]],z)}.prototype={constructor:U,select:function(e){"function"!=typeof e&&(e=c(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o,a,s=t[i],u=s.length,l=n[i]=new Array(u),h=0;h<u;++h)(o=s[h])&&(a=e.call(o,o.__data__,h,s))&&("__data__"in o&&(a.__data__=o.__data__),l[h]=a);return new U(n,this._parents)},selectAll:function(e){var t;"function"!=typeof e&&(e=null==(t=e)?l:function(){return this.querySelectorAll(t)});for(var r=this._groups,n=r.length,i=[],o=[],a=0;a<n;++a)for(var s,u=r[a],c=u.length,h=0;h<c;++h)(s=u[h])&&(i.push(e.call(s,s.__data__,h,u)),o.push(s));return new U(i,o)},filter:function(e){"function"!=typeof e&&(e=v(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o,a=t[i],s=a.length,u=n[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&u.push(o);return new U(n,this._parents)},data:function(e,t){if(!e)return v=new Array(this.size()),l=-1,this.each(function(e){v[++l]=e}),v;var r,n=t?w:y,i=this._parents,o=this._groups;"function"!=typeof e&&(r=e,e=function(){return r});for(var a=o.length,s=new Array(a),u=new Array(a),c=new Array(a),l=0;l<a;++l){var h=i[l],f=o[l],p=f.length,v=e.call(h,h&&h.__data__,l,i),m=v.length,d=u[l]=new Array(m),g=s[l]=new Array(m);n(h,f,d,g,c[l]=new Array(p),v,t);for(var _,b,E=0,x=0;E<m;++E)if(_=d[E]){for(E>=x&&(x=E+1);!(b=g[x])&&++x<m;);_._next=b||null}}return(s=new U(s,i))._enter=u,s._exit=c,s},enter:function(){return new U(this._enter||this._groups.map(m),this._parents)},exit:function(){return new U(this._exit||this._groups.map(m),this._parents)},merge:function(e){for(var t=this._groups,r=e._groups,n=t.length,i=r.length,o=Math.min(n,i),a=new Array(n),s=0;s<o;++s)for(var u,c=t[s],l=r[s],h=c.length,f=a[s]=new Array(h),p=0;p<h;++p)(u=c[p]||l[p])&&(f[p]=u);for(;s<n;++s)a[s]=t[s];return new U(a,this._parents)},order:function(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n,i=e[t],o=i.length-1,a=i[o];--o>=0;)(n=i[o])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},sort:function(e){function t(t,r){return t&&r?e(t.__data__,r.__data__):!t-!r}e||(e=_);for(var r=this._groups,n=r.length,i=new Array(n),o=0;o<n;++o){for(var a,s=r[o],u=s.length,c=i[o]=new Array(u),l=0;l<u;++l)(a=s[l])&&(c[l]=a);c.sort(t)}return new U(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length;i<o;++i){var a=n[i];if(a)return a}return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i,o=t[r],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var r=a(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((null==t?r.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?r.local?function(e,t){return function(){var r=t.apply(this,arguments);null==r?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}:function(e,t){return function(){var r=t.apply(this,arguments);null==r?this.removeAttribute(e):this.setAttribute(e,r)}}:r.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(r,t))},style:function(e,t,r){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,r){return function(){var n=t.apply(this,arguments);null==n?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}:function(e,t,r){return function(){this.style.setProperty(e,t,r)}})(e,t,null==r?"":r)):function(e,t){return e.style.getPropertyValue(t)||b(e).getComputedStyle(e,null).getPropertyValue(t)}(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var r=t.apply(this,arguments);null==r?delete this[e]:this[e]=r}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var r=E(e+"");if(arguments.length<2){for(var n=x(this.node()),i=-1,o=r.length;++i<o;)if(!n.contains(r[i]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?j:A)(this,e)}}:t?function(e){return function(){j(this,e)}}:function(e){return function(){A(this,e)}})(r,t))},text:function(e){return arguments.length?this.each(null==e?N:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?k:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(O)},lower:function(){return this.each($)},append:function(e){var t="function"==typeof e?e:s(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var r="function"==typeof e?e:s(e),n=null==t?R:"function"==typeof t?t:c(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})},remove:function(){return this.each(T)},clone:function(e){return this.select(e?C:V)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,r){var n,i,o=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?D:q,null==r&&(r=!1),n=0;n<a;++n)this.each(s(o[n],t,r));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(n=0,u=s[c];n<a;++n)if((i=o[n]).type===u.type&&i.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return B(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return B(this,e,t)}})(e,t))}};var J=/("(?:[^\\"]|\\.)*")|[:,\][}{]/g;function H(e,t,r){return t in e?e[t]:r}var X=function(e,t){t=t||{};var r=JSON.stringify([1],null,H(t,"indent",2)).slice(2,-3),n=H(t,"margins",!1),i=""===r?1/0:H(t,"maxLength",80);return function e(t,o,a){t&&"function"==typeof t.toJSON&&(t=t.toJSON());var s=JSON.stringify(t);if(void 0===s)return s;var u=i-o.length-a;if(s.length<=u){var c=function(e,t){var r=t?" ":"",n={"{":"{"+r,"[":"["+r,"}":r+"}","]":r+"]",",":", ",":":": "};return e.replace(J,function(e,t){return t?e:n[e]})}(s,n);if(c.length<=u)return c}if("object"==typeof t&&null!==t){var l,h=o+r,f=[],p=function(e,t){return t===e.length-1?0:1};if(Array.isArray(t)){for(var v=0;v<t.length;v++)f.push(e(t[v],h,p(t,v))||"null");l="[]"}else Object.keys(t).forEach(function(r,n,i){var o=JSON.stringify(r)+": ",a=e(t[r],h,o.length+p(i,n));void 0!==a&&f.push(o+a)}),l="{}";if(f.length>0)return[l[0],r+f.join(",\n"+h),l[1]].join("\n"+o)}return s}(e,"",0)},G=Object.freeze({default:X,__moduleExports:X});function Z(e,t){return e(t={exports:{}},t.exports),t.exports}var F,W=Z(function(e,t){var r;t=e.exports=G,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],a=t.src=[],s=0,u=s++;a[u]="0|[1-9]\\d*";var c=s++;a[c]="[0-9]+";var l=s++;a[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var h=s++;a[h]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var f=s++;a[f]="("+a[c]+")\\.("+a[c]+")\\.("+a[c]+")";var p=s++;a[p]="(?:"+a[u]+"|"+a[l]+")";var v=s++;a[v]="(?:"+a[c]+"|"+a[l]+")";var m=s++;a[m]="(?:-("+a[p]+"(?:\\."+a[p]+")*))";var d=s++;a[d]="(?:-?("+a[v]+"(?:\\."+a[v]+")*))";var g=s++;a[g]="[0-9A-Za-z-]+";var y=s++;a[y]="(?:\\+("+a[g]+"(?:\\."+a[g]+")*))";var w=s++,_="v?"+a[h]+a[m]+"?"+a[y]+"?";a[w]="^"+_+"$";var b="[v=\\s]*"+a[f]+a[d]+"?"+a[y]+"?",E=s++;a[E]="^"+b+"$";var x=s++;a[x]="((?:<|>)?=?)";var S=s++;a[S]=a[c]+"|x|X|\\*";var j=s++;a[j]=a[u]+"|x|X|\\*";var A=s++;a[A]="[v=\\s]*("+a[j]+")(?:\\.("+a[j]+")(?:\\.("+a[j]+")(?:"+a[m]+")?"+a[y]+"?)?)?";var N=s++;a[N]="[v=\\s]*("+a[S]+")(?:\\.("+a[S]+")(?:\\.("+a[S]+")(?:"+a[d]+")?"+a[y]+"?)?)?";var k=s++;a[k]="^"+a[x]+"\\s*"+a[A]+"$";var O=s++;a[O]="^"+a[x]+"\\s*"+a[N]+"$";var $=s++;a[$]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var R=s++;a[R]="(?:~>?)";var T=s++;a[T]="(\\s*)"+a[R]+"\\s+",o[T]=new RegExp(a[T],"g");var V=s++;a[V]="^"+a[R]+a[A]+"$";var C=s++;a[C]="^"+a[R]+a[N]+"$";var I=s++;a[I]="(?:\\^)";var L=s++;a[L]="(\\s*)"+a[I]+"\\s+",o[L]=new RegExp(a[L],"g");var M=s++;a[M]="^"+a[I]+a[A]+"$";var P=s++;a[P]="^"+a[I]+a[N]+"$";var q=s++;a[q]="^"+a[x]+"\\s*("+b+")$|^$";var D=s++;a[D]="^"+a[x]+"\\s*("+_+")$|^$";var B=s++;a[B]="(\\s*)"+a[x]+"\\s*("+b+"|"+a[A]+")",o[B]=new RegExp(a[B],"g");var z=s++;a[z]="^\\s*("+a[A]+")\\s+-\\s+("+a[A]+")\\s*$";var U=s++;a[U]="^\\s*("+a[N]+")\\s+-\\s+("+a[N]+")\\s*$";var J=s++;a[J]="(<|>)?=?\\s*\\*";for(var H=0;H<s;H++)r(H,a[H]),o[H]||(o[H]=new RegExp(a[H]));function X(e,t){if(e instanceof G)return e;if("string"!=typeof e)return null;if(e.length>n)return null;if(!(t?o[E]:o[w]).test(e))return null;try{return new G(e,t)}catch(e){return null}}function G(e,t){if(e instanceof G){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof G))return new G(e,t);r("SemVer",e,t),this.loose=t;var a=e.trim().match(t?o[E]:o[w]);if(!a)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+a[1],this.minor=+a[2],this.patch=+a[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");a[4]?this.prerelease=a[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=a[5]?a[5].split("."):[],this.format()}t.parse=X,t.valid=function(e,t){var r=X(e,t);return r?r.version:null},t.clean=function(e,t){var r=X(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=G,G.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},G.prototype.toString=function(){return this.version},G.prototype.compare=function(e){return r("SemVer.compare",this.version,this.loose,e),e instanceof G||(e=new G(e,this.loose)),this.compareMain(e)||this.comparePre(e)},G.prototype.compareMain=function(e){return e instanceof G||(e=new G(e,this.loose)),F(this.major,e.major)||F(this.minor,e.minor)||F(this.patch,e.patch)},G.prototype.comparePre=function(e){if(e instanceof G||(e=new G(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return F(n,i)}while(++t)},G.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new G(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(Y(e,t))return null;var r=X(e),n=X(t);if(r.prerelease.length||n.prerelease.length){for(var i in r)if(("major"===i||"minor"===i||"patch"===i)&&r[i]!==n[i])return"pre"+i;return"prerelease"}for(var i in r)if(("major"===i||"minor"===i||"patch"===i)&&r[i]!==n[i])return i},t.compareIdentifiers=F;var Z=/^[0-9]+$/;function F(e,t){var r=Z.test(e),n=Z.test(t);return r&&n&&(e=+e,t=+t),r&&!n?-1:n&&!r?1:e<t?-1:e>t?1:0}function W(e,t,r){return new G(e,r).compare(new G(t,r))}function K(e,t,r){return W(e,t,r)>0}function Q(e,t,r){return W(e,t,r)<0}function Y(e,t,r){return 0===W(e,t,r)}function ee(e,t,r){return 0!==W(e,t,r)}function te(e,t,r){return W(e,t,r)>=0}function re(e,t,r){return W(e,t,r)<=0}function ne(e,t,r,n){var i;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),i=e===r;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),i=e!==r;break;case"":case"=":case"==":i=Y(e,r,n);break;case"!=":i=ee(e,r,n);break;case">":i=K(e,r,n);break;case">=":i=te(e,r,n);break;case"<":i=Q(e,r,n);break;case"<=":i=re(e,r,n);break;default:throw new TypeError("Invalid operator: "+t)}return i}function ie(e,t){if(e instanceof ie){if(e.loose===t)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);r("comparator",e,t),this.loose=t,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return F(t,e)},t.major=function(e,t){return new G(e,t).major},t.minor=function(e,t){return new G(e,t).minor},t.patch=function(e,t){return new G(e,t).patch},t.compare=W,t.compareLoose=function(e,t){return W(e,t,!0)},t.rcompare=function(e,t,r){return W(t,e,r)},t.sort=function(e,r){return e.sort(function(e,n){return t.compare(e,n,r)})},t.rsort=function(e,r){return e.sort(function(e,n){return t.rcompare(e,n,r)})},t.gt=K,t.lt=Q,t.eq=Y,t.neq=ee,t.gte=te,t.lte=re,t.cmp=ne,t.Comparator=ie;var oe={};function ae(e,t){if(e instanceof ae)return e.loose===t?e:new ae(e.raw,t);if(e instanceof ie)return new ae(e.value,t);if(!(this instanceof ae))return new ae(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function se(e){return!e||"x"===e.toLowerCase()||"*"===e}function ue(e,t,r,n,i,o,a,s,u,c,l,h,f){return((t=se(r)?"":se(n)?">="+r+".0.0":se(i)?">="+r+"."+n+".0":">="+t)+" "+(s=se(u)?"":se(c)?"<"+(+u+1)+".0.0":se(l)?"<"+u+"."+(+c+1)+".0":h?"<="+u+"."+c+"."+l+"-"+h:"<="+s)).trim()}function ce(e,t){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length){for(n=0;n<e.length;n++)if(r(e[n].semver),e[n].semver!==oe&&e[n].semver.prerelease.length>0){var i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function le(e,t,r){try{t=new ae(t,r)}catch(e){return!1}return t.test(e)}function he(e,t,r,n){var i,o,a,s,u;switch(e=new G(e,n),t=new ae(t,n),r){case">":i=K,o=re,a=Q,s=">",u=">=";break;case"<":i=Q,o=te,a=K,s="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,n))return!1;for(var c=0;c<t.set.length;++c){var l=null,h=null;if(t.set[c].forEach(function(e){e.semver===oe&&(e=new ie(">=0.0.0")),l=l||e,h=h||e,i(e.semver,l.semver,n)?l=e:a(e.semver,h.semver,n)&&(h=e)}),l.operator===s||l.operator===u)return!1;if((!h.operator||h.operator===s)&&o(e,h.semver))return!1;if(h.operator===u&&a(e,h.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.loose?o[q]:o[D],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new G(r[2],this.loose):this.semver=oe},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return r("Comparator.test",e,this.loose),this.semver===oe||("string"==typeof e&&(e=new G(e,this.loose)),ne(e,this.operator,this.semver,this.loose))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var r;if(""===this.operator)return r=new ae(e.value,t),le(this.value,r,t);if(""===e.operator)return r=new ae(this.value,t),le(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||o&&a||s||u},t.Range=ae,ae.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},ae.prototype.toString=function(){return this.range},ae.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),r("range",e,t);var n=t?o[U]:o[z];e=e.replace(n,ue),r("hyphen replace",e),e=e.replace(o[B],"$1$2$3"),r("comparator trim",e,o[B]),e=(e=(e=e.replace(o[T],"$1~")).replace(o[L],"$1^")).split(/\s+/).join(" ");var i=t?o[q]:o[D],a=e.split(" ").map(function(e){return function(e,t){return r("comp",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){r("caret",e,t);var n=t?o[P]:o[M];return e.replace(n,function(t,n,i,o,a){var s;return r("caret",e,t,n,i,o,a),se(n)?s="":se(i)?s=">="+n+".0.0 <"+(+n+1)+".0.0":se(o)?s="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":a?(r("replaceCaret pr",a),"-"!==a.charAt(0)&&(a="-"+a),s="0"===n?"0"===i?">="+n+"."+i+"."+o+a+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+a+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+a+" <"+(+n+1)+".0.0"):(r("no pr"),s="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",s),s})}(e,t)}).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){var n=t?o[C]:o[V];return e.replace(n,function(t,n,i,o,a){var s;return r("tilde",e,t,n,i,o,a),se(n)?s="":se(i)?s=">="+n+".0.0 <"+(+n+1)+".0.0":se(o)?s=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":a?(r("replaceTilde pr",a),"-"!==a.charAt(0)&&(a="-"+a),s=">="+n+"."+i+"."+o+a+" <"+n+"."+(+i+1)+".0"):s=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",s),s})}(e,t)}).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return function(e,t){e=e.trim();var n=t?o[O]:o[k];return e.replace(n,function(t,n,i,o,a,s){r("xRange",e,t,n,i,o,a,s);var u=se(i),c=u||se(o),l=c||se(a),h=l;return"="===n&&h&&(n=""),u?t=">"===n||"<"===n?"<0.0.0":"*":n&&h?(c&&(o=0),l&&(a=0),">"===n?(n=">=",c?(i=+i+1,o=0,a=0):l&&(o=+o+1,a=0)):"<="===n&&(n="<",c?i=+i+1:o=+o+1),t=n+i+"."+o+"."+a):c?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),r("xRange return",t),t})}(e,t)}).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(o[J],"")}(e,t),r("stars",e),e}(e,t)}).join(" ").split(/\s+/);return this.loose&&(a=a.filter(function(e){return!!e.match(i)})),a=a.map(function(e){return new ie(e,t)})},ae.prototype.intersects=function(e,t){if(!(e instanceof ae))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(r){return e.set.some(function(e){return e.every(function(e){return r.intersects(e,t)})})})})},t.toComparators=function(e,t){return new ae(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})},ae.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new G(e,this.loose));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e))return!0;return!1},t.satisfies=le,t.maxSatisfying=function(e,t,r){var n=null,i=null;try{var o=new ae(t,r)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(n&&-1!==i.compare(e)||(i=new G(n=e,r)))}),n},t.minSatisfying=function(e,t,r){var n=null,i=null;try{var o=new ae(t,r)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(n&&1!==i.compare(e)||(i=new G(n=e,r)))}),n},t.validRange=function(e,t){try{return new ae(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return he(e,t,"<",r)},t.gtr=function(e,t,r){return he(e,t,">",r)},t.outside=he,t.prerelease=function(e,t){var r=X(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new ae(e,r),t=new ae(t,r),e.intersects(t)},t.coerce=function(e){if(e instanceof G)return e;if("string"!=typeof e)return null;var t=e.match(o[$]);return null==t?null:X((t[1]||"0")+"."+(t[2]||"0")+"."+(t[3]||"0"))}}),K=(W.SEMVER_SPEC_VERSION,W.re,W.src,W.parse,W.valid,W.clean,W.SemVer,W.inc,W.diff,W.compareIdentifiers,W.rcompareIdentifiers,W.major,W.minor,W.patch,W.compare,W.compareLoose,W.rcompare,W.sort,W.rsort,W.gt,W.lt,W.eq,W.neq,W.gte,W.lte,W.cmp,W.Comparator,W.Range,W.toComparators,W.satisfies),Q=(W.maxSatisfying,W.minSatisfying,W.validRange,W.ltr,W.gtr,W.outside,W.prerelease,W.intersects,W.coerce,Z(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t[0],version:t[1]}}})),Y=(F=Q)&&F.__esModule&&Object.prototype.hasOwnProperty.call(F,"default")?F.default:F;var ee=X||G,te=e,re=t,ne={vega:"Vega","vega-lite":"Vega-Lite"},ie={vega:te.version,"vega-lite":re?re.version:"not available"},oe={vega:function(e,t){return e},"vega-lite":function(e,t){return re.compile(e,{config:t}).spec}};function ae(e,t,i){return o=this,a=void 0,u=function(){var o,a,s,u,c,l,h,f,p,v,m,d,g,y,w;return n(this,function(n){switch(n.label){case 0:return o=void 0===(i=i||{}).actions||i.actions,a=i.loader||te.loader(),s=i.renderer||"canvas",u=i.logLevel||te.Warn,te.isString(t)?[4,a.load(t)]:[3,2];case 1:return l=n.sent(),[2,ae(e,JSON.parse(l),i)];case 2:return c=i.config,te.isString(c)?[4,a.load(c)]:[3,4];case 3:return l=n.sent(),[2,ae(e,t,r({},i,{config:JSON.parse(l)}))];case 4:return t.$schema?(h=Y(t.$schema),i.mode&&i.mode!==h.library&&console.warn("The given visualization spec is written in "+ne[h.library]+", but mode argument sets "+ne[i.mode]+"."),f=h.library,K(ie[f],"^"+h.version.slice(1))||console.warn("The input spec uses "+f+" "+h.version+", but the current version of "+ne[f]+" is "+ie[f]+".")):f=i.mode||"vega",p=oe[f](t,c),"vega-lite"===f&&p.$schema&&(h=Y(p.$schema),K(ie.vega,"^"+h.version.slice(1))||console.warn("The compiled spec uses Vega "+h.version+", but current version is "+ie.vega+".")),v=(_=e,"string"==typeof _?new U([[document.querySelector(_)]],[document.documentElement]):new U([[_]],z)).classed("vega-embed",!0).html(""),i.onBeforeParse&&(p=i.onBeforeParse(p)),m=te.parse(p,"vega-lite"===f?{}:c),d=new te.View(m,{loader:a,logLevel:u,renderer:s}).initialize(e).hover(),i&&(i.width&&d.width(i.width),i.height&&d.height(i.height),i.padding&&d.padding(i.padding)),i.runAsync?[4,d.runAsync()]:[3,6];case 5:return n.sent(),[3,7];case 6:d.run(),n.label=7;case 7:return!1!==o&&(g=v.append("div").attr("class","vega-actions"),!0!==o&&!1===o.export||(y="canvas"===s?"png":"svg",g.append("a").text("Export as "+y.toUpperCase()).attr("href","#").attr("target","_blank").attr("download","visualization."+y).on("mousedown",function(){var e=this;d.toImageURL(y).then(function(t){e.href=t}).catch(function(e){throw e}),L.preventDefault()})),!0!==o&&!1===o.source||g.append("a").text("View Source").attr("href","#").on("click",function(){var e,r,n,o,a,s;e=ee(t),r=i.sourceHeader||"",n=i.sourceFooter||"",o="<html><head>"+r+'</head><body><pre><code class="json">',a="</code></pre>"+n+"</body></html>",(s=window.open("")).document.write(o+e+a),s.document.title="Vega JSON Source",L.preventDefault()}),!0!==o&&!1===o.editor||(w=i.editorUrl||"https://vega.github.io/editor/",g.append("a").text("Open in Vega Editor").attr("href","#").on("click",function(){!function(e,t,r){var n=e.open(t),i=250,o=~~(1e4/i);e.addEventListener("message",function t(r){r.source===n&&(o=0,e.removeEventListener("message",t,!1))},!1),setTimeout(function e(){o<=0||(n.postMessage(r,"*"),setTimeout(e,i),o-=1)},i)}(window,w,{config:c||null,mode:f,renderer:s,spec:ee(t)}),L.preventDefault()}))),[2,{view:d,spec:t}]}var _})},new((s=void 0)||(s=Promise))(function(e,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function n(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,n)}i((u=u.apply(o,a||[])).next())});var o,a,s,u}return ae.vl=re,ae.vega=te,ae.default=ae,ae});
