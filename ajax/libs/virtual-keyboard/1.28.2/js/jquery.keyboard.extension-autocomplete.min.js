/*! jQuery UI Virtual Keyboard Autocomplete v1.11.4 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";e.fn.addAutocomplete=function(t){var o={position:{of:null,my:"right top",at:"left top",collision:"flip"},events:"autocomplete",data:""};return this.each(function(){var a,l,u=e(this).data("keyboard");u&&(l=u.namespace+"Autocomplete",u.autocomplete_namespace=l,u.extensionNamespace.push(l),u.autocomplete_init=function(){var c=(a=u.autocomplete_options=e.extend(!0,{},o,t)).events||a.data||"autocomplete";u.options.alwaysOpen&&u.isVisible()&&u.autocomplete_setup(),u.$el.unbind(l).bind(e.keyboard.events.kbVisible+l,function(){u.autocomplete_setup()}).bind(e.keyboard.events.kbHidden+l,function(){u.$el[a.data||"autocomplete"]("close")}).bind(e.keyboard.events.kbChange+l,function(){u.hasAutocomplete&&u.isVisible()&&u.$el.val(u.$preview.val())}).bind(c+"open"+l,function(){if(u.hasAutocomplete){var t=e.extend({},a.position);t.of=t.of||u.$keyboard,u.$autocomplete.menu.element.position(t)}}).bind(c+"select"+l,function(e,t){u.autocomplete_getVal(t.item)})},u.autocomplete_getVal=function(e){var t;switch(typeof e){case"string":t=e||"";break;case"object":t=e.label||e.value||"";break;default:t=u.preview&&u.preview.value||u.el.value}t=t.toString(),u.hasAutocomplete&&""!==t&&((u.$preview||u.$el).val(t).focus(),u.last.start=t.length,u.last.end=t.length,u.last.val=t)},u.autocomplete_update=function(e){clearTimeout(u.$autocomplete.searching),u.$autocomplete.searching=setTimeout(function(){u.$autocomplete.term!==u.$autocomplete.element.val()&&(u.$autocomplete.selectedItem=null,u.$autocomplete.search(null,e))},u.$autocomplete.options.delay)},u.autocomplete_navKeys={8:"backSpace",9:"tab",13:"enter",20:"capsLock",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"},u.autocomplete_setup=function(){var e;if(u.$autocomplete=u.$el.data(u.autocomplete_options.data)||u.$el.data("uiAutocomplete")||u.$el.data("ui-autocomplete")||u.$el.data("autocomplete"),u.hasAutocomplete=void 0!==u.$autocomplete&&!u.$autocomplete.options.disabled,u.hasAutocomplete){u.$preview.bind("keydown"+l+" keypress"+l,function(t){u.$preview&&t.namespace!==u.$autocomplete.eventNamespace&&(t.namespace=u.$autocomplete.eventNamespace.slice(1),(e=u.autocomplete_navKeys[t.which])?u.el!==u.preview&&(u.$el.triggerHandler(t),"enter"===e&&setTimeout(function(){u.$autocomplete&&(u.$preview.val(u.$autocomplete.selectedItem.value),u.$preview.focus())},100)):u.autocomplete_update(t))});var t="mouseup mousedown mouseleave touchstart touchend touchcancel ".split(" ").join(l+" ");u.bindButton(t,function(e){u.autocomplete_update(e)})}u.escCloseCallback.autocomplete||(u.escCloseCallback.autocomplete=u.checkAutocompleteMenu)},u.checkAutocompleteMenu=function(e){return u.hasAutocomplete&&e.closest("ul").hasClass("ui-autocomplete")},u.autocomplete_destroy=function(){clearTimeout(u.$autocomplete.searching),u.hasAutocomplete=!1,u.$el.unbind(l),u.$preview&&(u.$preview.unbind(l),u.unbindButton(l)),delete u.$autocomplete},u.autocomplete_init())})}});