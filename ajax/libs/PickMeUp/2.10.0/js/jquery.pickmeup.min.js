/**
 * @package   PickMeUp - jQuery datepicker plugin
 * @author    Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @author    Stefan Petre <www.eyecon.ro>
 * @copyright Copyright (c) 2013-2016, Nazar Mokrynskyi
 * @copyright Copyright (c) 2008-2009, Stefan Petre
 * @license   MIT License, see license.txt
 */
(function(g){function r(){for(var g=new Date(this.toString()),l=28,r=g.getMonth();g.getMonth()==r;)++l,g.setDate(l);return l-1}g.addDays=function(g){this.setDate(this.getDate()+g)};g.addMonths=function(g){var l=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+g);this.setDate(Math.min(l,r.apply(this)))};g.addYears=function(g){var l=this.getDate();this.setDate(1);this.setFullYear(this.getFullYear()+g);this.setDate(Math.min(l,r.apply(this)))};g.getDayOfYear=function(){var g=new Date(this.getFullYear(),
this.getMonth(),this.getDate(),0,0,0),l=new Date(this.getFullYear(),0,0,0,0,0);return Math.floor((g-l)/24*36E5)}})(Date.prototype);
(function(g){"function"===typeof define&&define.amd?define(["jquery"],g):"object"===typeof exports?g(require("jquery")):g(jQuery)})(function(g){function r(a,c){a=a.split(" ");for(var d=0;d<a.length;++d)a[d]+=c;return a.join(" ")}function B(){var a=g(this).data("pickmeup-options"),c=this.pickmeup,d=Math.floor(a.calendars/2),b=a.date,f=a.current,n=a.min?new Date(a.min):null,e=a.max?new Date(a.max):null,h,l,m,p,q,t;n&&(n.setDate(1),n.addMonths(1),n.addDays(-1));e&&(e.setDate(1),e.addMonths(1),e.addDays(-1));
c.find(".pmu-instance > :not(nav)").remove();for(var k=0;k<a.calendars;k++){h=new Date(f);v(h);p=c.find(".pmu-instance").eq(k);c.hasClass("pmu-view-years")?(h.addYears(12*(k-d)),l=h.getFullYear()-6+" - "+(h.getFullYear()+5)):c.hasClass("pmu-view-months")?(h.addYears(k-d),l=h.getFullYear()):c.hasClass("pmu-view-days")&&(h.addMonths(k-d),l=w(h,a.title_format,a.locale));if(!t&&e&&(t=new Date(h),a.select_day?t.addMonths(a.calendars-1):a.select_month?t.addYears(a.calendars-1):t.addYears(12*(a.calendars-
1)),t>e)){--k;f.addMonths(-1);t=void 0;continue}t=new Date(h);if(!q&&(q=new Date(h),q.setDate(1),q.addMonths(1),q.addDays(-1),n&&n>q)){--k;f.addMonths(1);q=void 0;continue}p.find(".pmu-month").text(l);m="";var r=function(c){return"range"==a.mode&&c>=(new Date(b[0])).getFullYear()&&c<=(new Date(b[1])).getFullYear()||"multiple"==a.mode&&-1!==b.reduce(function(a,b){a.push((new Date(b)).getFullYear());return a},[]).indexOf(c)||(new Date(b)).getFullYear()==c},y=function(c,d){var e=(new Date(b[0])).getFullYear(),
f=(new Date(b[1])).getFullYear(),g=(new Date(b[0])).getMonth(),h=(new Date(b[1])).getMonth();return"range"==a.mode&&c>e&&c<f||"range"==a.mode&&c==e&&c<f&&d>=g||"range"==a.mode&&c>e&&c==f&&d<=h||"range"==a.mode&&c==e&&c==f&&d>=g&&d<=h||"multiple"==a.mode&&-1!==b.reduce(function(a,b){b=new Date(b);a.push(b.getFullYear()+"-"+b.getMonth());return a},[]).indexOf(c+"-"+d)||(new Date(b)).getFullYear()==c&&(new Date(b)).getMonth()==d};(function(){for(var b=[],c=h.getFullYear()-6,d=(new Date(a.min)).getFullYear(),
e=(new Date(a.max)).getFullYear(),f,g=0;12>g;++g)f={text:c+g,class_name:[]},a.min&&f.text<d||a.max&&f.text>e?f.class_name.push("pmu-disabled"):r(f.text)&&f.class_name.push("pmu-selected"),f.class_name=f.class_name.join(" "),b.push(f);m+=x.body(b,"pmu-years")})();(function(){var b=[],c=h.getFullYear(),d=(new Date(a.min)).getFullYear(),e=(new Date(a.min)).getMonth(),f=(new Date(a.max)).getFullYear(),g=(new Date(a.max)).getMonth(),k,n;for(n=0;12>n;++n)k={text:a.locale.monthsShort[n],class_name:[]},a.min&&
(c<d||n<e&&c==d)||a.max&&(c>f||n>g&&c>=f)?k.class_name.push("pmu-disabled"):y(c,n)&&k.class_name.push("pmu-selected"),k.class_name=k.class_name.join(" "),b.push(k);m+=x.body(b,"pmu-months")})();(function(){var b=[],c=h.getMonth(),d=v(new Date).valueOf(),f,e,g,k,n;(function(){h.setDate(1);var b=(h.getDay()-a.first_day)%7;h.addDays(-(b+(0>b?7:0)))})();for(e=0;42>e;++e)f={text:h.getDate(),class_name:[]},c!=h.getMonth()&&f.class_name.push("pmu-not-in-month"),0==h.getDay()?f.class_name.push("pmu-sunday"):
6==h.getDay()&&f.class_name.push("pmu-saturday"),g=a.render(new Date(h))||{},k=h.valueOf(),n=a.min&&a.min>h||a.max&&a.max<h,g.disabled||n?f.class_name.push("pmu-disabled"):(g.selected||a.date.valueOf()==k||a.date instanceof Array&&a.date.reduce(function(a,b){return a||k===b.valueOf()},!1)||"range"==a.mode&&k>=a.date[0]&&k<=a.date[1])&&f.class_name.push("pmu-selected"),k==d&&f.class_name.push("pmu-today"),g.class_name&&f.class_name.push(g.class_name),f.class_name=f.class_name.join(" "),b.push(f),h.addDays(1);
m+=x.body(b,"pmu-days")})();p.append(m)}q.setDate(1);t.setDate(1);t.addMonths(1);t.addDays(-1);c.find(".pmu-prev").css("visibility",a.min&&a.min>=q?"hidden":"visible");c.find(".pmu-next").css("visibility",a.max&&a.max<=t?"hidden":"visible");a.fill.apply(this)}function l(a,c,d,b){var f;if(a instanceof Date||a instanceof Number)return v(new Date(a));if(!a)return v(new Date);if(a instanceof Array){a=a.slice();for(f=0;f<a.length;++f)a[f]=l(a[f],c,d,b);return a}f=a.split(d);if(1<f.length)return f.forEach(function(a,
f,e){e[f]=l(g.trim(a),c,d,b)}),f;f=b.monthsShort.join(")(")+")("+b.months.join(")(");d=new RegExp("[^0-9a-zA-Z("+f+")]+");a=a.split(d);var n=c.split(d),e,h,u,m,p,q=new Date;for(f=0;f<a.length;f++)switch(n[f]){case "b":h=b.monthsShort.indexOf(a[f]);break;case "B":h=b.months.indexOf(a[f]);break;case "d":case "e":e=parseInt(a[f],10);break;case "m":h=parseInt(a[f],10)-1;break;case "Y":case "y":u=parseInt(a[f],10);u+=100<u?0:29>u?2E3:1900;break;case "H":case "I":case "k":case "l":m=parseInt(a[f],10);break;
case "P":case "p":/pm/i.test(a[f])&&12>m?m+=12:/am/i.test(a[f])&&12<=m&&(m-=12);break;case "M":p=parseInt(a[f],10)}e=new Date(void 0===u?q.getFullYear():u,void 0===h?q.getMonth():h,void 0===e?q.getDate():e,void 0===m?q.getHours():m,void 0===p?q.getMinutes():p,0);isNaN(1*e)&&(e=new Date);return v(e)}function v(a){a.setHours(0,0,0,0);return a}function w(a,c,d){var b=a.getMonth(),f=a.getDate(),g=a.getFullYear(),e=a.getDay(),h=a.getHours(),l=12<=h,m=l?h-12:h,p=a.getDayOfYear();0==m&&(m=12);var q=a.getMinutes(),
t=a.getSeconds();c=c.split("");for(var k,r=0;r<c.length;r++){k=c[r];switch(k){case "a":k=d.daysShort[e];break;case "A":k=d.days[e];break;case "b":k=d.monthsShort[b];break;case "B":k=d.months[b];break;case "C":k=1+Math.floor(g/100);break;case "d":k=10>f?"0"+f:f;break;case "e":k=f;break;case "H":k=10>h?"0"+h:h;break;case "I":k=10>m?"0"+m:m;break;case "j":k=100>p?10>p?"00"+p:"0"+p:p;break;case "k":k=h;break;case "l":k=m;break;case "m":k=9>b?"0"+(1+b):1+b;break;case "M":k=10>q?"0"+q:q;break;case "p":case "P":k=
l?"PM":"AM";break;case "s":k=Math.floor(a.getTime()/1E3);break;case "S":k=10>t?"0"+t:t;break;case "u":k=e+1;break;case "w":k=e;break;case "y":k=(""+g).substr(2,2);break;case "Y":k=g}c[r]=k}return c.join("")}function C(a){var c=g(this),d=c.data("pickmeup-options"),b;v(a);a:{var f;switch(d.mode){case "multiple":f=a.valueOf();for(b=0;b<d.date.length;++b)if(d.date[b].valueOf()===f){d.date.splice(b,1);break a}d.date.push(a);break;case "range":d.lastSel||(d.date[0]=a);a<=d.date[0]?(d.date[1]=d.date[0],
d.date[0]=a):d.date[1]=a;d.lastSel=!d.lastSel;break;default:d.date=a.valueOf()}}a=y(d);c.is("input")&&c.val("single"==d.mode?a[0]:a[0].join(d.separator));d.change.apply(this,a);if(!d.flat&&d.hide_on_select&&("range"!=d.mode||!d.lastSel))return d.binded.hide(),!1}function D(a){a=g(a.target);a.hasClass("pmu-button")||(a=a.closest(".pmu-button"));if(a.length){if(a.hasClass("pmu-disabled"))return!1;var c=g(this).data("pickmeup-options"),d=a.parents(".pmu-instance").eq(0),b=d.parent(),f=g(".pmu-instance",
b).index(d);a.parent().is("nav")?a.hasClass("pmu-month")?(c.current.addMonths(f-Math.floor(c.calendars/2)),b.hasClass("pmu-view-years")?(c.current="single"!=c.mode?new Date(c.date[c.date.length-1]):new Date(c.date),c.select_day?b.removeClass("pmu-view-years").addClass("pmu-view-days"):c.select_month&&b.removeClass("pmu-view-years").addClass("pmu-view-months")):b.hasClass("pmu-view-months")?c.select_year?b.removeClass("pmu-view-months").addClass("pmu-view-years"):c.select_day&&b.removeClass("pmu-view-months").addClass("pmu-view-days"):
b.hasClass("pmu-view-days")&&(c.select_month?b.removeClass("pmu-view-days").addClass("pmu-view-months"):c.select_year&&b.removeClass("pmu-view-days").addClass("pmu-view-years"))):a.hasClass("pmu-prev")?c.binded.prev(!1):c.binded.next(!1):a.hasClass("pmu-disabled")||(b.hasClass("pmu-view-years")?(c.current.setFullYear(parseInt(a.text(),10)),c.select_month?b.removeClass("pmu-view-years").addClass("pmu-view-months"):c.select_day?b.removeClass("pmu-view-years").addClass("pmu-view-days"):c.binded.update_date(c.current)):
b.hasClass("pmu-view-months")?(c.current.setMonth(d.find(".pmu-months .pmu-button").index(a)),c.current.setFullYear(parseInt(d.find(".pmu-month").text(),10)),c.select_day?b.removeClass("pmu-view-months").addClass("pmu-view-days"):c.binded.update_date(c.current),c.current.addMonths(Math.floor(c.calendars/2)-f)):(d=parseInt(a.text(),10),b=new Date(c.current),b.addMonths(f-Math.floor(c.calendars/2)),a.hasClass("pmu-not-in-month")&&b.addMonths(15<d?-1:1),b.setDate(d),c.binded.update_date(b)));c.binded.fill()}return!1}
function y(a){var c;if("single"==a.mode)return c=new Date(a.date),[w(c,a.format,a.locale),c];c=[[],[]];g.each(a.date,function(d,b){var f=new Date(b);c[0].push(w(f,a.format,a.locale));c[1].push(f)});return c}function z(a){var c=this.pickmeup;if(a||!c.is(":visible")){var d=g(this),b=d.data("pickmeup-options"),f=d.offset(),n=document.documentElement.scrollLeft,e=document.documentElement.scrollTop,h=document.documentElement.clientWidth,u=document.documentElement.clientHeight,m=f.top,p=f.left;b.binded.fill();
d.is("input")&&((a=d.val())&&d.pickmeup("set_date",l(a,b.format,b.separator,b.locale)),d.keydown(function(a){9==a.which&&d.pickmeup("hide")}),b.lastSel=!1);b.before_show();if(0!=b.show()&&!b.flat){switch(b.position){case "top":m-=c.outerHeight();break;case "left":p-=c.outerWidth();break;case "right":p+=this.offsetWidth;break;case "bottom":m+=this.offsetHeight}m+c.offsetHeight>e+u&&(m=f.top-c.offsetHeight);m<e&&(m=f.top+this.offsetHeight+c.offsetHeight);p+c.offsetWidth>n+h&&(p=f.left-c.offsetWidth);
p<n&&(p=f.left+this.offsetWidth);c.css({display:"inline-block",top:m+"px",left:p+"px"});g(document).on(r(b.trigger_event,b.events_namespace),b.binded.hide).on("resize"+b.events_namespace,[!0],b.binded.forced_show)}}}function E(){z.call(this,!0)}function F(a){if(!a||!a.target||a.target!=this&&!(this.pickmeup.get(0).compareDocumentPosition(a.target)&16)){a=this.pickmeup;var c=g(this).data("pickmeup-options");0!=c.hide()&&(a.hide(),g(document).off(r(c.trigger_event,c.events_namespace),c.binded.hide).off("resize",
c.binded.forced_show),c.lastSel=!1)}}function G(){var a=g(this).data("pickmeup-options");g(document).off(r(a.trigger_event,a.events_namespace),a.binded.hide).off("resize",a.binded.forced_show);a.binded.forced_show()}function H(){var a=g(this).data("pickmeup-options");"single"!=a.mode&&(a.date=[],a.lastSel=!1,a.binded.fill())}function I(a){"undefined"==typeof a&&(a=!0);var c=this.pickmeup,d=g(this).data("pickmeup-options");c.hasClass("pmu-view-years")?d.current.addYears(-12):c.hasClass("pmu-view-months")?
d.current.addYears(-1):c.hasClass("pmu-view-days")&&d.current.addMonths(-1);a&&d.binded.fill()}function J(a){"undefined"==typeof a&&(a=!0);var c=this.pickmeup,d=g(this).data("pickmeup-options");c.hasClass("pmu-view-years")?d.current.addYears(12):c.hasClass("pmu-view-months")?d.current.addYears(1):c.hasClass("pmu-view-days")&&d.current.addMonths(1);a&&d.binded.fill()}function K(a){var c=g(this).data("pickmeup-options"),d=y(c);return"string"===typeof a?(d=d[1],d.constructor==Date?w(d,a,c.locale):d.map(function(b){return w(b,
a,c.locale)})):d[a?0:1]}function L(a,c){var d=g(this),b=d.data("pickmeup-options"),f;if(!(a instanceof Array)||0<a.length)if(b.date=l(a,b.format,b.separator,b.locale),"single"!=b.mode)for(b.date instanceof Array?(b.date[0]=b.date[0]||l(new Date,b.format,b.separator,b.locale),"range"==b.mode&&(b.date[1]=b.date[1]||l(b.date[0],b.format,b.separator,b.locale))):(b.date=[b.date],"range"==b.mode&&b.date.push(l(b.date[0],b.format,b.separator,b.locale))),f=0;f<b.date.length;++f)b.date[f]=A(b.date[f],b.min,
b.max);else b.date instanceof Array&&(b.date=b.date[0]),b.date=A(b.date,b.min,b.max);else b.date=[];if(!b.select_day)if(b.date instanceof Array)for(f=0;f<b.date.length;++f)b.date[f].setDate(1);else b.date.setDate(1);if("multiple"==b.mode)for(f=0;f<b.date.length;++f)b.date.indexOf(b.date[f])!==f&&(b.date.splice(f,1),--f);c?b.current=l(c,b.format,b.separator,b.locale):(c="single"===b.mode?b.date:b.date[b.date.length-1],b.current=c?new Date(c):new Date);b.current.setDate(1);b.binded.fill();if(d.is("input")&&
!1!==b.default_date){f=y(b);var n=d.val(),e="single"==b.mode?f[0]:f[0].join(b.separator);n||b.change.apply(this,f);n!=e&&d.val(e)}}function M(){var a=g(this),c=a.data("pickmeup-options");a.removeData("pickmeup-options");a.off(c.events_namespace);g(document).off(c.events_namespace);g(this.pickmeup).remove()}function A(a,c,d){return c&&c>a?new Date(c):d&&d<a?new Date(d):a}var N=0;g.pickmeup=g.extend(g.pickmeup||{},{current:null,date:new Date,default_date:new Date,flat:!1,first_day:1,prev:"&#9664;",
next:"&#9654;",mode:"single",select_year:!0,select_month:!0,select_day:!0,view:"days",calendars:1,format:"d-m-Y",title_format:"B, Y",position:"bottom",trigger_event:"click touchstart",class_name:"",separator:" - ",hide_on_select:!1,min:null,max:null,render:function(){},change:function(){return!0},before_show:function(){return!0},show:function(){return!0},hide:function(){return!0},fill:function(){return!0},locale:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),daysShort:"Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),
daysMin:"Su Mo Tu We Th Fr Sa Su".split(" "),months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")}});var O={years:"pmu-view-years",months:"pmu-view-months",days:"pmu-view-days"},x={wrapper:'<div class="pickmeup" />',head:function(a){for(var c="",d=0;7>d;++d)c+="<div>"+a.day[d]+"</div>";return'<div class="pmu-instance"><nav><div class="pmu-prev pmu-button">'+a.prev+'</div><div class="pmu-month pmu-button" /><div class="pmu-next pmu-button">'+
a.next+'</div></nav><nav class="pmu-day-of-week">'+c+"</nav></div>"},body:function(a,c){for(var d="",b=0;b<a.length;++b)d+='<div class="'+a[b].class_name+' pmu-button">'+a[b].text+"</div>";return'<div class="'+c+'">'+d+"</div>"}};g.fn.pickmeup=function(a){if("string"===typeof a){var c,d=Array.prototype.slice.call(arguments,1);switch(a){case "hide":case "show":case "clear":case "update":case "prev":case "next":case "destroy":this.each(function(){if(c=g(this).data("pickmeup-options"))c.binded[a]()});
break;case "get_date":return(c=this.data("pickmeup-options"))?c.binded.get_date(d[0]):null;case "set_date":this.each(function(){(c=g(this).data("pickmeup-options"))&&c.binded[a].apply(this,d)})}return this}return this.each(function(){var b=g(this);if(!b.data("pickmeup-options")){var c,d,e=g.extend(!0,{},g.pickmeup,a||{});for(c in e)d=b.data("pmu-"+c),"undefined"!==typeof d&&(e[c]=d);"days"!=e.view||e.select_day||(e.view="months");"months"!=e.view||e.select_month||(e.view="years");"years"!=e.view||
e.select_year||(e.view="days");"days"!=e.view||e.select_day||(e.view="months");e.calendars=Math.max(1,parseInt(e.calendars,10)||1);e.mode=/single|multiple|range/.test(e.mode)?e.mode:"single";e.min&&(e.min=l(e.min,e.format,e.separator,e.locale),e.select_day||e.min.setDate(1));e.max&&(e.max=l(e.max,e.format,e.separator,e.locale),e.select_day||e.max.setDate(1));var h=g(x.wrapper);this.pickmeup=h;e.class_name&&h.addClass(e.class_name);var u="";for(c=0;c<e.calendars;c++)d=e.first_day,u+=x.head({prev:e.prev,
next:e.next,day:[e.locale.daysMin[d++%7],e.locale.daysMin[d++%7],e.locale.daysMin[d++%7],e.locale.daysMin[d++%7],e.locale.daysMin[d++%7],e.locale.daysMin[d++%7],e.locale.daysMin[d++%7]]});b.data("pickmeup-options",e);for(c in e)-1!=["render","change","before_show","show","hide"].indexOf(c)&&(e[c]=e[c].bind(this));e.binded={fill:B.bind(this),update_date:C.bind(this),click:D.bind(this),show:z.bind(this),forced_show:E.bind(this),hide:F.bind(this),update:G.bind(this),clear:H.bind(this),prev:I.bind(this),
next:J.bind(this),get_date:K.bind(this),set_date:L.bind(this),destroy:M.bind(this)};e.events_namespace=".pickmeup-"+ ++N;h.on(r(e.trigger_event,e.events_namespace),e.binded.click).addClass(O[e.view]).append(u).on(g.support.selectstart?"selectstart":"mousedown",function(a){a.preventDefault()});e.flat?h.appendTo(this).css({position:"relative",display:"inline-block"}):(h.appendTo(document.body),b.on(r(e.trigger_event,e.events_namespace),function(){e.binded.show()}));e.binded.set_date(e.date,e.current)}})}});
