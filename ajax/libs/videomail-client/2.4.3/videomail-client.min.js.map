{"version":3,"sources":["videomail-client.js"],"names":["f","exports","module","define","amd","window","global","self","this","VideomailClient","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","_dereq_","root","factory","modules","installedModules","__webpack_require__","moduleId","id","loaded","m","c","p","Object","defineProperty","value","default","target","name","listener","options","optionName","arguments","undefined","addEventListener","listenerOptions","_checkSupport","SupportMap","assign","obj","key","enumerable","configurable","writable","_defineProperty","_OptionsMap","_constants","OptionsMap","PASSIVE","CAPTURE","ONCE","keys","forEach","k","property","opts","get","removeListener","checkSupportForProperty","2","methods","EventEmitter","inherits","raf","defaultRAFObject","requestAnimationFrame","cancelAnimationFrame","cancel","returnTrue","Animitter","__delay","delay","fixedDelta","frameCount","deltaTime","elapsedTime","__running","__completed","setFPS","fps","Infinity","setRequestAnimationFrameObject","requestAnimationFrameObject","onStart","scope","rAFID","now","Date","running","__lastTime","emit","lastRAFObject","drawFrame","__isReadyForUpdate","update","method","off","prototype","trigger","complete","stop","dispose","removeAllListeners","getDeltaTime","getElapsedTime","getFPS","getFPSLimit","__fps","getFrameCount","getRequestAnimationFrameObject","isRunning","isCompleted","reset","lastTime","half","Math","ceil","makeThrottle","object","start","setTimeout","globalFixedDelta","min","createAnimitter","fn","_instance","on","bind","apply","bound","fnKey","loop","functionKeys","arr","push","functions","hasBind","Function","getTime","events","3","Buffer","w","a2b","atob","str","toString","base64js","buf","b64ToByteArray","Array","map","ch","String","fromCharCode","join","buffer","4","toBuffer","isFloat32Array","float32Array","Int16Array","typedarray-to-buffer","validate.io-float32array","5","byteLength","b64","placeHoldersCount","toByteArray","tmp","placeHolders","len","Arr","L","revLookup","charCodeAt","fromByteArray","uint8","extraBytes","output","parts","len2","encodeChunk","lookup","Uint8Array","end","num","6","7","undef","nativeSplit","compliantExecNpcg","split","exec","separator","limit","separator2","match","lastIndex","lastLength","flags","ignoreCase","multiline","extended","sticky","lastLastIndex","RegExp","source","index","slice","replace","test","8","base64","ieee754","SlowBuffer","alloc","INSPECT_MAX_BYTES","K_MAX_LENGTH","createBuffer","RangeError","__proto__","arg","encodingOrOffset","allocUnsafe","from","TypeError","isArrayBuffer","array","byteOffset","fromArrayBuffer","string","encoding","isEncoding","actual","write","fromString","isBuffer","checked","copy","ArrayBuffer","isView","numberIsNaN","fromArrayLike","type","isArray","data","fromObject","assertSize","size","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","swap","b","bidirectionalIndexOf","val","dir","arrayIndexOf","indexOf","lastIndexOf","indexSize","arrLength","valLength","read","readUInt16BE","foundIndex","found","j","hexWrite","offset","Number","remaining","strLen","parsed","parseInt","substr","asciiWrite","blitBuffer","byteArray","asciiToBytes","base64Slice","utf8Slice","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","decodeCodePointsArray","kMaxLength","TYPED_ARRAY_SUPPORT","foo","typedArraySupport","console","error","Symbol","species","poolSize","fill","allocUnsafeSlow","_isBuffer","compare","x","y","concat","list","pos","swap16","swap32","swap64","toLocaleString","hexSlice","asciiSlice","latin1Slice","utf16leSlice","equals","inspect","max","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","units","hi","lo","utf16leToBytes","toJSON","_arr","ret","out","toHex","bytes","checkOffset","ext","checkInt","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","subarray","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","set","INVALID_BASE64_RE","leadSurrogate","trim","base64clean","src","dst","constructor","base64-js","9","verifiedImageType","isBrowser","document","createElement","canvas","image","types","quality","parseFloat","composeImageType","imageType","isMatch","uri","debug","getTestCanvas","testCanvas","width","height","canvasSupportsImageTypeAsync","cb","toDataURL","err","exc","canvasSupportsImageTypeSync","logger","verifyImageType","uriToBuffer","uriSplitted","getImageType","newVerifiedImageType","10","indexof","isTruthy","elem","cl","classList","add","remove","contains","toggle","token","className","item","getTokens","setTokens","splice","filter","11","createElementNS","testElement","createMethod","original","DOMTokenList","_toggle","force","view","classListProp","protoProp","elemCtrProto","Element","objCtr","strTrim","arrIndexOf","DOMEx","message","DOMException","checkTokenAndGetIndex","ClassList","trimmedClasses","getAttribute","classes","_updateClassName","setAttribute","classListProto","classListGetter","tokens","updated","result","classListPropDesc","ex","number","__defineGetter__","12","Emitter","mixin","event","_callbacks","once","removeEventListener","callbacks","args","listeners","hasListeners","13","DOCUMENT_POSITION_CONTAINED_BY","container","comparison","compareDocumentPosition","14","objectToString","isBoolean","isNull","isNullOrUndefined","isNumber","isString","isSymbol","isUndefined","isRegExp","re","isObject","isDate","d","isError","isFunction","isPrimitive","../../is-buffer/index.js","15","createErrorLib","lastcreateError","createError","noConflict","properties","ErrorCtor","attachProps","stack","captureStackTrace","Err","context","inheritedKeys","clone","cloned","create","attr","hasOwnProperty","16","isMergeableObject","stringValue","$$typeof","REACT_ELEMENT_TYPE","for","cloneUnlessOtherwiseSpecified","deepmerge","defaultArrayMerge","element","arrayMerge","destination","sourceIsArray","all","reduce","prev","next","17","18","Despot","util","_singletonDespotInstance","19","Event","Keys","noop","visible","onChange","broadcast","hidden","./keys","geval","global/document","20","prefix","mozHidden","msHidden","webkitHidden","detectPrefix","substring","21","process","stream","eos","shift","SIGNAL_FLUSH","onuncork","_corked","destroyer","_destroyInterval","_ended","Duplexify","readable","Duplex","_writable","_readable","_readable2","_forwardDestroy","destroy","_forwardEnd","_ondrain","_drained","_forwarding","_unwrite","_unread","_error","_preferError","destroyed","setWritable","setReadable","objectMode","highWaterMark","cork","uncork","unend","ondrain","nextTick","resume","rs","onreadable","_forward","onend","_readableState","wrap","_read","_destroy","_write","enc","_finish","ws","_writableState","prefinished","finished","ending","Writable","_process","end-of-stream","readable-stream","stream-shift","22","ElementProto","matches","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","selector","elements","ownerDocument","querySelectorAll","Boolean","closest","nodeType","parentNode","23","callback","onlegacyfinish","onfinish","onexit","exitCode","onerror","onclose","ended","onrequest","req","setHeader","abort","stdio","24","objectCreate","proto","F","objectKeys","_events","_eventsCount","_maxListeners","hasDefineProperty","defaultMaxListeners","$getMaxListeners","that","_addListener","prepend","existing","newListener","unshift","warned","emitter","count","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","listenerCount","evlistener","arrayClone","setMaxListeners","isNaN","getMaxListeners","er","handler","doError","isFn","emitNone","arg1","emitOne","arg2","emitTwo","arg3","emitThree","emitMany","addListener","prependListener","prependOnceListener","position","originalListener","pop","spliceOne","unwrapListeners","eventNames","Reflect","ownKeys","25","symbol","iec","bits","jedec","fullform","filesize","base","full","fullforms","neg","round","unix","spacer","standard","symbols","descriptor","suffixes","exponent","floor","log","toFixed","charAt","suffix","partial","opt","26","__esModule","getFormData","getFieldData","NODE_LIST_CLASSES","[object HTMLCollection]","[object NodeList]","[object RadioNodeList]","IGNORED_ELEMENT_TYPES","button","fieldset","submit","CHECKED_INPUT_TYPES","checkbox","radio","TRIM_RE","form","elementName","elementNames","elementNameLookup","disabled","_i","_l","fieldName","getFormElementValue","allRadios","selectedIndex","selected","multiple","files","27","listen","28","broadcaster","tuple","./event.js","29","doccy","topLevel","minDoc","min-document","30","win","31","style","display","32","languages","ar","mo","h","ms","decimal","bg","getSlavicForm","ca","cs","getCzechOrSlovakForm","da","de","en","es","fa","fi","fr","gr","hu","is","it","ja","ko","lt","getLithuanianForm","nl","no","pl","getPolishForm","pt","ru","uk","ur","sk","sv","tr","vi","zh_CN","zh_TW","humanizer","passedOptions","humanizerOptions","piece","abs","dictionary","language","unitName","unitMS","unitCount","pieces","unitMeasures","ratioToLargerUnit","previousPiece","firstOccupiedUnitIndex","largest","render","conjunction","delimiter","serialComma","doHumanization","extend","humanizeDuration","word","countStr","dictionaryValue","prop","getSupportedLanguages","33","Text","cleanupFuncs","appendChild","createTextNode","v","isNode","attachEvent","detachEvent","cssText","setProperty","parentElement","replaceChild","textContent","cleanup","el","nodeName","browser-split","class-list","html-element","34","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","35","36","ctor","superCtor","super_","TempCtor","37","containers","styleElements","usage","insertCss","css","styleElement","querySelector","containerId","insertBefore","childNodes","styleSheet","38","intervalometer","request","requestParameter","requestId","previousLoopTime","frameIntervalometer","timerIntervalometer","clearTimeout","39","preventEvent","eventName","stopImmediatePropagation","proxyProperty","propertyName","sourceObject","copyFirst","proxyEvent","dispatchEvent","dispatchEventAsync","Promise","resolve","then","iOS8or9","head","matchMedia","IIV","IIVEvent","IIVPlay","IIVPause","lastTimeupdateEvent","lastRequests","requestIndex","setTime","video","time","rememberOnly","currentTime","isPlayerEnded","player","driver","duration","play","webkitDisplayingFullscreen","paused","buffered","load","updater","hasAudio","readyState","HAVE_ENOUGH_DATA","pause","forceEvents","addPlayer","audio","timeDiff","HAVE_FUTURE_DATA","playbackRate","networkState","NETWORK_IDLE","Audio","crossOrigin","currentSrc","muted","wasEmpty","autoplay","preventWithPropOrFullscreen","isAllowed","everywhere","iPad","ipad","navigator","userAgent","willAutoplay","restoreAutoplay","platform","40","41","numberIsNan","number-is-nan","42","43","isTypedArray","strict","isStrictTypedArray","loose","isLooseTypedArray","names","[object Int8Array]","[object Int16Array]","[object Int32Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Uint16Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","Int8Array","Int32Array","Uint8ClampedArray","Uint16Array","Uint32Array","Float32Array","Float64Array","44","45","46","numberIsFinite","isInteger","is-finite","47","48","wrappy","called","onceStrict","onceError","49","getNanoSeconds","hrtime","loadTime","moduleLoadTime","nodeLoadTime","upTime","performance","hr","uptime","50","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","title","browser","env","argv","version","versions","binding","cwd","chdir","umask","51","vendors","caf","last","_now","cp","cancelled","handle","polyfill","performance-now","52","pna","Readable","allowHalfOpen","onEndNT","./_stream_readable","./_stream_writable","core-util-is","process-nextick-args","53","PassThrough","Transform","_transform","chunk","./_stream_transform","54","ReadableState","EElistenerCount","Stream","OurUint8Array","debugUtil","debuglog","StringDecoder","BufferList","destroyImpl","kProxyEvents","isDuplex","readableObjectMode","hwm","readableHwm","readableHighWaterMark","defaultHwm","pipes","pipesCount","flowing","endEmitted","reading","sync","needReadable","emittedReadable","readableListening","resumeScheduled","defaultEncoding","awaitDrain","readingMore","decoder","readableAddChunk","addToFront","skipChunkCheck","emitReadable","onEofChunk","chunkInvalid","getPrototypeOf","addChunk","maybeReadMore","_undestroy","undestroy","isPaused","setEncoding","MAX_HWM","howMuchToRead","emitReadable_","flow","maybeReadMore_","nReadingNextTick","resume_","fromList","clear","hasStrings","nb","tail","copyFromBufferString","copyFromBuffer","fromListPartial","endReadable","endReadableNT","xs","nOrig","doRead","pipe","dest","pipeOpts","endFn","stdout","stderr","unpipe","onunpipe","unpipeInfo","hasUnpiped","ondata","cleanedUp","needDrain","increasedAwaitDrain","dests","ev","_this","_fromList","./_stream_duplex","./internal/streams/BufferList","./internal/streams/destroy","./internal/streams/stream","isarray","safe-buffer","string_decoder/","55","_transformState","afterTransform","ts","transforming","writecb","writechunk","needTransform","writeencoding","transform","flush","_flush","prefinish","done","_this2","err2","56","CorkedRequest","entry","finish","corkReq","pendingcb","corkedRequestsFree","onCorkedFinish","asyncWrite","setImmediate","WritableState","internalUtil","deprecate","realHasInstance","nop","writableObjectMode","writableHwm","writableHighWaterMark","finalCalled","noDecode","decodeStrings","writing","corked","bufferProcessing","onwrite","writelen","finishMaybe","errorEmitted","needFinish","bufferedRequest","clearBuffer","afterWrite","lastBufferedRequest","bufferedRequestCount","writev","_writev","final","_final","doWrite","holder","allBuffers","isBuf","callFinal","need","getBuffer","current","_","hasInstance","valid","newChunk","decodeChunk","writeOrBuffer","setDefaultEncoding","endWritable","util-deprecate","57","instance","Constructor","_classCallCheck","custom","58","emitErrorNT","readableDestroyed","writableDestroyed","59","60","61","nenc","retried","_normalizeEncoding","normalizeEncoding","text","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8CheckByte","byte","repeat","utf8CheckExtraBytes","total","utf8CheckIncomplete","62","./lib/_stream_duplex.js","./lib/_stream_passthrough.js","./lib/_stream_readable.js","./lib/_stream_transform.js","./lib/_stream_writable.js","63","readystate","doc","html","documentElement","change","modern","doScroll","frameElement","polling","evt","./readystate","64","generate","RS","UNKNOWN","states","clean","previously","nr","toUpperCase","65","assignedRequestAnimationFrame","assignedCancelAnimationFrame","requestFrameMain","aF","rqAF","mozRAF","mozRequestAnimationFrame","mozCAF","mozCancelAnimationFrame","hasMozMismatch","previousTime","hasIOS6RequestAnimationFrameBug","hasBugNotice","webkitFn","nativeFn","timingFnB","notice","webkitRAF","webkitRequestAnimationFrame","rAF","hasMobileDeviceWidth","screen","requiresWebkitprefix","hasNoNavigationTiming","clearTimeoutWithId","setTimeoutWithTimestamp","immediateTime","lapsedTime","queryRequestAnimationFrame","vendor","queryCancelAnimationFrame","cancellationNames","cancellationNamePrefix","prefixedNames","cancellationFunction","prefixedCancelAnimationFrame","requestFrame","66","copyProps","SafeBuffer","67","hasProp","throwsMessage","ensureProperties","seen","visit","safeGetValueFromPropertyOnObject","replacer","space","JSON","stringify","68","69","Agent","_defaults","_setDefaults","def","70","RequestBase","ResponseBase","url","Request","getXHR","XMLHttpRequest","location","protocol","ActiveXObject","serialize","pairs","pushEncodedKeyValuePair","subkey","encodeURIComponent","parseString","pair","decodeURIComponent","isJSON","mime","Response","xhr","responseType","responseText","statusText","status","_setStatusProperties","header","headers","line","field","lines","fields","parseHeader","getAllResponseHeaders","getResponseHeader","_setHeaderProperties","_responseType","body","response","_parseBody","_query","_header","new_err","parse","rawResponse","statusCode","_isResponseOK","custom_err","del","send","serializeObject","json","xml","urlencoded","form-data","application/x-www-form-urlencoded","application/json","_parser","toError","msg","accept","auth","user","pass","btoa","_auth","query","attach","file","_data","_getFormData","append","_formData","FormData","_shouldRetry","_retry","_callback","_maxRetries","retries","_retries","crossDomainError","crossDomain","agent","_isHost","_endCalled","_finalizeQueryString","_end","_setTimeouts","onreadystatechange","_responseTimeoutTimer","timedout","_aborted","handleProgress","direction","percent","onprogress","upload","username","password","open","_withCredentials","withCredentials","contentType","_serializer","setRequestHeader","patch","post","put","./agent-base","./is-object","./request-base","./response-base","component-emitter","71","72","_timer","_timeout","_responseTimeout","option","deadline","retry","_retryCallback","ERROR_CODES","override","reject","_fullfilledPromise","innerResolve","innerReject","catch","use","ok","_okCallback","getHeader","unset","base64Encoder","redirects","_maxRedirects","maxResponseSize","_maxResponseSize","isObj","sortQuery","sort","_sort","queryArr","_appendQueryString","trace","_timeoutError","reason","errno","73","utils","ct","params","links","link","parseLinks","statusType","info","redirect","clientError","serverError","accepted","noContent","badRequest","unauthorized","notAcceptable","forbidden","notFound","./utils","74","cleanHeader","changesOrigin","75","is-typedarray","76","FUNC_TYPE","UNDEF_TYPE","MODEL","NAME","TYPE","VENDOR","VERSION","ARCHITECTURE","CONSOLE","MOBILE","TABLET","SMARTTV","WEARABLE","regexes","extensions","margedRegexes","has","str1","str2","lowerize","major","mapper","rgx","ua","arrays","q","regex","props","maps","oldsafari","1.0","1.2","1.3","2.0","2.0.2","2.0.3","2.0.4","?","device","amazon","model","Fire Phone","sprint","Evo Shift 4G","HTC","Sprint","os","windows","ME","NT 3.11","NT 4.0","2000","XP","Vista","8.1","RT","cpu","engine","UAParser","uastring","getResult","rgxmap","getBrowser","getCPU","architecture","getDevice","getEngine","getOS","getUA","setUA","BROWSER","MAJOR","CPU","DEVICE","EMBEDDED","ENGINE","OS","$","jQuery","Zepto","parser","77","config","localStorage","78","dup","79","80","formatRegExp","format","objects","noDeprecation","throwDeprecation","traceDeprecation","debugEnviron","debugs","ctx","stylize","stylizeNoColor","depth","colors","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styleType","styles","recurseTimes","primitive","simple","formatPrimitive","hash","visibleKeys","idx","getOwnPropertyNames","formatError","braces","toUTCString","formatProperty","formatArray","cur","numLinesEst","reduceToSingleString","desc","getOwnPropertyDescriptor","pad","NODE_DEBUG","pid","bold","italic","underline","inverse","white","grey","black","blue","cyan","green","magenta","red","yellow","special","boolean","null","date","regexp","months","getHours","getMinutes","getSeconds","getDate","getMonth","origin","./support/isBuffer","81","isStr","82","duplexify","WS","protocols","socket","isNative","WebSocket","socketWrite","socketWriteBrowser","bufferedAmount","bufferSize","bufferTimeout","coerceToBuffer","OPEN","binary","proxy","socketEnd","close","chunks","buffers","browserBufferSize","browserBufferTimeout","binaryType","onopen","onmessage","83","MozWebSocket","84","wrapper","85","description","author","contributors","email","homepage","repository","license","readmeFilename","main","scripts","minor","engines","node","yarn","npm","keywords","dependencies","add-eventlistener-with-options","animitter","audio-sample","canvas-to-buffer","classlist.js","create-error","defined","despot","document-visibility","element-closest","get-form-data","humanize-duration","hyperscript","insert-css","iphone-inline-video","is-power-of-two","keymirror","number-is-integer","request-frame","safe-json-stringify","superagent","ua-parser-js","websocket-stream","devDependencies","babel-core","babel-polyfill","babel-preset-env","babelify","body-parser","browserify","connect-send-json","fancy-log","glob","gulp","gulp-autoprefixer","gulp-bump","gulp-bytediff","gulp-concat","gulp-connect","gulp-cssnano","gulp-derequire","gulp-if","gulp-inject-string","gulp-load-plugins","gulp-plumber","gulp-rename","gulp-sourcemaps","gulp-standard","gulp-stylus","gulp-todo","gulp-uglify","minimist","nib","router","ssl-root-cas","tap-summary","tape","tape-catch","tape-run","vinyl-buffer","vinyl-source-stream","watchify","86","collectLogger","_deepmerge2","_interopRequireDefault","_readystate2","_util2","_options2","_constants2","_events2","_collectLogger2","_eventEmitter2","_container2","_replay2","_optionsWrapper2","_browser2","_resource2","replay","building","localOptions","addFunctions","adjustOptions","show","isBuilt","BUILT","videomail","interactive","getElementById","isOutsideElementOf","build","hasElement","getReplay","getParentElement","addPlayerDimensions","hideForm","deep","loadForm","setVideomail","showReplayOnly","startOver","hide","unload","canRecord","isDirty","isRecording","getLogLines","getLines","previousState","public","./constants","./events","./options","./resource","./util/browser","./util/collectLogger","./util/eventEmitter","./wrappers/container","./wrappers/optionsWrapper","./wrappers/visuals/replay","87","SITE_NAME_LABEL","VERSION_LABEL","ENC_TYPE_APP_JSON","ENC_TYPE_FORM","88","_keymirror","_keymirror2","FORM_READY","LOADING_USER_MEDIA","USER_MEDIA_READY","CONNECTING","CONNECTED","DISCONNECTED","COUNTDOWN","RECORDING","STOPPING","PROGRESS","BEGIN_AUDIO_ENCODING","BEGIN_VIDEO_ENCODING","RESETTING","PAUSED","RESUMING","PREVIEW","PREVIEW_SHOWN","REPLAY_SHOWN","INVALID","VALIDATING","VALID","SUBMITTING","SUBMITTED","ERROR","BLOCKING","SENDING_FIRST_FRAME","FIRST_FRAME_SENT","HIDE","NOTIFYING","ENABLING_AUDIO","DISABLING_AUDIO","LOADED_META_DATA","EVENT_EMITTED","GOING_BACK","STARTING_OVER","ASKING_WEBCAM_PERMISSION","VISIBLE","INVISIBLE","89","_package","PRODUCTION","NODE_ENV","logStackSize","verbose","baseUrl","socketUrl","siteName","cache","enablePause","enableAutoPause","enableSpace","disableSubmit","enableAutoValidation","enableAutoSubmission","enctype","selectors","replayClass","userMediaClass","visualsClass","buttonClass","buttonsClass","recordButtonClass","pauseButtonClass","resumeButtonClass","previewButtonClass","recordAgainButtonClass","submitButtonClass","subjectInputName","fromInputName","toInputName","bodyInputName","sendCopyInputName","keyInputName","parentKeyInputName","aliasInputName","formId","submitButtonId","submitButtonSelector","enabled","switch","volume","limitSeconds","countdown","pausedHeader","pausedHint","sending","limitReached","buttons","record","recordAgain","preview","notifier","entertain","entertainClass","entertainLimit","entertainInterval","timeouts","userMedia","connection","pingInterval","adjustFormDataBeforePosting","defaults","to","subject","playerOnly","displayErrors","adjustFormOnBrowserError","reportErrors","fakeUaString","../package.json","90","applyDefaultValue","packError","identifier","queryParams","_superagent2","CACHE_KEY","alias","reportError","adjustedVideomail","formData","formType","91","92","scriptProcessor","audioInput","vcAudioContext","hasAudioContext","getAudioContext","AudioContext","webkitAudioContext","init","localMediaStream","createGain","createMediaStreamSource","_videomailError2","_isPowerOfTwo2","gain","createScriptProcessor","CHANNELS","connect","onaudioprocess","inputBuffer","getChannelData","_audioSample2","onAudioProcess","disconnect","getSampleRate","sampleRate","./videomailError","93","_typeof","iterator","_uaParserJs2","_defined2","Browser","videoType","firefoxDownload","edgeDownload","chromeDownload","chromiumDownload","browseHappyLink","uaParser","isIOS","browserVersion","isChrome","isChromium","firefox","osVersion","isWindows","isEdge","isIE","isSafari","isOpera","isAndroid","chromeBased","isMobile","isOkSafari","isBadIOS","okBrowser","getRecommendation","warning","canPlayType","hasNavigator","mediaDevices","getUserMedia","getUserMedia_","checkRecordingCapabilities","IOS_PROBLEM","BROWSER_PROBLEM","isChromeBased","isFirefox","checkPlaybackCapabilities","getVideoType","checkBufferTypes","getNoAccessIssue","explanation","getUsefulData","94","lifo","level","parameters","addContainerId","firstArgument","toLocaleTimeString","groupCollapsed","groupEnd","./browser","95","moreArguments","_despot2","./../events","96","_filesize3","_humanizeDuration2","toTime","97","98","anything","_safeJsonStringify2","DASH","SEPARATOR","arrayToString","sLines","propertyNames","excludes","exclude","_safeJsonStringify","99","_requestFrame2","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","URL","webkitURL","mozURL","msURL","_requestFrame","100","_createError2","_pretty2","VIDEOMAIL_ERR_NAME","VideomailError","logLines","useragent","pretty","PERMISSION_DENIED","NOT_ALLOWED_ERROR","NOT_CONNECTED","DOM_EXCEPTION","STARTING_FAILED","MEDIA_DEVICE_NOT_SUPPORTED","WEBCAM_PROBLEM","OVERCONSTRAINED","NOT_FOUND_ERROR","NOT_READABLE_ERROR","SECURITY_ERROR","TRACK_START_ERROR","audioEnabled","isAudioEnabled","errType","NotFoundError","constraint","href","originalExplanation","details","errCode","resource","videomailError","client","hasClass","getClassList","removeDimensions","hideButtons","browserProblem","./../resource","./pretty","101","_hyperscript2","_hidden2","_contains2","Buttons","buttonsElement","recordButton","pauseButton","resumeButton","previewButton","recordAgainButton","submitButton","audioOnRadioPair","audioOffRadioPair","built","isShown","disable","tagName","enable","adjustButton","buttonElement","replaceClickHandler","clickHandler","onclick","preventDefault","makeRadioButtonPair","radioButtonElement","radioButtonGroup","htmlFor","label","changeHandler","onchange","makeButton","innerHTML","onFormReady","onFirstFrameSent","beginWaiting","initEvents","adjustButtonsForPause","framesCount","enableSubmit","isCountingDown","isRecordAgainButtonEnabled","isRecordButtonEnabled","setSubmitButton","newSubmitButton","getSubmitButton","hasForm","disableAudio","enableAudio","./../util/eventEmitter","102","_insertCss2","_documentVisibility2","_dimension2","_visuals2","_buttons2","_form2","_mainMinCss2","Container","containerElement","visibility","visuals","htmlElement","hasError","submitted","lastValidation","getFormElement","isAutoPauseEnabled","isContentEditable","contentEditable","keyCode","which","pauseOrResume","recordOrStop","unloadChildren","correctDimensions","getRecorderWidth","endWaiting","trimEmail","submitForm","videomailResponse","baseURI","finalizeSubmissions","formResponse","isPost","playerHeight","calculateHeight","responsive","videoWidth","ratio","playerWidth","calculateWidth","videoHeight","limitWidth","limitHeight","fnOptions","merge","areVisualsHidden","isHidden","hasDefinedWidth","hasDefinedHeight","validateOptions","formElement","findSubmitButton","buildForm","isNotifierBuilt","child","reference","isReplayShown","back","keepHidden","enableForm","isNotifying","validate","runValidation","isConnected","isUserMediaLoaded","isConnecting","whyInvalid","visualsValid","isReady","invalidInput","getInvalidElement","disableForm","buttonsToo","submitAll","startSubmission","FORM_FIELDS","videomailFormData","err1","parentKey","sendCopy","recordingStats","getRecordingStats","getRecorderHeight","isRecorderUnloaded","loadVideomail","setAudioEnabled","doTheSubmit","./../styles/css/main.min.css.js","./../util/videomailError","./buttons","./dimension","./form","./optionsWrapper","./visuals","103","_numberIsInteger2","figureMinHeight","limitedWidth","outerWidth","rect","getBoundingClientRect","right","left","limitedHeight","clientHeight","getRatio","calculatedWidth","104","_getFormData2","Form","disableContainerValidation","keyInput","setDisabled","getInputElements","getSelectElements","input","inputElement","inputElements","selectElements","videomailKey","hideAll","validity","formIsValid","checkValidity","105","_deepmerge","hasDefinedDimension","hasDefinedDimensions","hasVideoDimensions","defaultOptions","newOptions","106","_recorder2","_notifier2","_recorderInsides2","Visuals","visualsElement","recorder","recorderInsides","buildChildren","noScriptElement","blockingOptions","isRecordable","clientWidth","removeChild","hidePause","isVisible","showPause","resumeCountdown","startCountdown","getRecorder","getAudioSampleRate","showVisuals","isUnloaded","checkTimer","intervalSum","hideReplay","hideRecorder","./visuals/inside/recorderInsides","./visuals/notifier","./visuals/recorder","./visuals/replay","107","countdownElement","intervalId","countBackward","setInterval","clearInterval","108","pausedBlockElement","pausedHeaderElement","pausedHintElement","hasPausedHint","./../../../../util/videomailError","109","recordNoteElement","setNear","setNigh","110","recordNote","recordTimerElement","started","nearComputed","endNighComputed","thresholdReached","secs","threshold","mins","remainingSeconds","getStartSeconds","check","newCountdown","111","_countdown2","_pausedNote2","_recordNote2","_recordTimer2","RecorderInsides","pausedNote","recordTimer","onResetting","hideCountdown","./../../../events","./../../../util/eventEmitter","./recorder/countdown","./recorder/pausedNote","./recorder/recordNote","./recorder/recordTimer","112","Notifier","notifyElement","messageElement","explanationElement","entertainTimeoutId","entertaining","notify","lead","stillWait","frameProgress","sampleProgress","overallProgress","setExplanation","hideExplanation","onBeginVideoEncoding","runEntertainment","randomBackgroundClass","random","cancelEntertainment","blocking","problem","notifyOptions","messageOptions","./../../events","./../../util/eventEmitter","113","_websocketStream2","_canvasToBuffer2","_animitter2","_userMedia2","_humanize2","PIPE_SYMBOL","Recorder","originalAnimationFrameObject","recorderElement","userMediaTimeout","retryTimeout","bytesSum","userMediaLoaded","userMediaLoading","submitting","unloaded","stopTime","connecting","connected","waitingTime","frame","recordingBufferLength","recordingBuffer","samplesCount","confirmedFrameNumber","confirmedSampleNumber","writeStream","stopPings","onFlushedCallback","onUserMediaReady","newLoop","draw","clearUserMediaTimeout","calculateFrameProgress","calculateSampleProgress","updateOverallProgress","initSocket","url2Connect","perMessageDeflate","command","loadUserMedia","mp4","setMp4Source","webm","setWebMSource","sample","userMediaErrorCallback","getCharacteristics","getUserMediaCallback","localStream","audioSample","constraints","facingMode","frameRate","ideal","loadGenuineUserMedia","writeCommand","commandObj","getIntervalSum","reInitialiseAudio","onFlushed","frameNumber","drawImage","getRawVisuals","setAnimationFrameObject","newObj","wantedInterval","processingTime","loopWithTimeouts","userMediaVideoWidth","getVideoWidth","getVideoHeight","avgFps","wantedFps","avgInterval","cause","unloadRemainingEventListeners","eventType","createCanvas","getContext","hasVideoWidth","getRawWidth","getRawHeight","getRawVisualUserMedia","./../../constants","./../../util/browser","./../../util/humanize","./../../util/pretty","./../../util/videomailError","./userMedia","114","_addEventlistenerWithOptions2","_iphoneInlineVideo2","Replay","replayElement","isStandalone","setVideoSource","bustCache","getVideoSource","newVideomail","attributeContainer","poster","attribute","recorderWidth","recorderHeight","buildElement","sources","getElementsByTagName","115","audioRecorder","currentVisualStream","rawVisualUserMedia","setVisualStream","srcObject","createObjectURL","attachMediaStream","removeAttribute","getVisualStream","mozSrcObject","hasEnded","visualStream","hasInvalidDimensions","logEvent","EVENT_ASCII","outputEvent","_mediaEvents2","videoCallback","audioCallback","endedEarlyCallback","videoTracks","videoTrack","onPlayReached","onLoadedMetaDataReached","playingPromiseReached","audioRecord","unloadAllEventListeners","onPlay","onLoadedMetaData","played","fireCallbacks","_audioRecorder2","getVideoTracks","remote","kind","aboutToInitialize","tracks","getTracks","newStopApiFound","track","rawWidth","widthDefined","rawHeight","audioSampleRate","./../../util/audioRecorder","./../../util/mediaEvents","videomail-client","_standardize2","_client2","./client","./util/standardize"],"mappings":"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","file":"videomail-client.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.VideomailClient = f()}})(function(){var define,module,exports;return (function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()({1:[function(_dereq_,module,exports){\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"add-eventlistener-with-options\"] = factory();\n\telse\n\t\troot[\"add-eventlistener-with-options\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = addEventListenerWithOptions;\n\n\tvar _checkSupport = __webpack_require__(1);\n\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\t/**\n\t * Add event listener with additional options\n\t * @param {EventTarget} target - The EventTarget element\n\t * @param {string} name - The name of the event\n\t * @param {function} listener - The event listener callback\n\t * @param {object} options - The options explicitly passed from caller\n\t * @param {string} optionName - The additioanl option to add to the event listener \n\t */\n\tfunction addEventListenerWithOptions(target, name, listener, options) {\n\t    var optionName = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 'passive';\n\n\t    if (target.addEventListener !== undefined) {\n\t        var listenerOptions = _checkSupport.SupportMap[optionName] ? Object.assign({}, options, _defineProperty({}, optionName, true)) : options;\n\t        target.addEventListener(name, listener, listenerOptions);\n\t    }\n\t}\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.SupportMap = undefined;\n\n\tvar _OptionsMap;\n\n\tvar _constants = __webpack_require__(2);\n\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\tvar OptionsMap = (_OptionsMap = {}, _defineProperty(_OptionsMap, _constants.PASSIVE, false), _defineProperty(_OptionsMap, _constants.CAPTURE, false), _defineProperty(_OptionsMap, _constants.ONCE, false), _OptionsMap);\n\n\tvar getOptionsMap = function getOptionsMap() {\n\t    Object.keys(OptionsMap).forEach(function (k, i) {\n\t        OptionsMap[k] = checkSupportForProperty(k);\n\t    });\n\n\t    return OptionsMap;\n\t};\n\n\tfunction checkSupportForProperty(property) {\n\t    if (!!OptionsMap[property]) {\n\t        return OptionsMap[property];\n\t    }\n\n\t    try {\n\t        var opts = Object.defineProperty({}, property, {\n\t            get: function get() {\n\t                OptionsMap[property] = true;\n\t            }\n\t        });\n\t        window.addEventListener(\"test\", null, opts);\n\t        window.removeListener(\"test\", null);\n\t    } catch (e) {}\n\n\t    return OptionsMap[property];\n\t}\n\n\tvar SupportMap = exports.SupportMap = getOptionsMap();\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar PASSIVE = exports.PASSIVE = 'passive';\n\tvar CAPTURE = exports.CAPTURE = 'capture';\n\tvar ONCE = exports.ONCE = 'once';\n\n/***/ }\n/******/ ])\n});\n;\n},{}],2:[function(_dereq_,module,exports){\nvar EventEmitter          = _dereq_('events').EventEmitter,\n    inherits              = _dereq_('inherits'),\n    raf                   = _dereq_('raf'),\n    methods;\n\n\n//the same as off window unless polyfilled or in node\nvar defaultRAFObject = {\n    requestAnimationFrame: raf,\n    cancelAnimationFrame: raf.cancel\n};\n\nfunction returnTrue(){ return true; }\n\n//manage FPS if < 60, else return true;\nfunction makeThrottle(fps){\n    var delay = 1000/fps;\n    var lastTime = Date.now();\n\n\n    if( fps<=0 || fps === Infinity ){\n        return returnTrue;\n    }\n\n    //if an fps throttle has been set then we'll assume\n    //it natively runs at 60fps,\n    var half = Math.ceil(1000 / 60) / 2;\n\n    return function(){\n        //if a custom fps is requested\n        var now = Date.now();\n        //is this frame within 8.5ms of the target?\n        //if so then next frame is gonna be too late\n        if(now - lastTime < delay - half){\n            return false;\n        }\n        lastTime = now;\n        return true;\n    };\n}\n\n\n/**\n * Animitter provides event-based loops for the browser and node,\n * using `requestAnimationFrame`\n * @param {Object} [opts]\n * @param {Number} [opts.fps=Infinity] the framerate requested, defaults to as fast as it can (60fps on window)\n * @param {Number} [opts.delay=0] milliseconds delay between invoking `start` and initializing the loop\n * @param {Object} [opts.requestAnimationFrameObject=global] the object on which to find `requestAnimationFrame` and `cancelAnimationFrame` methods\n * @param {Boolean} [opts.fixedDelta=false] if true, timestamps will pretend to be executed at fixed intervals always\n * @constructor\n */\nfunction Animitter( opts ){\n    opts = opts || {};\n\n    this.__delay = opts.delay || 0;\n\n    /** @expose */\n    this.fixedDelta = !!opts.fixedDelta;\n\n    /** @expose */\n    this.frameCount = 0;\n    /** @expose */\n    this.deltaTime = 0;\n    /** @expose */\n    this.elapsedTime = 0;\n\n    /** @private */\n    this.__running = false;\n    /** @private */\n    this.__completed = false;\n\n    this.setFPS(opts.fps || Infinity);\n    this.setRequestAnimationFrameObject(opts.requestAnimationFrameObject || defaultRAFObject);\n}\n\ninherits(Animitter, EventEmitter);\n\nfunction onStart(scope){\n    var now = Date.now();\n    var rAFID;\n    //dont let a second animation start on the same object\n    //use *.on('update',fn)* instead\n    if(scope.__running){\n        return scope;\n    }\n\n    exports.running += 1;\n    scope.__running = true;\n    scope.__lastTime = now;\n    scope.deltaTime = 0;\n\n    //emit **start** once at the beginning\n    scope.emit('start', scope.deltaTime, 0, scope.frameCount);\n\n    var lastRAFObject = scope.requestAnimationFrameObject;\n\n    var drawFrame = function(){\n        if(lastRAFObject !== scope.requestAnimationFrameObject){\n            //if the requestAnimationFrameObject switched in-between,\n            //then re-request with the new one to ensure proper update execution context\n            //i.e. VRDisplay#submitFrame() may only be requested through VRDisplay#requestAnimationFrame(drawFrame)\n            lastRAFObject = scope.requestAnimationFrameObject;\n            scope.requestAnimationFrameObject.requestAnimationFrame(drawFrame);\n            return;\n        }\n        if(scope.__isReadyForUpdate()){\n            scope.update();\n        }\n        if(scope.__running){\n            rAFID = scope.requestAnimationFrameObject.requestAnimationFrame(drawFrame);\n        } else {\n            scope.requestAnimationFrameObject.cancelAnimationFrame(rAFID);\n        }\n    };\n\n    scope.requestAnimationFrameObject.requestAnimationFrame(drawFrame);\n\n    return scope;\n}\n\nmethods = {\n    //EventEmitter Aliases\n    off     : EventEmitter.prototype.removeListener,\n    trigger : EventEmitter.prototype.emit,\n\n    /**\n     * stops the animation and marks it as completed\n     * @emit Animitter#complete\n     * @returns {Animitter}\n     */\n    complete: function(){\n        this.stop();\n        this.__completed = true;\n        this.emit('complete', this.frameCount, this.deltaTime);\n        return this;\n    },\n\n    /**\n     * stops the animation and removes all listeners\n     * @emit Animitter#stop\n     * @returns {Animitter}\n     */\n    dispose: function(){\n        this.stop();\n        this.removeAllListeners();\n        return this;\n    },\n\n    /**\n     * get milliseconds between the last 2 updates\n     *\n     * @return {Number}\n     */\n    getDeltaTime: function(){\n        return this.deltaTime;\n    },\n\n    /**\n     * get the total milliseconds that the animation has ran.\n     * This is the cumlative value of the deltaTime between frames\n     *\n     * @return {Number}\n     */\n    getElapsedTime: function(){\n        return this.elapsedTime;\n    },\n\n    /**\n     * get the instances frames per second as calculated by the last delta\n     *\n     * @return {Number}\n     */\n    getFPS: function(){\n        return this.deltaTime > 0 ? 1000 / this.deltaTime : 0;\n        if(this.deltaTime){\n            return 1000 / this.deltaTime;\n        }\n    },\n\n    /**\n     * get the explicit FPS limit set via `Animitter#setFPS(fps)` or\n     * via the initial `options.fps` property\n     *\n     * @returns {Number} either as set or Infinity\n     */\n    getFPSLimit: function(){\n        return this.__fps;\n    },\n\n    /**\n     * get the number of frames that have occurred\n     *\n     * @return {Number}\n     */\n    getFrameCount: function(){\n        return this.frameCount;\n    },\n\n\n    /**\n     * get the object providing `requestAnimationFrame`\n     * and `cancelAnimationFrame` methods\n     * @return {Object}\n     */\n    getRequestAnimationFrameObject: function(){\n        return this.requestAnimationFrameObject;\n    },\n\n    /**\n     * is the animation loop active\n     *\n     * @return {boolean}\n     */\n    isRunning: function(){\n        return this.__running;\n    },\n\n    /**\n     * is the animation marked as completed\n     *\n     * @return {boolean}\n     */\n    isCompleted: function(){\n        return this.__completed;\n    },\n\n    /**\n     * reset the animation loop, marks as incomplete,\n     * leaves listeners intact\n     *\n     * @emit Animitter#reset\n     * @return {Animitter}\n     */\n    reset: function(){\n        this.stop();\n        this.__completed = false;\n        this.__lastTime = 0;\n        this.deltaTime = 0;\n        this.elapsedTime = 0;\n        this.frameCount = 0;\n\n        this.emit('reset', 0, 0, this.frameCount);\n        return this;\n    },\n\n    /**\n     * set the framerate for the animation loop\n     *\n     * @param {Number} fps\n     * @return {Animitter}\n     */\n    setFPS: function(fps){\n        this.__fps = fps;\n        this.__isReadyForUpdate = makeThrottle(fps);\n        return this;\n    },\n\n    /**\n     * set the object that will provide `requestAnimationFrame`\n     * and `cancelAnimationFrame` methods to this instance\n     * @param {Object} object\n     * @return {Animitter}\n     */\n    setRequestAnimationFrameObject: function(object){\n        if(typeof object.requestAnimationFrame !== 'function' || typeof object.cancelAnimationFrame !== 'function'){\n            throw new Error(\"Invalid object provide to `setRequestAnimationFrameObject`\");\n        }\n        this.requestAnimationFrameObject = object;\n        return this;\n    },\n\n    /**\n     * start an animation loop\n     * @emit Animitter#start\n     * @return {Animitter}\n     */\n    start: function(){\n        var self = this;\n        if(this.__delay){\n            setTimeout(function(){\n                onStart(self);\n            }, this.__delay);\n        } else {\n            onStart(this);\n        }\n        return this;\n    },\n\n    /**\n     * stops the animation loop, does not mark as completed\n     *\n     * @emit Animitter#stop\n     * @return {Animitter}\n     */\n    stop: function(){\n        if( this.__running ){\n            this.__running = false;\n            exports.running -= 1;\n            this.emit('stop', this.deltaTime, this.elapsedTime, this.frameCount);\n        }\n        return this;\n    },\n\n    /**\n     * update the animation loop once\n     *\n     * @emit Animitter#update\n     * @return {Animitter}\n     */\n    update: function(){\n        this.frameCount++;\n        /** @private */\n        var now = Date.now();\n        this.__lastTime = this.__lastTime || now;\n        this.deltaTime = (this.fixedDelta || exports.globalFixedDelta) ? 1000/Math.min(60, this.__fps) : now - this.__lastTime;\n        this.elapsedTime += this.deltaTime;\n        this.__lastTime = now;\n\n        this.emit('update', this.deltaTime, this.elapsedTime, this.frameCount);\n        return this;\n    }\n};\n\n\n\nfor(var method in methods){\n    Animitter.prototype[method] = methods[method];\n}\n\n\n/**\n * create an animitter instance,\n * @param {Object} [options]\n * @param {Function} fn( deltaTime:Number, elapsedTime:Number, frameCount:Number )\n * @returns {Animitter}\n */\nfunction createAnimitter(options, fn){\n\n    if( arguments.length === 1 && typeof options === 'function'){\n        fn = options;\n        options = {};\n    }\n\n    var _instance = new Animitter( options );\n\n    if( fn ){\n        _instance.on('update', fn);\n    }\n\n    return _instance;\n}\n\nmodule.exports = exports = createAnimitter;\n\n/**\n * create an animitter instance,\n * where the scope is bound in all functions\n * @param {Object} [options]\n * @param {Function} fn( deltaTime:Number, elapsedTime:Number, frameCount:Number )\n * @returns {Animitter}\n */\nexports.bound = function(options, fn){\n\n    var loop = createAnimitter(options, fn),\n        functionKeys = functions(Animitter.prototype),\n        hasBind = !!Function.prototype.bind,\n        fnKey;\n\n    for(var i=0; i<functionKeys.length; i++){\n        fnKey = functionKeys[i];\n        loop[fnKey] = hasBind ? loop[fnKey].bind(loop) : bind(loop[fnKey], loop);\n    }\n\n    return loop;\n};\n\n\nexports.Animitter = Animitter;\n\n/**\n * if true, all `Animitter` instances will behave as if `options.fixedDelta = true`\n */\nexports.globalFixedDelta = false;\n\n//helpful to inherit from when using bundled\nexports.EventEmitter = EventEmitter;\n//keep a global counter of all loops running, helpful to watch in dev tools\nexports.running = 0;\n\nfunction bind(fn, scope){\n    if(typeof fn.bind === 'function'){\n        return fn.bind(scope);\n    }\n    return function(){\n        return fn.apply(scope, arguments);\n    };\n}\n\nfunction functions(obj){\n    var keys = Object.keys(obj);\n    var arr = [];\n    for(var i=0; i<keys.length; i++){\n        if(typeof obj[keys[i]] === 'function'){\n            arr.push(keys[i]);\n        }\n    }\n    return arr;\n}\n\n\n\n//polyfill Date.now for real-old browsers\nDate.now = Date.now || function now() {\n    return new Date().getTime();\n};\n\n},{\"events\":24,\"inherits\":36,\"raf\":51}],3:[function(_dereq_,module,exports){\n(function (Buffer){\n(function (w) {\n  \"use strict\";\n\n  var a2b = w.atob;\n\n  function atob(str) {\n    // normal window\n    if ('function' === typeof a2b) {\n      return a2b(str);\n    }\n    // browserify (web worker)\n    else if ('function' === typeof Buffer) {\n      return new Buffer(str, 'base64').toString('binary');\n    }\n    // ios web worker with base64js\n    else if ('object' === typeof w.base64js) {\n      // bufferToBinaryString\n      // https://github.com/coolaj86/unibabel-js/blob/master/index.js#L50\n      var buf = w.base64js.b64ToByteArray(str);\n\n      return Array.prototype.map.call(buf, function (ch) {\n        return String.fromCharCode(ch);\n      }).join('');\n    }\n    // ios web worker without base64js\n    else {\n      throw new Error(\"you're probably in an ios webworker. please include use beatgammit's base64-js\");\n    }\n  }\n\n  w.atob = atob;\n\n  if (typeof module !== 'undefined') {\n    module.exports = atob;\n  }\n}(window));\n\n}).call(this,_dereq_(\"buffer\").Buffer)\n},{\"buffer\":8}],4:[function(_dereq_,module,exports){\nvar toBuffer = _dereq_('typedarray-to-buffer')\nvar isFloat32Array = _dereq_('validate.io-float32array')\n\nmodule.exports = function (float32Array) {\n  if (!float32Array) {\n    throw new Error('A Float32Array parameter is missing.')\n  }\n\n  if (!isFloat32Array(float32Array)) {\n    throw new Error('The parameter is not a Float32Array.')\n  }\n\n  this.toBuffer = function () {\n    var l = float32Array.length\n    var arr = new Int16Array(l)\n    var i\n\n    for (i = 0; i < l; i++) {\n      arr[i] = Math.min(1, float32Array[i]) * 0x7FFF\n    }\n\n    return toBuffer(arr)\n  }\n}\n\n},{\"typedarray-to-buffer\":75,\"validate.io-float32array\":81}],5:[function(_dereq_,module,exports){\n'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction placeHoldersCount (b64) {\n  var len = b64.length\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  return b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n}\n\nfunction byteLength (b64) {\n  // base64 is 4/3 + up to two characters of the original data\n  return (b64.length * 3 / 4) - placeHoldersCount(b64)\n}\n\nfunction toByteArray (b64) {\n  var i, l, tmp, placeHolders, arr\n  var len = b64.length\n  placeHolders = placeHoldersCount(b64)\n\n  arr = new Arr((len * 3 / 4) - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0; i < l; i += 4) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = ((uint8[i] << 16) & 0xFF0000) + ((uint8[i + 1] << 8) & 0xFF00) + (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n\n},{}],6:[function(_dereq_,module,exports){\n\n},{}],7:[function(_dereq_,module,exports){\n/*!\n * Cross-Browser Split 1.1.1\n * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>\n * Available under the MIT License\n * ECMAScript compliant, uniform cross-browser split method\n */\n\n/**\n * Splits a string into an array of strings using a regex or string separator. Matches of the\n * separator are not included in the result array. However, if `separator` is a regex that contains\n * capturing groups, backreferences are spliced into the result each time `separator` is matched.\n * Fixes browser bugs compared to the native `String.prototype.split` and can be used reliably\n * cross-browser.\n * @param {String} str String to split.\n * @param {RegExp|String} separator Regex or string to use for separating the string.\n * @param {Number} [limit] Maximum number of items to include in the result array.\n * @returns {Array} Array of substrings.\n * @example\n *\n * // Basic use\n * split('a b c d', ' ');\n * // -> ['a', 'b', 'c', 'd']\n *\n * // With limit\n * split('a b c d', ' ', 2);\n * // -> ['a', 'b']\n *\n * // Backreferences in result array\n * split('..word1 word2..', /([a-z]+)(\\d+)/i);\n * // -> ['..', 'word', '1', ' ', 'word', '2', '..']\n */\nmodule.exports = (function split(undef) {\n\n  var nativeSplit = String.prototype.split,\n    compliantExecNpcg = /()??/.exec(\"\")[1] === undef,\n    // NPCG: nonparticipating capturing group\n    self;\n\n  self = function(str, separator, limit) {\n    // If `separator` is not a regex, use `nativeSplit`\n    if (Object.prototype.toString.call(separator) !== \"[object RegExp]\") {\n      return nativeSplit.call(str, separator, limit);\n    }\n    var output = [],\n      flags = (separator.ignoreCase ? \"i\" : \"\") + (separator.multiline ? \"m\" : \"\") + (separator.extended ? \"x\" : \"\") + // Proposed for ES6\n      (separator.sticky ? \"y\" : \"\"),\n      // Firefox 3+\n      lastLastIndex = 0,\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      separator = new RegExp(separator.source, flags + \"g\"),\n      separator2, match, lastIndex, lastLength;\n    str += \"\"; // Type-convert\n    if (!compliantExecNpcg) {\n      // Doesn't need flags gy, but they don't hurt\n      separator2 = new RegExp(\"^\" + separator.source + \"$(?!\\\\s)\", flags);\n    }\n    /* Values for `limit`, per the spec:\n     * If undefined: 4294967295 // Math.pow(2, 32) - 1\n     * If 0, Infinity, or NaN: 0\n     * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;\n     * If negative number: 4294967296 - Math.floor(Math.abs(limit))\n     * If other: Type-convert, then use the above rules\n     */\n    limit = limit === undef ? -1 >>> 0 : // Math.pow(2, 32) - 1\n    limit >>> 0; // ToUint32(limit)\n    while (match = separator.exec(str)) {\n      // `separator.lastIndex` is not reliable cross-browser\n      lastIndex = match.index + match[0].length;\n      if (lastIndex > lastLastIndex) {\n        output.push(str.slice(lastLastIndex, match.index));\n        // Fix browsers whose `exec` methods don't consistently return `undefined` for\n        // nonparticipating capturing groups\n        if (!compliantExecNpcg && match.length > 1) {\n          match[0].replace(separator2, function() {\n            for (var i = 1; i < arguments.length - 2; i++) {\n              if (arguments[i] === undef) {\n                match[i] = undef;\n              }\n            }\n          });\n        }\n        if (match.length > 1 && match.index < str.length) {\n          Array.prototype.push.apply(output, match.slice(1));\n        }\n        lastLength = match[0].length;\n        lastLastIndex = lastIndex;\n        if (output.length >= limit) {\n          break;\n        }\n      }\n      if (separator.lastIndex === match.index) {\n        separator.lastIndex++; // Avoid an infinite loop\n      }\n    }\n    if (lastLastIndex === str.length) {\n      if (lastLength || !separator.test(\"\")) {\n        output.push(\"\");\n      }\n    } else {\n      output.push(str.slice(lastLastIndex));\n    }\n    return output.length > limit ? output.slice(0, limit) : output;\n  };\n\n  return self;\n})();\n\n},{}],8:[function(_dereq_,module,exports){\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = _dereq_('base64-js')\nvar ieee754 = _dereq_('ieee754')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nvar K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  get: function () {\n    if (!(this instanceof Buffer)) {\n      return undefined\n    }\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  get: function () {\n    if (!(this instanceof Buffer)) {\n      return undefined\n    }\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('Invalid typed array length')\n  }\n  // Return an augmented `Uint8Array` instance\n  var buf = new Uint8Array(length)\n  buf.__proto__ = Buffer.prototype\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\n// Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\nif (typeof Symbol !== 'undefined' && Symbol.species &&\n    Buffer[Symbol.species] === Buffer) {\n  Object.defineProperty(Buffer, Symbol.species, {\n    value: null,\n    configurable: true,\n    enumerable: false,\n    writable: false\n  })\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (isArrayBuffer(value) || (value && isArrayBuffer(value.buffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  return fromObject(value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nBuffer.prototype.__proto__ = Uint8Array.prototype\nBuffer.__proto__ = Uint8Array\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  var length = byteLength(string, encoding) | 0\n  var buf = createBuffer(length)\n\n  var actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  buf.__proto__ = Buffer.prototype\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj) {\n    if (ArrayBuffer.isView(obj) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n        return createBuffer(0)\n      }\n      return fromArrayLike(obj)\n    }\n\n    if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n      return fromArrayLike(obj.data)\n    }\n  }\n\n  throw new TypeError('The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (ArrayBuffer.isView(buf)) {\n      buf = Buffer.from(buf)\n    }\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isArrayBuffer(string)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  var strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  newBuf.__proto__ = Buffer.prototype\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (var i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : new Buffer(val, encoding)\n    var len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffers from another context (i.e. an iframe) do not pass the `instanceof` check\n// but they should be treated as valid. See: https://github.com/feross/buffer/issues/166\nfunction isArrayBuffer (obj) {\n  return obj instanceof ArrayBuffer ||\n    (obj != null && obj.constructor != null && obj.constructor.name === 'ArrayBuffer' &&\n      typeof obj.byteLength === 'number')\n}\n\nfunction numberIsNaN (obj) {\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n},{\"base64-js\":5,\"ieee754\":34}],9:[function(_dereq_,module,exports){\nvar toBuffer = _dereq_('typedarray-to-buffer')\nvar atob = _dereq_('atob')\nvar isBrowser = typeof document !== 'undefined' && typeof document.createElement === 'function'\n\n// cached, used only once for browser environments\nvar verifiedImageType\n\nmodule.exports = function (canvas, options) {\n  var self = this\n\n  options = options || {}\n  options.image = options.image ? options.image : {}\n  options.image.types = options.image.types ? options.image.types : []\n\n  // validate some options this class needs\n  if (options.image.types.length > 2) {\n    throw new Error('Too many image types are specified!')\n  } else if (options.image.types.length < 1) {\n    // Set a default image type, just to be robust\n    options.image.types = isBrowser ? ['webp', 'jpeg'] : ['png']\n  }\n\n  if (!options.image.quality) {\n    options.image.quality = 0.5 // default\n  }\n\n  var quality = parseFloat(options.image.quality)\n\n  function composeImageType (index) {\n    var imageType\n\n    if (options.image.types[index]) {\n      imageType = 'image/' + options.image.types[index]\n    }\n\n    return imageType\n  }\n\n  function isMatch (uri, imageType) {\n    var match = uri && uri.match(imageType)\n\n    match && options.debug && options.debug('Image type %s verified', imageType)\n\n    return match\n  }\n\n  // Performance tweak, we do not need a big canvas for finding out the supported image type\n  function getTestCanvas () {\n    var testCanvas\n\n    if (isBrowser) {\n      testCanvas = document.createElement('canvas')\n      testCanvas.width = testCanvas.height = 1\n    } else {\n      testCanvas = canvas\n    }\n\n    return testCanvas\n  }\n\n  function canvasSupportsImageTypeAsync (imageType, cb) {\n    try {\n      getTestCanvas().toDataURL(imageType, function (err, uri) {\n        if (err) {\n          cb(err)\n        } else {\n          cb(null, isMatch(uri, imageType))\n        }\n      })\n    } catch (exc) {\n      cb(null, false)\n    }\n  }\n\n  function canvasSupportsImageTypeSync (imageType) {\n    var match\n\n    try {\n      var testCanvas = getTestCanvas()\n      var uri = testCanvas.toDataURL && testCanvas.toDataURL(imageType)\n\n      match = isMatch(uri, imageType)\n    } catch (exc) {\n      // Can happen when i.E. a spider is coming. Just be robust here and continue.\n      options.debug &&\n      options.logger.debug('Failed to call toDataURL() on canvas for image type %s', imageType)\n    }\n\n    return match\n  }\n\n  function verifyImageTypeAsync (imageType, cb) {\n    canvasSupportsImageTypeAsync(imageType, function (err, match) {\n      if (err) {\n        cb(err)\n      } else {\n        if (match) {\n          cb(null, imageType)\n        } else {\n          imageType = composeImageType(1)\n\n          canvasSupportsImageTypeAsync(imageType, function (err, match) {\n            if (err) {\n              cb(err)\n            } else {\n              cb(null, match ? imageType : null)\n            }\n          })\n        }\n      }\n    })\n  }\n\n  function verifyImageTypeSync (imageType) {\n    if (!canvasSupportsImageTypeSync(imageType)) {\n      if (options.image.types[1]) {\n        imageType = composeImageType(1)\n\n        if (!canvasSupportsImageTypeSync(imageType)) {\n          imageType = null\n        }\n      } else {\n        imageType = null\n      }\n    }\n\n    !imageType && options.debug && options.logger.debug('Unable to verify image type')\n\n    return imageType\n  }\n\n  // callbacks are needed for server side tests\n  function verifyImageType (cb) {\n    var imageType = composeImageType(0)\n\n    if (cb) {\n      verifyImageTypeAsync(imageType, cb)\n    } else {\n      return verifyImageTypeSync(imageType)\n    }\n  }\n\n  // this method is proven to be fast, see\n  // http://jsperf.com/data-uri-to-buffer-performance/3\n  function uriToBuffer (uri) {\n    var uriSplitted = uri.split(',')[1]\n    var bytes\n\n    // Beware that the atob function might be a static one for server side tests\n    if (typeof (atob) === 'function') {\n      bytes = atob(uriSplitted)\n    } else if (typeof (self.constructor.atob) === 'function') {\n      bytes = self.constructor.atob(uriSplitted)\n    } else {\n      throw new Error('atob function is missing')\n    }\n\n    var arr = new Uint8Array(bytes.length)\n\n    // http://mrale.ph/blog/2014/12/24/array-length-caching.html\n    for (var i = 0, l = bytes.length; i < l; i++) {\n      arr[i] = bytes.charCodeAt(i)\n    }\n\n    return toBuffer(arr)\n  }\n\n  function toBufferSync () {\n    var imageType = self.getImageType()\n    var buffer\n\n    if (imageType) {\n      var uri = canvas.toDataURL(imageType, quality)\n      buffer = uriToBuffer(uri)\n    }\n\n    return buffer\n  }\n\n  function toBufferAsync (cb) {\n    self.getImageType(function (err, imageType) {\n      if (err) {\n        cb(err)\n      } else if (!imageType) {\n        cb()\n      } else {\n        canvas.toDataURL(imageType, function (err, uri) {\n          if (err) {\n            cb(err)\n          } else {\n            cb(null, uriToBuffer(uri))\n          }\n        })\n      }\n    })\n  }\n\n  this.toBuffer = function (cb) {\n    if (cb) {\n      toBufferAsync(cb)\n    } else {\n      return toBufferSync()\n    }\n  }\n\n  // browsers do not need a callback, but tests do\n  this.getImageType = function (cb) {\n    // only run for the first time this constructor is called and\n    // cache result for the next calls\n    if (cb) {\n      if (!verifiedImageType || !isBrowser) {\n        verifyImageType(function (err, newVerifiedImageType) {\n          if (err) {\n            cb(err)\n          } else {\n            verifiedImageType = newVerifiedImageType\n            cb(null, verifiedImageType)\n          }\n        })\n      } else {\n        cb(null, verifiedImageType)\n      }\n    } else {\n      // on the browser side we do cache it for speed\n      if (!verifiedImageType || !isBrowser) {\n        verifiedImageType = verifyImageType()\n      }\n\n      return verifiedImageType\n    }\n  }\n}\n\n},{\"atob\":3,\"typedarray-to-buffer\":75}],10:[function(_dereq_,module,exports){\n// contains, add, remove, toggle\nvar indexof = _dereq_('indexof')\n\nmodule.exports = ClassList\n\nfunction ClassList(elem) {\n    var cl = elem.classList\n\n    if (cl) {\n        return cl\n    }\n\n    var classList = {\n        add: add\n        , remove: remove\n        , contains: contains\n        , toggle: toggle\n        , toString: $toString\n        , length: 0\n        , item: item\n    }\n\n    return classList\n\n    function add(token) {\n        var list = getTokens()\n        if (indexof(list, token) > -1) {\n            return\n        }\n        list.push(token)\n        setTokens(list)\n    }\n\n    function remove(token) {\n        var list = getTokens()\n            , index = indexof(list, token)\n\n        if (index === -1) {\n            return\n        }\n\n        list.splice(index, 1)\n        setTokens(list)\n    }\n\n    function contains(token) {\n        return indexof(getTokens(), token) > -1\n    }\n\n    function toggle(token) {\n        if (contains(token)) {\n            remove(token)\n            return false\n        } else {\n            add(token)\n            return true\n        }\n    }\n\n    function $toString() {\n        return elem.className\n    }\n\n    function item(index) {\n        var tokens = getTokens()\n        return tokens[index] || null\n    }\n\n    function getTokens() {\n        var className = elem.className\n\n        return filter(className.split(\" \"), isTruthy)\n    }\n\n    function setTokens(list) {\n        var length = list.length\n\n        elem.className = list.join(\" \")\n        classList.length = length\n\n        for (var i = 0; i < list.length; i++) {\n            classList[i] = list[i]\n        }\n\n        delete list[length]\n    }\n}\n\nfunction filter (arr, fn) {\n    var ret = []\n    for (var i = 0; i < arr.length; i++) {\n        if (fn(arr[i])) ret.push(arr[i])\n    }\n    return ret\n}\n\nfunction isTruthy(value) {\n    return !!value\n}\n\n},{\"indexof\":35}],11:[function(_dereq_,module,exports){\n/*\n * classList.js: Cross-browser full element.classList implementation.\n * 1.1.20150312\n *\n * By Eli Grey, http://eligrey.com\n * License: Dedicated to the public domain.\n *   See https://github.com/eligrey/classList.js/blob/master/LICENSE.md\n */\n\n/*global self, document, DOMException */\n\n/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */\n\nif (\"document\" in self) {\n\n// Full polyfill for browsers with no classList support\n// Including IE < Edge missing SVGElement.classList\nif (!(\"classList\" in document.createElement(\"_\")) \n\t|| document.createElementNS && !(\"classList\" in document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\"))) {\n\n(function (view) {\n\n\"use strict\";\n\nif (!('Element' in view)) return;\n\nvar\n\t  classListProp = \"classList\"\n\t, protoProp = \"prototype\"\n\t, elemCtrProto = view.Element[protoProp]\n\t, objCtr = Object\n\t, strTrim = String[protoProp].trim || function () {\n\t\treturn this.replace(/^\\s+|\\s+$/g, \"\");\n\t}\n\t, arrIndexOf = Array[protoProp].indexOf || function (item) {\n\t\tvar\n\t\t\t  i = 0\n\t\t\t, len = this.length\n\t\t;\n\t\tfor (; i < len; i++) {\n\t\t\tif (i in this && this[i] === item) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\t// Vendors: please allow content code to instantiate DOMExceptions\n\t, DOMEx = function (type, message) {\n\t\tthis.name = type;\n\t\tthis.code = DOMException[type];\n\t\tthis.message = message;\n\t}\n\t, checkTokenAndGetIndex = function (classList, token) {\n\t\tif (token === \"\") {\n\t\t\tthrow new DOMEx(\n\t\t\t\t  \"SYNTAX_ERR\"\n\t\t\t\t, \"An invalid or illegal string was specified\"\n\t\t\t);\n\t\t}\n\t\tif (/\\s/.test(token)) {\n\t\t\tthrow new DOMEx(\n\t\t\t\t  \"INVALID_CHARACTER_ERR\"\n\t\t\t\t, \"String contains an invalid character\"\n\t\t\t);\n\t\t}\n\t\treturn arrIndexOf.call(classList, token);\n\t}\n\t, ClassList = function (elem) {\n\t\tvar\n\t\t\t  trimmedClasses = strTrim.call(elem.getAttribute(\"class\") || \"\")\n\t\t\t, classes = trimmedClasses ? trimmedClasses.split(/\\s+/) : []\n\t\t\t, i = 0\n\t\t\t, len = classes.length\n\t\t;\n\t\tfor (; i < len; i++) {\n\t\t\tthis.push(classes[i]);\n\t\t}\n\t\tthis._updateClassName = function () {\n\t\t\telem.setAttribute(\"class\", this.toString());\n\t\t};\n\t}\n\t, classListProto = ClassList[protoProp] = []\n\t, classListGetter = function () {\n\t\treturn new ClassList(this);\n\t}\n;\n// Most DOMException implementations don't allow calling DOMException's toString()\n// on non-DOMExceptions. Error's toString() is sufficient here.\nDOMEx[protoProp] = Error[protoProp];\nclassListProto.item = function (i) {\n\treturn this[i] || null;\n};\nclassListProto.contains = function (token) {\n\ttoken += \"\";\n\treturn checkTokenAndGetIndex(this, token) !== -1;\n};\nclassListProto.add = function () {\n\tvar\n\t\t  tokens = arguments\n\t\t, i = 0\n\t\t, l = tokens.length\n\t\t, token\n\t\t, updated = false\n\t;\n\tdo {\n\t\ttoken = tokens[i] + \"\";\n\t\tif (checkTokenAndGetIndex(this, token) === -1) {\n\t\t\tthis.push(token);\n\t\t\tupdated = true;\n\t\t}\n\t}\n\twhile (++i < l);\n\n\tif (updated) {\n\t\tthis._updateClassName();\n\t}\n};\nclassListProto.remove = function () {\n\tvar\n\t\t  tokens = arguments\n\t\t, i = 0\n\t\t, l = tokens.length\n\t\t, token\n\t\t, updated = false\n\t\t, index\n\t;\n\tdo {\n\t\ttoken = tokens[i] + \"\";\n\t\tindex = checkTokenAndGetIndex(this, token);\n\t\twhile (index !== -1) {\n\t\t\tthis.splice(index, 1);\n\t\t\tupdated = true;\n\t\t\tindex = checkTokenAndGetIndex(this, token);\n\t\t}\n\t}\n\twhile (++i < l);\n\n\tif (updated) {\n\t\tthis._updateClassName();\n\t}\n};\nclassListProto.toggle = function (token, force) {\n\ttoken += \"\";\n\n\tvar\n\t\t  result = this.contains(token)\n\t\t, method = result ?\n\t\t\tforce !== true && \"remove\"\n\t\t:\n\t\t\tforce !== false && \"add\"\n\t;\n\n\tif (method) {\n\t\tthis[method](token);\n\t}\n\n\tif (force === true || force === false) {\n\t\treturn force;\n\t} else {\n\t\treturn !result;\n\t}\n};\nclassListProto.toString = function () {\n\treturn this.join(\" \");\n};\n\nif (objCtr.defineProperty) {\n\tvar classListPropDesc = {\n\t\t  get: classListGetter\n\t\t, enumerable: true\n\t\t, configurable: true\n\t};\n\ttry {\n\t\tobjCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n\t} catch (ex) { // IE 8 doesn't support enumerable:true\n\t\tif (ex.number === -0x7FF5EC54) {\n\t\t\tclassListPropDesc.enumerable = false;\n\t\t\tobjCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n\t\t}\n\t}\n} else if (objCtr[protoProp].__defineGetter__) {\n\telemCtrProto.__defineGetter__(classListProp, classListGetter);\n}\n\n}(self));\n\n} else {\n// There is full or partial native classList support, so just check if we need\n// to normalize the add/remove and toggle APIs.\n\n(function () {\n\t\"use strict\";\n\n\tvar testElement = document.createElement(\"_\");\n\n\ttestElement.classList.add(\"c1\", \"c2\");\n\n\t// Polyfill for IE 10/11 and Firefox <26, where classList.add and\n\t// classList.remove exist but support only one argument at a time.\n\tif (!testElement.classList.contains(\"c2\")) {\n\t\tvar createMethod = function(method) {\n\t\t\tvar original = DOMTokenList.prototype[method];\n\n\t\t\tDOMTokenList.prototype[method] = function(token) {\n\t\t\t\tvar i, len = arguments.length;\n\n\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\ttoken = arguments[i];\n\t\t\t\t\toriginal.call(this, token);\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t\tcreateMethod('add');\n\t\tcreateMethod('remove');\n\t}\n\n\ttestElement.classList.toggle(\"c3\", false);\n\n\t// Polyfill for IE 10 and Firefox <24, where classList.toggle does not\n\t// support the second argument.\n\tif (testElement.classList.contains(\"c3\")) {\n\t\tvar _toggle = DOMTokenList.prototype.toggle;\n\n\t\tDOMTokenList.prototype.toggle = function(token, force) {\n\t\t\tif (1 in arguments && !this.contains(token) === !force) {\n\t\t\t\treturn force;\n\t\t\t} else {\n\t\t\t\treturn _toggle.call(this, token);\n\t\t\t}\n\t\t};\n\n\t}\n\n\ttestElement = null;\n}());\n\n}\n\n}\n\n\n},{}],12:[function(_dereq_,module,exports){\n\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n\n},{}],13:[function(_dereq_,module,exports){\nvar DOCUMENT_POSITION_CONTAINED_BY = 16\n\nmodule.exports = contains\n\nfunction contains(container, elem) {\n    if (container.contains) {\n        return container.contains(elem)\n    }\n\n    var comparison = container.compareDocumentPosition(elem)\n\n    return comparison === 0 || comparison & DOCUMENT_POSITION_CONTAINED_BY\n}\n\n},{}],14:[function(_dereq_,module,exports){\n(function (Buffer){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n}).call(this,{\"isBuffer\":_dereq_(\"../../is-buffer/index.js\")})\n},{\"../../is-buffer/index.js\":40}],15:[function(_dereq_,module,exports){\n//     create-error.js 0.3.1\n//     (c) 2013 Tim Griesser\n//     This source may be freely distributed under the MIT license.\n(function(factory) {\n\n\"use strict\";\n\n// A simple utility for subclassing the \"Error\"\n// object in multiple environments, while maintaining\n// relevant stack traces, messages, and prototypes.\nfactory(function() {\n\nvar toString = Object.prototype.toString;\n\n// Creates an new error type with a \"name\",\n// and any additional properties that should be set\n// on the error instance.\nreturn function() {\n  var args = new Array(arguments.length);\n  for (var i = 0; i < args.length; ++i) {\n    args[i] = arguments[i];\n  }\n  var name       = getName(args);\n  var target     = getTarget(args);\n  var properties = getProps(args);\n  function ErrorCtor(message, obj) {\n    attachProps(this, properties);\n    attachProps(this, obj);\n    this.message = (message || this.message);\n    if (message instanceof Error) {\n      this.message = message.message;\n      this.stack = message.stack;\n    } else if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n  function Err() { this.constructor = ErrorCtor; }\n  Err.prototype = target['prototype'];\n  ErrorCtor.prototype = new Err();\n  ErrorCtor.prototype.name = ('' + name) || 'CustomError';\n  return ErrorCtor;\n};\n\n// Just a few helpers to clean up the function above\n// https://github.com/petkaantonov/bluebird/wiki/Optimization-killers\nfunction getName(args) {\n  if (args.length === 0) return '';\n  return isError(args[0]) ? (args[1] || '') : args[0];\n}\nfunction getTarget(args) {\n  if (args.length === 0) return Error;\n  return isError(args[0]) ? args[0] : Error;\n}\nfunction getProps(args) {\n  if (args.length === 0) return null;\n  return isError(args[0]) ? args[2] : args[1];\n}\nfunction inheritedKeys(obj) {\n  var ret = [];\n  for (var key in obj) {\n    ret.push(key);\n  }\n  return ret;\n}\n\n// Right now we're just assuming that a function in the first argument is an error.\nfunction isError(obj) {\n  return (typeof obj === \"function\");\n}\n\n// We don't need the full underscore check here, since it should either be\n// an object-literal, or nothing at all.\nfunction isObject(obj) {\n  return (obj && typeof obj === \"object\" && toString.call(obj) === \"[object Object]\");\n}\n\n// Used to attach attributes to the error object in the constructor.\nfunction attachProps(context, target) {\n  if (isObject(target)) {\n    var keys = inheritedKeys(target);\n    for (var i = 0, l = keys.length; i < l; ++i) {\n      context[keys[i]] = clone(target[keys[i]]);\n    }\n  }\n}\n\n// Don't need the full-out \"clone\" mechanism here, since if you're\n// trying to set things other than empty arrays/objects on your\n// sub-classed `Error` object, you're probably doing it wrong.\nfunction clone(target) {\n  if (target == null || typeof target !== \"object\") return target;\n  var cloned = target.constructor ? target.constructor() : Object.create(null);\n  for (var attr in target) {\n    if (target.hasOwnProperty(attr)) {\n      cloned[attr] = target[attr];\n    }\n  }\n  return cloned;\n}\n\n});\n\n// Boilerplate UMD definition block...\n})(function(createErrorLib) {\n  if (typeof define === \"function\" && define.amd) {\n    define(createErrorLib);\n  } else if (typeof exports === 'object') {\n    module.exports = createErrorLib();\n  } else {\n    var root = this;\n    var lastcreateError = root.createError;\n    var createError = root.createError = createErrorLib();\n    createError.noConflict = function() {\n      root.createError = lastcreateError;\n      return createError;\n    };\n  }\n});\n\n},{}],16:[function(_dereq_,module,exports){\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.deepmerge = factory());\n}(this, (function () { 'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tObject.keys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tObject.keys(source).forEach(function(key) {\n\t\tif (!options.isMergeableObject(source[key]) || !target[key]) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = deepmerge(target[key], source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nreturn deepmerge_1;\n\n})));\n\n},{}],17:[function(_dereq_,module,exports){\nmodule.exports = function () {\n    for (var i = 0; i < arguments.length; i++) {\n        if (arguments[i] !== undefined) return arguments[i];\n    }\n};\n\n},{}],18:[function(_dereq_,module,exports){\nvar util = _dereq_('util')\nvar global = _dereq_('global')\nvar EventEmitter = _dereq_('events')\n\nvar makeDespot = function () {\n  var Despot = function () {\n    if (global._singletonDespotInstance) {\n      return global._singletonDespotInstance\n    } else {\n      global._singletonDespotInstance = this\n      EventEmitter.call(this)\n    }\n  }\n\n  util.inherits(Despot, EventEmitter)\n\n  return new Despot()\n}\n\nmodule.exports = makeDespot()\n\n},{\"events\":24,\"global\":30,\"util\":80}],19:[function(_dereq_,module,exports){\n'use strict'\n\nvar document = _dereq_('global/document')\nvar Event = _dereq_('geval')\nvar Keys = _dereq_('./keys')\n\nmodule.exports = Visibility\n\nfunction Visibility () {\n  var keys = Keys(document)\n  if (!keys) return noopShim()\n\n  return {\n    visible: visible,\n    onChange: Event(listen)\n  }\n\n  function visible () {\n    return !document[keys.hidden]\n  }\n\n  function listen (broadcast) {\n    document.addEventListener(keys.event, function onVisibilityChange () {\n      broadcast(visible())\n    })\n  }\n}\n\nfunction noopShim () {\n  return {\n    visible: function () {\n      return true\n    },\n    onChange: noop\n  }\n}\n\nfunction noop () {}\n\n},{\"./keys\":20,\"geval\":28,\"global/document\":29}],20:[function(_dereq_,module,exports){\n'use strict'\n\nmodule.exports = keys\n\nfunction keys (document) {\n  var prefix = detectPrefix(document)\n  if (prefix == null) return\n  return {\n    hidden: lowercaseFirst(prefix + 'Hidden'),\n    event: prefix + 'visibilitychange'\n  }\n}\n\nfunction detectPrefix (document) {\n  if (document.hidden != null) return ''\n  if (document.mozHidden != null) return 'moz'\n  if (document.msHidden != null) return 'ms'\n  if (document.webkitHidden != null) return 'webkit'\n}\n\nfunction lowercaseFirst (string) {\n  return string.substring(0, 1).toLowerCase() + string.substring(1)\n}\n\n},{}],21:[function(_dereq_,module,exports){\n(function (process,Buffer){\nvar stream = _dereq_('readable-stream')\nvar eos = _dereq_('end-of-stream')\nvar inherits = _dereq_('inherits')\nvar shift = _dereq_('stream-shift')\n\nvar SIGNAL_FLUSH = (Buffer.from && Buffer.from !== Uint8Array.from)\n  ? Buffer.from([0])\n  : new Buffer([0])\n\nvar onuncork = function(self, fn) {\n  if (self._corked) self.once('uncork', fn)\n  else fn()\n}\n\nvar destroyer = function(self, end) {\n  return function(err) {\n    if (err) self._destroyInterval(err)\n    else if (end && !self._ended) self.end()\n  }\n}\n\nvar end = function(ws, fn) {\n  if (!ws) return fn()\n  if (ws._writableState && ws._writableState.finished) return fn()\n  if (ws._writableState) return ws.end(fn)\n  ws.end()\n  fn()\n}\n\nvar toStreams2 = function(rs) {\n  return new (stream.Readable)({objectMode:true, highWaterMark:16}).wrap(rs)\n}\n\nvar Duplexify = function(writable, readable, opts) {\n  if (!(this instanceof Duplexify)) return new Duplexify(writable, readable, opts)\n  stream.Duplex.call(this, opts)\n\n  this._writable = null\n  this._readable = null\n  this._readable2 = null\n\n  this._forwardDestroy = !opts || opts.destroy !== false\n  this._forwardEnd = !opts || opts.end !== false\n  this._corked = 1 // start corked\n  this._ondrain = null\n  this._drained = false\n  this._forwarding = false\n  this._unwrite = null\n  this._unread = null\n  this._ended = false\n  this._error = null\n  this._preferError = false\n\n  this.destroyed = false\n\n  if (writable) this.setWritable(writable)\n  if (readable) this.setReadable(readable)\n}\n\ninherits(Duplexify, stream.Duplex)\n\nDuplexify.obj = function(writable, readable, opts) {\n  if (!opts) opts = {}\n  opts.objectMode = true\n  opts.highWaterMark = 16\n  return new Duplexify(writable, readable, opts)\n}\n\nDuplexify.prototype.cork = function() {\n  if (++this._corked === 1) this.emit('cork')\n}\n\nDuplexify.prototype.uncork = function() {\n  if (this._corked && --this._corked === 0) this.emit('uncork')\n}\n\nDuplexify.prototype.setWritable = function(writable) {\n  if (this._unwrite) this._unwrite()\n\n  if (this.destroyed) {\n    if (writable && writable.destroy) writable.destroy()\n    return\n  }\n\n  if (writable === null || writable === false) {\n    this.end()\n    return\n  }\n\n  var self = this\n  var unend = eos(writable, {writable:true, readable:false}, destroyer(this, this._forwardEnd))\n\n  var ondrain = function() {\n    var ondrain = self._ondrain\n    self._ondrain = null\n    if (ondrain) ondrain()\n  }\n\n  var clear = function() {\n    self._writable.removeListener('drain', ondrain)\n    unend()\n  }\n\n  if (this._unwrite) process.nextTick(ondrain) // force a drain on stream reset to avoid livelocks\n\n  this._writable = writable\n  this._writable.on('drain', ondrain)\n  this._unwrite = clear\n\n  this.uncork() // always uncork setWritable\n}\n\nDuplexify.prototype.setReadable = function(readable) {\n  if (this._unread) this._unread()\n\n  if (this.destroyed) {\n    if (readable && readable.destroy) readable.destroy()\n    return\n  }\n\n  if (readable === null || readable === false) {\n    this.push(null)\n    this.resume()\n    return\n  }\n\n  var self = this\n  var unend = eos(readable, {writable:false, readable:true}, destroyer(this))\n\n  var onreadable = function() {\n    self._forward()\n  }\n\n  var onend = function() {\n    self.push(null)\n  }\n\n  var clear = function() {\n    self._readable2.removeListener('readable', onreadable)\n    self._readable2.removeListener('end', onend)\n    unend()\n  }\n\n  this._drained = true\n  this._readable = readable\n  this._readable2 = readable._readableState ? readable : toStreams2(readable)\n  this._readable2.on('readable', onreadable)\n  this._readable2.on('end', onend)\n  this._unread = clear\n\n  this._forward()\n}\n\nDuplexify.prototype._read = function() {\n  this._drained = true\n  this._forward()\n}\n\nDuplexify.prototype._forward = function() {\n  if (this._forwarding || !this._readable2 || !this._drained) return\n  this._forwarding = true\n\n  var data\n\n  while (this._drained && (data = shift(this._readable2)) !== null) {\n    if (this.destroyed) continue\n    this._drained = this.push(data)\n  }\n\n  this._forwarding = false\n}\n\nDuplexify.prototype.destroy = function(err) {\n  if (this._preferError && !this._error && err) this._error = err\n\n  if (this.destroyed) return\n  this.destroyed = true\n\n  var self = this\n  process.nextTick(function() {\n    self._destroy(self._preferError ? self._error : err)\n  })\n}\n\nDuplexify.prototype._destroyInterval = function(err) {\n  if (this.destroyed) return\n  if (err.message !== 'premature close') return this.destroy(err)\n  this._preferError = true\n  this.destroy(null)\n}\n\nDuplexify.prototype._destroy = function(err) {\n  if (err) {\n    var ondrain = this._ondrain\n    this._ondrain = null\n    if (ondrain) ondrain(err)\n    else this.emit('error', err)\n  }\n\n  if (this._forwardDestroy) {\n    if (this._readable && this._readable.destroy) this._readable.destroy()\n    if (this._writable && this._writable.destroy) this._writable.destroy()\n  }\n\n  this.emit('close')\n}\n\nDuplexify.prototype._write = function(data, enc, cb) {\n  if (this.destroyed) return cb()\n  if (this._corked) return onuncork(this, this._write.bind(this, data, enc, cb))\n  if (data === SIGNAL_FLUSH) return this._finish(cb)\n  if (!this._writable) return cb()\n\n  if (this._writable.write(data) === false) this._ondrain = cb\n  else cb()\n}\n\n\nDuplexify.prototype._finish = function(cb) {\n  var self = this\n  this.emit('preend')\n  onuncork(this, function() {\n    end(self._forwardEnd && self._writable, function() {\n      // haxx to not emit prefinish twice\n      if (self._writableState.prefinished === false) self._writableState.prefinished = true\n      self.emit('prefinish')\n      onuncork(self, cb)\n    })\n  })\n}\n\nDuplexify.prototype.end = function(data, enc, cb) {\n  if (typeof data === 'function') return this.end(null, null, data)\n  if (typeof enc === 'function') return this.end(data, null, enc)\n  this._ended = true\n  if (data) this.write(data)\n  if (!this._writableState.ending) this.write(SIGNAL_FLUSH)\n  return stream.Writable.prototype.end.call(this, cb)\n}\n\nmodule.exports = Duplexify\n\n}).call(this,_dereq_('_process'),_dereq_(\"buffer\").Buffer)\n},{\"_process\":50,\"buffer\":8,\"end-of-stream\":23,\"inherits\":36,\"readable-stream\":62,\"stream-shift\":68}],22:[function(_dereq_,module,exports){\n// element-closest | CC0-1.0 | github.com/jonathantneal/closest\n\n(function (ElementProto) {\n\tif (typeof ElementProto.matches !== 'function') {\n\t\tElementProto.matches = ElementProto.msMatchesSelector || ElementProto.mozMatchesSelector || ElementProto.webkitMatchesSelector || function matches(selector) {\n\t\t\tvar element = this;\n\t\t\tvar elements = (element.document || element.ownerDocument).querySelectorAll(selector);\n\t\t\tvar index = 0;\n\n\t\t\twhile (elements[index] && elements[index] !== element) {\n\t\t\t\t++index;\n\t\t\t}\n\n\t\t\treturn Boolean(elements[index]);\n\t\t};\n\t}\n\n\tif (typeof ElementProto.closest !== 'function') {\n\t\tElementProto.closest = function closest(selector) {\n\t\t\tvar element = this;\n\n\t\t\twhile (element && element.nodeType === 1) {\n\t\t\t\tif (element.matches(selector)) {\n\t\t\t\t\treturn element;\n\t\t\t\t}\n\n\t\t\t\telement = element.parentNode;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\t}\n})(window.Element.prototype);\n\n},{}],23:[function(_dereq_,module,exports){\nvar once = _dereq_('once');\n\nvar noop = function() {};\n\nvar isRequest = function(stream) {\n\treturn stream.setHeader && typeof stream.abort === 'function';\n};\n\nvar isChildProcess = function(stream) {\n\treturn stream.stdio && Array.isArray(stream.stdio) && stream.stdio.length === 3\n};\n\nvar eos = function(stream, opts, callback) {\n\tif (typeof opts === 'function') return eos(stream, null, opts);\n\tif (!opts) opts = {};\n\n\tcallback = once(callback || noop);\n\n\tvar ws = stream._writableState;\n\tvar rs = stream._readableState;\n\tvar readable = opts.readable || (opts.readable !== false && stream.readable);\n\tvar writable = opts.writable || (opts.writable !== false && stream.writable);\n\n\tvar onlegacyfinish = function() {\n\t\tif (!stream.writable) onfinish();\n\t};\n\n\tvar onfinish = function() {\n\t\twritable = false;\n\t\tif (!readable) callback.call(stream);\n\t};\n\n\tvar onend = function() {\n\t\treadable = false;\n\t\tif (!writable) callback.call(stream);\n\t};\n\n\tvar onexit = function(exitCode) {\n\t\tcallback.call(stream, exitCode ? new Error('exited with error code: ' + exitCode) : null);\n\t};\n\n\tvar onerror = function(err) {\n\t\tcallback.call(stream, err);\n\t};\n\n\tvar onclose = function() {\n\t\tif (readable && !(rs && rs.ended)) return callback.call(stream, new Error('premature close'));\n\t\tif (writable && !(ws && ws.ended)) return callback.call(stream, new Error('premature close'));\n\t};\n\n\tvar onrequest = function() {\n\t\tstream.req.on('finish', onfinish);\n\t};\n\n\tif (isRequest(stream)) {\n\t\tstream.on('complete', onfinish);\n\t\tstream.on('abort', onclose);\n\t\tif (stream.req) onrequest();\n\t\telse stream.on('request', onrequest);\n\t} else if (writable && !ws) { // legacy streams\n\t\tstream.on('end', onlegacyfinish);\n\t\tstream.on('close', onlegacyfinish);\n\t}\n\n\tif (isChildProcess(stream)) stream.on('exit', onexit);\n\n\tstream.on('end', onend);\n\tstream.on('finish', onfinish);\n\tif (opts.error !== false) stream.on('error', onerror);\n\tstream.on('close', onclose);\n\n\treturn function() {\n\t\tstream.removeListener('complete', onfinish);\n\t\tstream.removeListener('abort', onclose);\n\t\tstream.removeListener('request', onrequest);\n\t\tif (stream.req) stream.req.removeListener('finish', onfinish);\n\t\tstream.removeListener('end', onlegacyfinish);\n\t\tstream.removeListener('close', onlegacyfinish);\n\t\tstream.removeListener('finish', onfinish);\n\t\tstream.removeListener('exit', onexit);\n\t\tstream.removeListener('end', onend);\n\t\tstream.removeListener('error', onerror);\n\t\tstream.removeListener('close', onclose);\n\t};\n};\n\nmodule.exports = eos;\n\n},{\"once\":48}],24:[function(_dereq_,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar objectCreate = Object.create || objectCreatePolyfill\nvar objectKeys = Object.keys || objectKeysPolyfill\nvar bind = Function.prototype.bind || functionBindPolyfill\n\nfunction EventEmitter() {\n  if (!this._events || !Object.prototype.hasOwnProperty.call(this, '_events')) {\n    this._events = objectCreate(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nvar hasDefineProperty;\ntry {\n  var o = {};\n  if (Object.defineProperty) Object.defineProperty(o, 'x', { value: 0 });\n  hasDefineProperty = o.x === 0;\n} catch (err) { hasDefineProperty = false }\nif (hasDefineProperty) {\n  Object.defineProperty(EventEmitter, 'defaultMaxListeners', {\n    enumerable: true,\n    get: function() {\n      return defaultMaxListeners;\n    },\n    set: function(arg) {\n      // check whether the input is a positive number (whose value is zero or\n      // greater and not a NaN).\n      if (typeof arg !== 'number' || arg < 0 || arg !== arg)\n        throw new TypeError('\"defaultMaxListeners\" must be a positive number');\n      defaultMaxListeners = arg;\n    }\n  });\n} else {\n  EventEmitter.defaultMaxListeners = defaultMaxListeners;\n}\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || isNaN(n))\n    throw new TypeError('\"n\" argument must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\n// These standalone emit* functions are used to optimize calling of event\n// handlers for fast cases because emit() itself often has a variable number of\n// arguments and can be deoptimized because of that. These functions always have\n// the same number of arguments and thus do not get deoptimized, so the code\n// inside them can execute faster.\nfunction emitNone(handler, isFn, self) {\n  if (isFn)\n    handler.call(self);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self);\n  }\n}\nfunction emitOne(handler, isFn, self, arg1) {\n  if (isFn)\n    handler.call(self, arg1);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1);\n  }\n}\nfunction emitTwo(handler, isFn, self, arg1, arg2) {\n  if (isFn)\n    handler.call(self, arg1, arg2);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2);\n  }\n}\nfunction emitThree(handler, isFn, self, arg1, arg2, arg3) {\n  if (isFn)\n    handler.call(self, arg1, arg2, arg3);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2, arg3);\n  }\n}\n\nfunction emitMany(handler, isFn, self, args) {\n  if (isFn)\n    handler.apply(self, args);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].apply(self, args);\n  }\n}\n\nEventEmitter.prototype.emit = function emit(type) {\n  var er, handler, len, args, i, events;\n  var doError = (type === 'error');\n\n  events = this._events;\n  if (events)\n    doError = (doError && events.error == null);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    if (arguments.length > 1)\n      er = arguments[1];\n    if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      // At least give some kind of context to the user\n      var err = new Error('Unhandled \"error\" event. (' + er + ')');\n      err.context = er;\n      throw err;\n    }\n    return false;\n  }\n\n  handler = events[type];\n\n  if (!handler)\n    return false;\n\n  var isFn = typeof handler === 'function';\n  len = arguments.length;\n  switch (len) {\n      // fast cases\n    case 1:\n      emitNone(handler, isFn, this);\n      break;\n    case 2:\n      emitOne(handler, isFn, this, arguments[1]);\n      break;\n    case 3:\n      emitTwo(handler, isFn, this, arguments[1], arguments[2]);\n      break;\n    case 4:\n      emitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);\n      break;\n      // slower\n    default:\n      args = new Array(len - 1);\n      for (i = 1; i < len; i++)\n        args[i - 1] = arguments[i];\n      emitMany(handler, isFn, this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n\n  events = target._events;\n  if (!events) {\n    events = target._events = objectCreate(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener) {\n      target.emit('newListener', type,\n          listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (!existing) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n          prepend ? [listener, existing] : [existing, listener];\n    } else {\n      // If we've already got an array, just append.\n      if (prepend) {\n        existing.unshift(listener);\n      } else {\n        existing.push(listener);\n      }\n    }\n\n    // Check for listener leak\n    if (!existing.warned) {\n      m = $getMaxListeners(target);\n      if (m && m > 0 && existing.length > m) {\n        existing.warned = true;\n        var w = new Error('Possible EventEmitter memory leak detected. ' +\n            existing.length + ' \"' + String(type) + '\" listeners ' +\n            'added. Use emitter.setMaxListeners() to ' +\n            'increase limit.');\n        w.name = 'MaxListenersExceededWarning';\n        w.emitter = target;\n        w.type = type;\n        w.count = existing.length;\n        if (typeof console === 'object' && console.warn) {\n          console.warn('%s: %s', w.name, w.message);\n        }\n      }\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    switch (arguments.length) {\n      case 0:\n        return this.listener.call(this.target);\n      case 1:\n        return this.listener.call(this.target, arguments[0]);\n      case 2:\n        return this.listener.call(this.target, arguments[0], arguments[1]);\n      case 3:\n        return this.listener.call(this.target, arguments[0], arguments[1],\n            arguments[2]);\n      default:\n        var args = new Array(arguments.length);\n        for (var i = 0; i < args.length; ++i)\n          args[i] = arguments[i];\n        this.listener.apply(this.target, args);\n    }\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = bind.call(onceWrapper, state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      list = events[type];\n      if (!list)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = objectCreate(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else\n          spliceOne(list, position);\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (!events.removeListener) {\n        if (arguments.length === 0) {\n          this._events = objectCreate(null);\n          this._eventsCount = 0;\n        } else if (events[type]) {\n          if (--this._eventsCount === 0)\n            this._events = objectCreate(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = objectKeys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = objectCreate(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  var evlistener;\n  var ret;\n  var events = this._events;\n\n  if (!events)\n    ret = [];\n  else {\n    evlistener = events[type];\n    if (!evlistener)\n      ret = [];\n    else if (typeof evlistener === 'function')\n      ret = [evlistener.listener || evlistener];\n    else\n      ret = unwrapListeners(evlistener);\n  }\n\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n};\n\n// About 1.5x faster than the two-arg version of Array#splice().\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1)\n    list[i] = list[k];\n  list.pop();\n}\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction objectCreatePolyfill(proto) {\n  var F = function() {};\n  F.prototype = proto;\n  return new F;\n}\nfunction objectKeysPolyfill(obj) {\n  var keys = [];\n  for (var k in obj) if (Object.prototype.hasOwnProperty.call(obj, k)) {\n    keys.push(k);\n  }\n  return k;\n}\nfunction functionBindPolyfill(context) {\n  var fn = this;\n  return function () {\n    return fn.apply(context, arguments);\n  };\n}\n\n},{}],25:[function(_dereq_,module,exports){\n(function (global){\n\"use strict\";\n\n/**\r\n * filesize\r\n *\r\n * @copyright 2018 Jason Mulligan <jason.mulligan@avoidwork.com>\r\n * @license BSD-3-Clause\r\n * @version 3.6.1\r\n */\n(function (global) {\n\tvar b = /^(b|B)$/,\n\t    symbol = {\n\t\tiec: {\n\t\t\tbits: [\"b\", \"Kib\", \"Mib\", \"Gib\", \"Tib\", \"Pib\", \"Eib\", \"Zib\", \"Yib\"],\n\t\t\tbytes: [\"B\", \"KiB\", \"MiB\", \"GiB\", \"TiB\", \"PiB\", \"EiB\", \"ZiB\", \"YiB\"]\n\t\t},\n\t\tjedec: {\n\t\t\tbits: [\"b\", \"Kb\", \"Mb\", \"Gb\", \"Tb\", \"Pb\", \"Eb\", \"Zb\", \"Yb\"],\n\t\t\tbytes: [\"B\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"]\n\t\t}\n\t},\n\t    fullform = {\n\t\tiec: [\"\", \"kibi\", \"mebi\", \"gibi\", \"tebi\", \"pebi\", \"exbi\", \"zebi\", \"yobi\"],\n\t\tjedec: [\"\", \"kilo\", \"mega\", \"giga\", \"tera\", \"peta\", \"exa\", \"zetta\", \"yotta\"]\n\t};\n\n\t/**\r\n  * filesize\r\n  *\r\n  * @method filesize\r\n  * @param  {Mixed}   arg        String, Int or Float to transform\r\n  * @param  {Object}  descriptor [Optional] Flags\r\n  * @return {String}             Readable file size String\r\n  */\n\tfunction filesize(arg) {\n\t\tvar descriptor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tvar result = [],\n\t\t    val = 0,\n\t\t    e = void 0,\n\t\t    base = void 0,\n\t\t    bits = void 0,\n\t\t    ceil = void 0,\n\t\t    full = void 0,\n\t\t    fullforms = void 0,\n\t\t    neg = void 0,\n\t\t    num = void 0,\n\t\t    output = void 0,\n\t\t    round = void 0,\n\t\t    unix = void 0,\n\t\t    separator = void 0,\n\t\t    spacer = void 0,\n\t\t    standard = void 0,\n\t\t    symbols = void 0;\n\n\t\tif (isNaN(arg)) {\n\t\t\tthrow new Error(\"Invalid arguments\");\n\t\t}\n\n\t\tbits = descriptor.bits === true;\n\t\tunix = descriptor.unix === true;\n\t\tbase = descriptor.base || 2;\n\t\tround = descriptor.round !== void 0 ? descriptor.round : unix ? 1 : 2;\n\t\tseparator = descriptor.separator !== void 0 ? descriptor.separator || \"\" : \"\";\n\t\tspacer = descriptor.spacer !== void 0 ? descriptor.spacer : unix ? \"\" : \" \";\n\t\tsymbols = descriptor.symbols || descriptor.suffixes || {};\n\t\tstandard = base === 2 ? descriptor.standard || \"jedec\" : \"jedec\";\n\t\toutput = descriptor.output || \"string\";\n\t\tfull = descriptor.fullform === true;\n\t\tfullforms = descriptor.fullforms instanceof Array ? descriptor.fullforms : [];\n\t\te = descriptor.exponent !== void 0 ? descriptor.exponent : -1;\n\t\tnum = Number(arg);\n\t\tneg = num < 0;\n\t\tceil = base > 2 ? 1000 : 1024;\n\n\t\t// Flipping a negative number to determine the size\n\t\tif (neg) {\n\t\t\tnum = -num;\n\t\t}\n\n\t\t// Determining the exponent\n\t\tif (e === -1 || isNaN(e)) {\n\t\t\te = Math.floor(Math.log(num) / Math.log(ceil));\n\n\t\t\tif (e < 0) {\n\t\t\t\te = 0;\n\t\t\t}\n\t\t}\n\n\t\t// Exceeding supported length, time to reduce & multiply\n\t\tif (e > 8) {\n\t\t\te = 8;\n\t\t}\n\n\t\t// Zero is now a special case because bytes divide by 1\n\t\tif (num === 0) {\n\t\t\tresult[0] = 0;\n\t\t\tresult[1] = unix ? \"\" : symbol[standard][bits ? \"bits\" : \"bytes\"][e];\n\t\t} else {\n\t\t\tval = num / (base === 2 ? Math.pow(2, e * 10) : Math.pow(1000, e));\n\n\t\t\tif (bits) {\n\t\t\t\tval = val * 8;\n\n\t\t\t\tif (val >= ceil && e < 8) {\n\t\t\t\t\tval = val / ceil;\n\t\t\t\t\te++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult[0] = Number(val.toFixed(e > 0 ? round : 0));\n\t\t\tresult[1] = base === 10 && e === 1 ? bits ? \"kb\" : \"kB\" : symbol[standard][bits ? \"bits\" : \"bytes\"][e];\n\n\t\t\tif (unix) {\n\t\t\t\tresult[1] = standard === \"jedec\" ? result[1].charAt(0) : e > 0 ? result[1].replace(/B$/, \"\") : result[1];\n\n\t\t\t\tif (b.test(result[1])) {\n\t\t\t\t\tresult[0] = Math.floor(result[0]);\n\t\t\t\t\tresult[1] = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Decorating a 'diff'\n\t\tif (neg) {\n\t\t\tresult[0] = -result[0];\n\t\t}\n\n\t\t// Applying custom symbol\n\t\tresult[1] = symbols[result[1]] || result[1];\n\n\t\t// Returning Array, Object, or String (default)\n\t\tif (output === \"array\") {\n\t\t\treturn result;\n\t\t}\n\n\t\tif (output === \"exponent\") {\n\t\t\treturn e;\n\t\t}\n\n\t\tif (output === \"object\") {\n\t\t\treturn { value: result[0], suffix: result[1], symbol: result[1] };\n\t\t}\n\n\t\tif (full) {\n\t\t\tresult[1] = fullforms[e] ? fullforms[e] : fullform[standard][e] + (bits ? \"bit\" : \"byte\") + (result[0] === 1 ? \"\" : \"s\");\n\t\t}\n\n\t\tif (separator.length > 0) {\n\t\t\tresult[0] = result[0].toString().replace(\".\", separator);\n\t\t}\n\n\t\treturn result.join(spacer);\n\t}\n\n\t// Partial application for functional programming\n\tfilesize.partial = function (opt) {\n\t\treturn function (arg) {\n\t\t\treturn filesize(arg, opt);\n\t\t};\n\t};\n\n\t// CommonJS, AMD, script tag\n\tif (typeof exports !== \"undefined\") {\n\t\tmodule.exports = filesize;\n\t} else if (typeof define === \"function\" && define.amd) {\n\t\tdefine(function () {\n\t\t\treturn filesize;\n\t\t});\n\t} else {\n\t\tglobal.filesize = filesize;\n\t}\n})(typeof window !== \"undefined\" ? window : global);\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],26:[function(_dereq_,module,exports){\n'use strict';\n\nexports.__esModule = true;\nexports.default = getFormData;\nexports.getFieldData = getFieldData;\nvar NODE_LIST_CLASSES = {\n  '[object HTMLCollection]': true,\n  '[object NodeList]': true,\n  '[object RadioNodeList]': true\n\n  // .type values for elements which can appear in .elements and should be ignored\n};var IGNORED_ELEMENT_TYPES = {\n  'button': true,\n  'fieldset': true,\n  'reset': true,\n  'submit': true\n};\n\nvar CHECKED_INPUT_TYPES = {\n  'checkbox': true,\n  'radio': true\n};\n\nvar TRIM_RE = /^\\s+|\\s+$/g;\n\nvar slice = Array.prototype.slice;\nvar toString = Object.prototype.toString;\n\n/**\n * @param {HTMLFormElement} form\n * @param {Object} options\n * @return {Object.<string,(string|Array.<string>)>} an object containing\n *   submittable value(s) held in the form's .elements collection, with\n *   properties named as per element names or ids.\n */\n\nfunction getFormData(form) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { trim: false };\n\n  if (!form) {\n    throw new Error('A form is required by getFormData, was given form=' + form);\n  }\n\n  var data = {};\n  var elementName = void 0;\n  var elementNames = [];\n  var elementNameLookup = {};\n\n  // Get unique submittable element names for the form\n  for (var i = 0, l = form.elements.length; i < l; i++) {\n    var element = form.elements[i];\n    if (IGNORED_ELEMENT_TYPES[element.type] || element.disabled) {\n      continue;\n    }\n    elementName = element.name || element.id;\n    if (elementName && !elementNameLookup[elementName]) {\n      elementNames.push(elementName);\n      elementNameLookup[elementName] = true;\n    }\n  }\n\n  // Extract element data name-by-name for consistent handling of special cases\n  // around elements which contain multiple inputs.\n  for (var _i = 0, _l = elementNames.length; _i < _l; _i++) {\n    elementName = elementNames[_i];\n    var value = getFieldData(form, elementName, options);\n    if (value != null) {\n      data[elementName] = value;\n    }\n  }\n\n  return data;\n}\n\n/**\n * @param {HTMLFormElement} form\n * @param {string} fieldName\n * @param {Object} options\n * @return {(string|Array.<string>)} submittable value(s) in the form for a\n *   named element from its .elements collection, or null if there was no\n *   element with that name or the element had no submittable value(s).\n */\nfunction getFieldData(form, fieldName) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : { trim: false };\n\n  if (!form) {\n    throw new Error('A form is required by getFieldData, was given form=' + form);\n  }\n  if (!fieldName && toString.call(fieldName) !== '[object String]') {\n    throw new Error('A field name is required by getFieldData, was given fieldName=' + fieldName);\n  }\n\n  var element = form.elements[fieldName];\n  if (!element || element.disabled) {\n    return null;\n  }\n\n  if (!NODE_LIST_CLASSES[toString.call(element)]) {\n    return getFormElementValue(element, options.trim);\n  }\n\n  // Deal with multiple form controls which have the same name\n  var data = [];\n  var allRadios = true;\n  for (var i = 0, l = element.length; i < l; i++) {\n    if (element[i].disabled) {\n      continue;\n    }\n    if (allRadios && element[i].type !== 'radio') {\n      allRadios = false;\n    }\n    var value = getFormElementValue(element[i], options.trim);\n    if (value != null) {\n      data = data.concat(value);\n    }\n  }\n\n  // Special case for an element with multiple same-named inputs which were all\n  // radio buttons: if there was a selected value, only return the value.\n  if (allRadios && data.length === 1) {\n    return data[0];\n  }\n\n  return data.length > 0 ? data : null;\n}\n\n/**\n * @param {HTMLElement} element a form element.\n * @param {booleam} trim should values for text entry inputs be trimmed?\n * @return {(string|Array.<string>|File|Array.<File>)} the element's submittable\n *   value(s), or null if it had none.\n */\nfunction getFormElementValue(element, trim) {\n  var value = null;\n  var type = element.type;\n\n\n  if (type === 'select-one') {\n    if (element.options.length) {\n      value = element.options[element.selectedIndex].value;\n    }\n    return value;\n  }\n\n  if (type === 'select-multiple') {\n    value = [];\n    for (var i = 0, l = element.options.length; i < l; i++) {\n      if (element.options[i].selected) {\n        value.push(element.options[i].value);\n      }\n    }\n    if (value.length === 0) {\n      value = null;\n    }\n    return value;\n  }\n\n  // If a file input doesn't have a files attribute, fall through to using its\n  // value attribute.\n  if (type === 'file' && 'files' in element) {\n    if (element.multiple) {\n      value = slice.call(element.files);\n      if (value.length === 0) {\n        value = null;\n      }\n    } else {\n      // Should be null if not present, according to the spec\n      value = element.files[0];\n    }\n    return value;\n  }\n\n  if (!CHECKED_INPUT_TYPES[type]) {\n    value = trim ? element.value.replace(TRIM_RE, '') : element.value;\n  } else if (element.checked) {\n    value = element.value;\n  }\n\n  return value;\n}\n\n// For UMD build access to getFieldData\ngetFormData.getFieldData = getFieldData;\n},{}],27:[function(_dereq_,module,exports){\nmodule.exports = Event\n\nfunction Event() {\n    var listeners = []\n\n    return { broadcast: broadcast, listen: event }\n\n    function broadcast(value) {\n        for (var i = 0; i < listeners.length; i++) {\n            listeners[i](value)\n        }\n    }\n\n    function event(listener) {\n        listeners.push(listener)\n\n        return removeListener\n\n        function removeListener() {\n            var index = listeners.indexOf(listener)\n            if (index !== -1) {\n                listeners.splice(index, 1)\n            }\n        }\n    }\n}\n\n},{}],28:[function(_dereq_,module,exports){\nvar Event = _dereq_('./event.js')\n\nmodule.exports = Source\n\nfunction Source(broadcaster) {\n    var tuple = Event()\n\n    broadcaster(tuple.broadcast)\n\n    return tuple.listen\n}\n\n},{\"./event.js\":27}],29:[function(_dereq_,module,exports){\n(function (global){\nvar topLevel = typeof global !== 'undefined' ? global :\n    typeof window !== 'undefined' ? window : {}\nvar minDoc = _dereq_('min-document');\n\nvar doccy;\n\nif (typeof document !== 'undefined') {\n    doccy = document;\n} else {\n    doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n    if (!doccy) {\n        doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n    }\n}\n\nmodule.exports = doccy;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"min-document\":6}],30:[function(_dereq_,module,exports){\n(function (global){\nvar win;\n\nif (typeof window !== \"undefined\") {\n    win = window;\n} else if (typeof global !== \"undefined\") {\n    win = global;\n} else if (typeof self !== \"undefined\"){\n    win = self;\n} else {\n    win = {};\n}\n\nmodule.exports = win;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],31:[function(_dereq_,module,exports){\nmodule.exports = shim\n\nfunction shim (element, value) {\n    if (value === undefined) {\n        return element.style.display === 'none'\n    }\n\n    element.style.display = value ? 'none' : ''\n}\n\n},{}],32:[function(_dereq_,module,exports){\n// HumanizeDuration.js - http://git.io/j0HgmQ\n\n;(function () {\n  var languages = {\n    ar: {\n      y: function (c) { return c === 1 ? 'سنة' : 'سنوات' },\n      mo: function (c) { return c === 1 ? 'شهر' : 'أشهر' },\n      w: function (c) { return c === 1 ? 'أسبوع' : 'أسابيع' },\n      d: function (c) { return c === 1 ? 'يوم' : 'أيام' },\n      h: function (c) { return c === 1 ? 'ساعة' : 'ساعات' },\n      m: function (c) { return c === 1 ? 'دقيقة' : 'دقائق' },\n      s: function (c) { return c === 1 ? 'ثانية' : 'ثواني' },\n      ms: function (c) { return c === 1 ? 'جزء من الثانية' : 'أجزاء من الثانية' },\n      decimal: ','\n    },\n    bg: {\n      y: function (c) { return ['години', 'година', 'години'][getSlavicForm(c)] },\n      mo: function (c) { return ['месеца', 'месец', 'месеца'][getSlavicForm(c)] },\n      w: function (c) { return ['седмици', 'седмица', 'седмици'][getSlavicForm(c)] },\n      d: function (c) { return ['дни', 'ден', 'дни'][getSlavicForm(c)] },\n      h: function (c) { return ['часа', 'час', 'часа'][getSlavicForm(c)] },\n      m: function (c) { return ['минути', 'минута', 'минути'][getSlavicForm(c)] },\n      s: function (c) { return ['секунди', 'секунда', 'секунди'][getSlavicForm(c)] },\n      ms: function (c) { return ['милисекунди', 'милисекунда', 'милисекунди'][getSlavicForm(c)] },\n      decimal: ','\n    },\n    ca: {\n      y: function (c) { return 'any' + (c === 1 ? '' : 's') },\n      mo: function (c) { return 'mes' + (c === 1 ? '' : 'os') },\n      w: function (c) { return 'setman' + (c === 1 ? 'a' : 'es') },\n      d: function (c) { return 'di' + (c === 1 ? 'a' : 'es') },\n      h: function (c) { return 'hor' + (c === 1 ? 'a' : 'es') },\n      m: function (c) { return 'minut' + (c === 1 ? '' : 's') },\n      s: function (c) { return 'segon' + (c === 1 ? '' : 's') },\n      ms: function (c) { return 'milisegon' + (c === 1 ? '' : 's') },\n      decimal: ','\n    },\n    cs: {\n      y: function (c) { return ['rok', 'roku', 'roky', 'let'][getCzechOrSlovakForm(c)] },\n      mo: function (c) { return ['měsíc', 'měsíce', 'měsíce', 'měsíců'][getCzechOrSlovakForm(c)] },\n      w: function (c) { return ['týden', 'týdne', 'týdny', 'týdnů'][getCzechOrSlovakForm(c)] },\n      d: function (c) { return ['den', 'dne', 'dny', 'dní'][getCzechOrSlovakForm(c)] },\n      h: function (c) { return ['hodina', 'hodiny', 'hodiny', 'hodin'][getCzechOrSlovakForm(c)] },\n      m: function (c) { return ['minuta', 'minuty', 'minuty', 'minut'][getCzechOrSlovakForm(c)] },\n      s: function (c) { return ['sekunda', 'sekundy', 'sekundy', 'sekund'][getCzechOrSlovakForm(c)] },\n      ms: function (c) { return ['milisekunda', 'milisekundy', 'milisekundy', 'milisekund'][getCzechOrSlovakForm(c)] },\n      decimal: ','\n    },\n    da: {\n      y: 'år',\n      mo: function (c) { return 'måned' + (c === 1 ? '' : 'er') },\n      w: function (c) { return 'uge' + (c === 1 ? '' : 'r') },\n      d: function (c) { return 'dag' + (c === 1 ? '' : 'e') },\n      h: function (c) { return 'time' + (c === 1 ? '' : 'r') },\n      m: function (c) { return 'minut' + (c === 1 ? '' : 'ter') },\n      s: function (c) { return 'sekund' + (c === 1 ? '' : 'er') },\n      ms: function (c) { return 'millisekund' + (c === 1 ? '' : 'er') },\n      decimal: ','\n    },\n    de: {\n      y: function (c) { return 'Jahr' + (c === 1 ? '' : 'e') },\n      mo: function (c) { return 'Monat' + (c === 1 ? '' : 'e') },\n      w: function (c) { return 'Woche' + (c === 1 ? '' : 'n') },\n      d: function (c) { return 'Tag' + (c === 1 ? '' : 'e') },\n      h: function (c) { return 'Stunde' + (c === 1 ? '' : 'n') },\n      m: function (c) { return 'Minute' + (c === 1 ? '' : 'n') },\n      s: function (c) { return 'Sekunde' + (c === 1 ? '' : 'n') },\n      ms: function (c) { return 'Millisekunde' + (c === 1 ? '' : 'n') },\n      decimal: ','\n    },\n    en: {\n      y: function (c) { return 'year' + (c === 1 ? '' : 's') },\n      mo: function (c) { return 'month' + (c === 1 ? '' : 's') },\n      w: function (c) { return 'week' + (c === 1 ? '' : 's') },\n      d: function (c) { return 'day' + (c === 1 ? '' : 's') },\n      h: function (c) { return 'hour' + (c === 1 ? '' : 's') },\n      m: function (c) { return 'minute' + (c === 1 ? '' : 's') },\n      s: function (c) { return 'second' + (c === 1 ? '' : 's') },\n      ms: function (c) { return 'millisecond' + (c === 1 ? '' : 's') },\n      decimal: '.'\n    },\n    es: {\n      y: function (c) { return 'año' + (c === 1 ? '' : 's') },\n      mo: function (c) { return 'mes' + (c === 1 ? '' : 'es') },\n      w: function (c) { return 'semana' + (c === 1 ? '' : 's') },\n      d: function (c) { return 'día' + (c === 1 ? '' : 's') },\n      h: function (c) { return 'hora' + (c === 1 ? '' : 's') },\n      m: function (c) { return 'minuto' + (c === 1 ? '' : 's') },\n      s: function (c) { return 'segundo' + (c === 1 ? '' : 's') },\n      ms: function (c) { return 'milisegundo' + (c === 1 ? '' : 's') },\n      decimal: ','\n    },\n    fa: {\n      y: 'سال',\n      mo: 'ماه',\n      w: 'هفته',\n      d: 'روز',\n      h: 'ساعت',\n      m: 'دقیقه',\n      s: 'ثانیه',\n      ms: 'میلی ثانیه',\n      decimal: '.'\n    },\n    fi: {\n      y: function (c) { return c === 1 ? 'vuosi' : 'vuotta' },\n      mo: function (c) { return c === 1 ? 'kuukausi' : 'kuukautta' },\n      w: function (c) { return 'viikko' + (c === 1 ? '' : 'a') },\n      d: function (c) { return 'päivä' + (c === 1 ? '' : 'ä') },\n      h: function (c) { return 'tunti' + (c === 1 ? '' : 'a') },\n      m: function (c) { return 'minuutti' + (c === 1 ? '' : 'a') },\n      s: function (c) { return 'sekunti' + (c === 1 ? '' : 'a') },\n      ms: function (c) { return 'millisekunti' + (c === 1 ? '' : 'a') },\n      decimal: ','\n    },\n    fr: {\n      y: function (c) { return 'an' + (c >= 2 ? 's' : '') },\n      mo: 'mois',\n      w: function (c) { return 'semaine' + (c >= 2 ? 's' : '') },\n      d: function (c) { return 'jour' + (c >= 2 ? 's' : '') },\n      h: function (c) { return 'heure' + (c >= 2 ? 's' : '') },\n      m: function (c) { return 'minute' + (c >= 2 ? 's' : '') },\n      s: function (c) { return 'seconde' + (c >= 2 ? 's' : '') },\n      ms: function (c) { return 'milliseconde' + (c >= 2 ? 's' : '') },\n      decimal: ','\n    },\n    gr: {\n      y: function (c) { return c === 1 ? 'χρόνος' : 'χρόνια' },\n      mo: function (c) { return c === 1 ? 'μήνας' : 'μήνες' },\n      w: function (c) { return c === 1 ? 'εβδομάδα' : 'εβδομάδες' },\n      d: function (c) { return c === 1 ? 'μέρα' : 'μέρες' },\n      h: function (c) { return c === 1 ? 'ώρα' : 'ώρες' },\n      m: function (c) { return c === 1 ? 'λεπτό' : 'λεπτά' },\n      s: function (c) { return c === 1 ? 'δευτερόλεπτο' : 'δευτερόλεπτα' },\n      ms: function (c) { return c === 1 ? 'χιλιοστό του δευτερολέπτου' : 'χιλιοστά του δευτερολέπτου' },\n      decimal: ','\n    },\n    hu: {\n      y: 'év',\n      mo: 'hónap',\n      w: 'hét',\n      d: 'nap',\n      h: 'óra',\n      m: 'perc',\n      s: 'másodperc',\n      ms: 'ezredmásodperc',\n      decimal: ','\n    },\n    id: {\n      y: 'tahun',\n      mo: 'bulan',\n      w: 'minggu',\n      d: 'hari',\n      h: 'jam',\n      m: 'menit',\n      s: 'detik',\n      ms: 'milidetik',\n      decimal: '.'\n    },\n    is: {\n      y: 'ár',\n      mo: function (c) { return 'mánuð' + (c === 1 ? 'ur' : 'ir') },\n      w: function (c) { return 'vik' + (c === 1 ? 'a' : 'ur') },\n      d: function (c) { return 'dag' + (c === 1 ? 'ur' : 'ar') },\n      h: function (c) { return 'klukkutím' + (c === 1 ? 'i' : 'ar') },\n      m: function (c) { return 'mínút' + (c === 1 ? 'a' : 'ur') },\n      s: function (c) { return 'sekúnd' + (c === 1 ? 'a' : 'ur') },\n      ms: function (c) { return 'millisekúnd' + (c === 1 ? 'a' : 'ur') },\n      decimal: '.'\n    },\n    it: {\n      y: function (c) { return 'ann' + (c === 1 ? 'o' : 'i') },\n      mo: function (c) { return 'mes' + (c === 1 ? 'e' : 'i') },\n      w: function (c) { return 'settiman' + (c === 1 ? 'a' : 'e') },\n      d: function (c) { return 'giorn' + (c === 1 ? 'o' : 'i') },\n      h: function (c) { return 'or' + (c === 1 ? 'a' : 'e') },\n      m: function (c) { return 'minut' + (c === 1 ? 'o' : 'i') },\n      s: function (c) { return 'second' + (c === 1 ? 'o' : 'i') },\n      ms: function (c) { return 'millisecond' + (c === 1 ? 'o' : 'i') },\n      decimal: ','\n    },\n    ja: {\n      y: '年',\n      mo: '月',\n      w: '週',\n      d: '日',\n      h: '時間',\n      m: '分',\n      s: '秒',\n      ms: 'ミリ秒',\n      decimal: '.'\n    },\n    ko: {\n      y: '년',\n      mo: '개월',\n      w: '주일',\n      d: '일',\n      h: '시간',\n      m: '분',\n      s: '초',\n      ms: '밀리 초',\n      decimal: '.'\n    },\n    lt: {\n      y: function (c) { return ((c % 10 === 0) || (c % 100 >= 10 && c % 100 <= 20)) ? 'metų' : 'metai' },\n      mo: function (c) { return ['mėnuo', 'mėnesiai', 'mėnesių'][getLithuanianForm(c)] },\n      w: function (c) { return ['savaitė', 'savaitės', 'savaičių'][getLithuanianForm(c)] },\n      d: function (c) { return ['diena', 'dienos', 'dienų'][getLithuanianForm(c)] },\n      h: function (c) { return ['valanda', 'valandos', 'valandų'][getLithuanianForm(c)] },\n      m: function (c) { return ['minutė', 'minutės', 'minučių'][getLithuanianForm(c)] },\n      s: function (c) { return ['sekundė', 'sekundės', 'sekundžių'][getLithuanianForm(c)] },\n      ms: function (c) { return ['milisekundė', 'milisekundės', 'milisekundžių'][getLithuanianForm(c)] },\n      decimal: ','\n    },\n    ms: {\n      y: 'tahun',\n      mo: 'bulan',\n      w: 'minggu',\n      d: 'hari',\n      h: 'jam',\n      m: 'minit',\n      s: 'saat',\n      ms: 'milisaat',\n      decimal: '.'\n    },\n    nl: {\n      y: 'jaar',\n      mo: function (c) { return c === 1 ? 'maand' : 'maanden' },\n      w: function (c) { return c === 1 ? 'week' : 'weken' },\n      d: function (c) { return c === 1 ? 'dag' : 'dagen' },\n      h: 'uur',\n      m: function (c) { return c === 1 ? 'minuut' : 'minuten' },\n      s: function (c) { return c === 1 ? 'seconde' : 'seconden' },\n      ms: function (c) { return c === 1 ? 'milliseconde' : 'milliseconden' },\n      decimal: ','\n    },\n    no: {\n      y: 'år',\n      mo: function (c) { return 'måned' + (c === 1 ? '' : 'er') },\n      w: function (c) { return 'uke' + (c === 1 ? '' : 'r') },\n      d: function (c) { return 'dag' + (c === 1 ? '' : 'er') },\n      h: function (c) { return 'time' + (c === 1 ? '' : 'r') },\n      m: function (c) { return 'minutt' + (c === 1 ? '' : 'er') },\n      s: function (c) { return 'sekund' + (c === 1 ? '' : 'er') },\n      ms: function (c) { return 'millisekund' + (c === 1 ? '' : 'er') },\n      decimal: ','\n    },\n    pl: {\n      y: function (c) { return ['rok', 'roku', 'lata', 'lat'][getPolishForm(c)] },\n      mo: function (c) { return ['miesiąc', 'miesiąca', 'miesiące', 'miesięcy'][getPolishForm(c)] },\n      w: function (c) { return ['tydzień', 'tygodnia', 'tygodnie', 'tygodni'][getPolishForm(c)] },\n      d: function (c) { return ['dzień', 'dnia', 'dni', 'dni'][getPolishForm(c)] },\n      h: function (c) { return ['godzina', 'godziny', 'godziny', 'godzin'][getPolishForm(c)] },\n      m: function (c) { return ['minuta', 'minuty', 'minuty', 'minut'][getPolishForm(c)] },\n      s: function (c) { return ['sekunda', 'sekundy', 'sekundy', 'sekund'][getPolishForm(c)] },\n      ms: function (c) { return ['milisekunda', 'milisekundy', 'milisekundy', 'milisekund'][getPolishForm(c)] },\n      decimal: ','\n    },\n    pt: {\n      y: function (c) { return 'ano' + (c === 1 ? '' : 's') },\n      mo: function (c) { return c === 1 ? 'mês' : 'meses' },\n      w: function (c) { return 'semana' + (c === 1 ? '' : 's') },\n      d: function (c) { return 'dia' + (c === 1 ? '' : 's') },\n      h: function (c) { return 'hora' + (c === 1 ? '' : 's') },\n      m: function (c) { return 'minuto' + (c === 1 ? '' : 's') },\n      s: function (c) { return 'segundo' + (c === 1 ? '' : 's') },\n      ms: function (c) { return 'milissegundo' + (c === 1 ? '' : 's') },\n      decimal: ','\n    },\n    ru: {\n      y: function (c) { return ['лет', 'год', 'года'][getSlavicForm(c)] },\n      mo: function (c) { return ['месяцев', 'месяц', 'месяца'][getSlavicForm(c)] },\n      w: function (c) { return ['недель', 'неделя', 'недели'][getSlavicForm(c)] },\n      d: function (c) { return ['дней', 'день', 'дня'][getSlavicForm(c)] },\n      h: function (c) { return ['часов', 'час', 'часа'][getSlavicForm(c)] },\n      m: function (c) { return ['минут', 'минута', 'минуты'][getSlavicForm(c)] },\n      s: function (c) { return ['секунд', 'секунда', 'секунды'][getSlavicForm(c)] },\n      ms: function (c) { return ['миллисекунд', 'миллисекунда', 'миллисекунды'][getSlavicForm(c)] },\n      decimal: ','\n    },\n    uk: {\n      y: function (c) { return ['років', 'рік', 'роки'][getSlavicForm(c)] },\n      mo: function (c) { return ['місяців', 'місяць', 'місяці'][getSlavicForm(c)] },\n      w: function (c) { return ['тижнів', 'тиждень', 'тижні'][getSlavicForm(c)] },\n      d: function (c) { return ['днів', 'день', 'дні'][getSlavicForm(c)] },\n      h: function (c) { return ['годин', 'година', 'години'][getSlavicForm(c)] },\n      m: function (c) { return ['хвилин', 'хвилина', 'хвилини'][getSlavicForm(c)] },\n      s: function (c) { return ['секунд', 'секунда', 'секунди'][getSlavicForm(c)] },\n      ms: function (c) { return ['мілісекунд', 'мілісекунда', 'мілісекунди'][getSlavicForm(c)] },\n      decimal: ','\n    },\n    ur: {\n      y: 'سال',\n      mo: function (c) { return c === 1 ? 'مہینہ' : 'مہینے' },\n      w: function (c) { return c === 1 ? 'ہفتہ' : 'ہفتے' },\n      d: 'دن',\n      h: function (c) { return c === 1 ? 'گھنٹہ' : 'گھنٹے' },\n      m: 'منٹ',\n      s: 'سیکنڈ',\n      ms: 'ملی سیکنڈ',\n      decimal: '.'\n    },\n    sk: {\n      y: function (c) { return ['rok', 'roky', 'roky', 'rokov'][getCzechOrSlovakForm(c)] },\n      mo: function (c) { return ['mesiac', 'mesiace', 'mesiace', 'mesiacov'][getCzechOrSlovakForm(c)] },\n      w: function (c) { return ['týždeň', 'týždne', 'týždne', 'týždňov'][getCzechOrSlovakForm(c)] },\n      d: function (c) { return ['deň', 'dni', 'dni', 'dní'][getCzechOrSlovakForm(c)] },\n      h: function (c) { return ['hodina', 'hodiny', 'hodiny', 'hodín'][getCzechOrSlovakForm(c)] },\n      m: function (c) { return ['minúta', 'minúty', 'minúty', 'minút'][getCzechOrSlovakForm(c)] },\n      s: function (c) { return ['sekunda', 'sekundy', 'sekundy', 'sekúnd'][getCzechOrSlovakForm(c)] },\n      ms: function (c) { return ['milisekunda', 'milisekundy', 'milisekundy', 'milisekúnd'][getCzechOrSlovakForm(c)] },\n      decimal: ','\n    },\n    sv: {\n      y: 'år',\n      mo: function (c) { return 'månad' + (c === 1 ? '' : 'er') },\n      w: function (c) { return 'veck' + (c === 1 ? 'a' : 'or') },\n      d: function (c) { return 'dag' + (c === 1 ? '' : 'ar') },\n      h: function (c) { return 'timm' + (c === 1 ? 'e' : 'ar') },\n      m: function (c) { return 'minut' + (c === 1 ? '' : 'er') },\n      s: function (c) { return 'sekund' + (c === 1 ? '' : 'er') },\n      ms: function (c) { return 'millisekund' + (c === 1 ? '' : 'er') },\n      decimal: ','\n    },\n    tr: {\n      y: 'yıl',\n      mo: 'ay',\n      w: 'hafta',\n      d: 'gün',\n      h: 'saat',\n      m: 'dakika',\n      s: 'saniye',\n      ms: 'milisaniye',\n      decimal: ','\n    },\n    vi: {\n      y: 'năm',\n      mo: 'tháng',\n      w: 'tuần',\n      d: 'ngày',\n      h: 'giờ',\n      m: 'phút',\n      s: 'giây',\n      ms: 'mili giây',\n      decimal: ','\n    },\n    zh_CN: {\n      y: '年',\n      mo: '个月',\n      w: '周',\n      d: '天',\n      h: '小时',\n      m: '分钟',\n      s: '秒',\n      ms: '毫秒',\n      decimal: '.'\n    },\n    zh_TW: {\n      y: '年',\n      mo: '個月',\n      w: '周',\n      d: '天',\n      h: '小時',\n      m: '分鐘',\n      s: '秒',\n      ms: '毫秒',\n      decimal: '.'\n    }\n  }\n\n  // You can create a humanizer, which returns a function with default\n  // parameters.\n  function humanizer (passedOptions) {\n    var result = function humanizer (ms, humanizerOptions) {\n      var options = extend({}, result, humanizerOptions || {})\n      return doHumanization(ms, options)\n    }\n\n    return extend(result, {\n      language: 'en',\n      delimiter: ', ',\n      spacer: ' ',\n      conjunction: '',\n      serialComma: true,\n      units: ['y', 'mo', 'w', 'd', 'h', 'm', 's'],\n      languages: {},\n      round: false,\n      unitMeasures: {\n        y: 31557600000,\n        mo: 2629800000,\n        w: 604800000,\n        d: 86400000,\n        h: 3600000,\n        m: 60000,\n        s: 1000,\n        ms: 1\n      }\n    }, passedOptions)\n  }\n\n  // The main function is just a wrapper around a default humanizer.\n  var humanizeDuration = humanizer({})\n\n  // doHumanization does the bulk of the work.\n  function doHumanization (ms, options) {\n    var i, len, piece\n\n    // Make sure we have a positive number.\n    // Has the nice sideffect of turning Number objects into primitives.\n    ms = Math.abs(ms)\n\n    var dictionary = options.languages[options.language] || languages[options.language]\n    if (!dictionary) {\n      throw new Error('No language ' + dictionary + '.')\n    }\n\n    var pieces = []\n\n    // Start at the top and keep removing units, bit by bit.\n    var unitName, unitMS, unitCount\n    for (i = 0, len = options.units.length; i < len; i++) {\n      unitName = options.units[i]\n      unitMS = options.unitMeasures[unitName]\n\n      // What's the number of full units we can fit?\n      if (i + 1 === len) {\n        unitCount = ms / unitMS\n      } else {\n        unitCount = Math.floor(ms / unitMS)\n      }\n\n      // Add the string.\n      pieces.push({\n        unitCount: unitCount,\n        unitName: unitName\n      })\n\n      // Remove what we just figured out.\n      ms -= unitCount * unitMS\n    }\n\n    var firstOccupiedUnitIndex = 0\n    for (i = 0; i < pieces.length; i++) {\n      if (pieces[i].unitCount) {\n        firstOccupiedUnitIndex = i\n        break\n      }\n    }\n\n    if (options.round) {\n      var ratioToLargerUnit, previousPiece\n      for (i = pieces.length - 1; i >= 0; i--) {\n        piece = pieces[i]\n        piece.unitCount = Math.round(piece.unitCount)\n\n        if (i === 0) { break }\n\n        previousPiece = pieces[i - 1]\n\n        ratioToLargerUnit = options.unitMeasures[previousPiece.unitName] / options.unitMeasures[piece.unitName]\n        if ((piece.unitCount % ratioToLargerUnit) === 0 || (options.largest && ((options.largest - 1) < (i - firstOccupiedUnitIndex)))) {\n          previousPiece.unitCount += piece.unitCount / ratioToLargerUnit\n          piece.unitCount = 0\n        }\n      }\n    }\n\n    var result = []\n    for (i = 0, pieces.length; i < len; i++) {\n      piece = pieces[i]\n      if (piece.unitCount) {\n        result.push(render(piece.unitCount, piece.unitName, dictionary, options))\n      }\n\n      if (result.length === options.largest) { break }\n    }\n\n    if (result.length) {\n      if (!options.conjunction || result.length === 1) {\n        return result.join(options.delimiter)\n      } else if (result.length === 2) {\n        return result.join(options.conjunction)\n      } else if (result.length > 2) {\n        return result.slice(0, -1).join(options.delimiter) + (options.serialComma ? ',' : '') + options.conjunction + result.slice(-1)\n      }\n    } else {\n      return render(0, options.units[options.units.length - 1], dictionary, options)\n    }\n  }\n\n  function render (count, type, dictionary, options) {\n    var decimal\n    if (options.decimal === void 0) {\n      decimal = dictionary.decimal\n    } else {\n      decimal = options.decimal\n    }\n\n    var countStr = count.toString().replace('.', decimal)\n\n    var dictionaryValue = dictionary[type]\n    var word\n    if (typeof dictionaryValue === 'function') {\n      word = dictionaryValue(count)\n    } else {\n      word = dictionaryValue\n    }\n\n    return countStr + options.spacer + word\n  }\n\n  function extend (destination) {\n    var source\n    for (var i = 1; i < arguments.length; i++) {\n      source = arguments[i]\n      for (var prop in source) {\n        if (source.hasOwnProperty(prop)) {\n          destination[prop] = source[prop]\n        }\n      }\n    }\n    return destination\n  }\n\n  // Internal helper function for Polish language.\n  function getPolishForm (c) {\n    if (c === 1) {\n      return 0\n    } else if (Math.floor(c) !== c) {\n      return 1\n    } else if (c % 10 >= 2 && c % 10 <= 4 && !(c % 100 > 10 && c % 100 < 20)) {\n      return 2\n    } else {\n      return 3\n    }\n  }\n\n  // Internal helper function for Russian and Ukranian languages.\n  function getSlavicForm (c) {\n    if (Math.floor(c) !== c) {\n      return 2\n    } else if ((c % 100 >= 5 && c % 100 <= 20) || (c % 10 >= 5 && c % 10 <= 9) || c % 10 === 0) {\n      return 0\n    } else if (c % 10 === 1) {\n      return 1\n    } else if (c > 1) {\n      return 2\n    } else {\n      return 0\n    }\n  }\n\n    // Internal helper function for Slovak language.\n  function getCzechOrSlovakForm (c) {\n    if (c === 1) {\n      return 0\n    } else if (Math.floor(c) !== c) {\n      return 1\n    } else if (c % 10 >= 2 && c % 10 <= 4 && c % 100 < 10) {\n      return 2\n    } else {\n      return 3\n    }\n  }\n\n  // Internal helper function for Lithuanian language.\n  function getLithuanianForm (c) {\n    if (c === 1 || (c % 10 === 1 && c % 100 > 20)) {\n      return 0\n    } else if (Math.floor(c) !== c || (c % 10 >= 2 && c % 100 > 20) || (c % 10 >= 2 && c % 100 < 10)) {\n      return 1\n    } else {\n      return 2\n    }\n  }\n\n  humanizeDuration.getSupportedLanguages = function getSupportedLanguages () {\n    var result = []\n    for (var language in languages) {\n      if (languages.hasOwnProperty(language)) {\n        result.push(language)\n      }\n    }\n    return result\n  }\n\n  humanizeDuration.humanizer = humanizer\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return humanizeDuration\n    })\n  } else if (typeof module !== 'undefined' && module.exports) {\n    module.exports = humanizeDuration\n  } else {\n    this.humanizeDuration = humanizeDuration\n  }\n})();  // eslint-disable-line semi\n\n},{}],33:[function(_dereq_,module,exports){\nvar split = _dereq_('browser-split')\nvar ClassList = _dereq_('class-list')\n\nvar w = typeof window === 'undefined' ? _dereq_('html-element') : window\nvar document = w.document\nvar Text = w.Text\n\nfunction context () {\n\n  var cleanupFuncs = []\n\n  function h() {\n    var args = [].slice.call(arguments), e = null\n    function item (l) {\n      var r\n      function parseClass (string) {\n        // Our minimal parser doesn’t understand escaping CSS special\n        // characters like `#`. Don’t use them. More reading:\n        // https://mathiasbynens.be/notes/css-escapes .\n\n        var m = split(string, /([\\.#]?[^\\s#.]+)/)\n        if(/^\\.|#/.test(m[1]))\n          e = document.createElement('div')\n        forEach(m, function (v) {\n          var s = v.substring(1,v.length)\n          if(!v) return\n          if(!e)\n            e = document.createElement(v)\n          else if (v[0] === '.')\n            ClassList(e).add(s)\n          else if (v[0] === '#')\n            e.setAttribute('id', s)\n        })\n      }\n\n      if(l == null)\n        ;\n      else if('string' === typeof l) {\n        if(!e)\n          parseClass(l)\n        else\n          e.appendChild(r = document.createTextNode(l))\n      }\n      else if('number' === typeof l\n        || 'boolean' === typeof l\n        || l instanceof Date\n        || l instanceof RegExp ) {\n          e.appendChild(r = document.createTextNode(l.toString()))\n      }\n      //there might be a better way to handle this...\n      else if (isArray(l))\n        forEach(l, item)\n      else if(isNode(l))\n        e.appendChild(r = l)\n      else if(l instanceof Text)\n        e.appendChild(r = l)\n      else if ('object' === typeof l) {\n        for (var k in l) {\n          if('function' === typeof l[k]) {\n            if(/^on\\w+/.test(k)) {\n              (function (k, l) { // capture k, l in the closure\n                if (e.addEventListener){\n                  e.addEventListener(k.substring(2), l[k], false)\n                  cleanupFuncs.push(function(){\n                    e.removeEventListener(k.substring(2), l[k], false)\n                  })\n                }else{\n                  e.attachEvent(k, l[k])\n                  cleanupFuncs.push(function(){\n                    e.detachEvent(k, l[k])\n                  })\n                }\n              })(k, l)\n            } else {\n              // observable\n              e[k] = l[k]()\n              cleanupFuncs.push(l[k](function (v) {\n                e[k] = v\n              }))\n            }\n          }\n          else if(k === 'style') {\n            if('string' === typeof l[k]) {\n              e.style.cssText = l[k]\n            }else{\n              for (var s in l[k]) (function(s, v) {\n                if('function' === typeof v) {\n                  // observable\n                  e.style.setProperty(s, v())\n                  cleanupFuncs.push(v(function (val) {\n                    e.style.setProperty(s, val)\n                  }))\n                } else\n                  var match = l[k][s].match(/(.*)\\W+!important\\W*$/);\n                  if (match) {\n                    e.style.setProperty(s, match[1], 'important')\n                  } else {\n                    e.style.setProperty(s, l[k][s])\n                  }\n              })(s, l[k][s])\n            }\n          } else if(k === 'attrs') {\n            for (var v in l[k]) {\n              e.setAttribute(v, l[k][v])\n            }\n          }\n          else if (k.substr(0, 5) === \"data-\") {\n            e.setAttribute(k, l[k])\n          } else {\n            e[k] = l[k]\n          }\n        }\n      } else if ('function' === typeof l) {\n        //assume it's an observable!\n        var v = l()\n        e.appendChild(r = isNode(v) ? v : document.createTextNode(v))\n\n        cleanupFuncs.push(l(function (v) {\n          if(isNode(v) && r.parentElement)\n            r.parentElement.replaceChild(v, r), r = v\n          else\n            r.textContent = v\n        }))\n      }\n\n      return r\n    }\n    while(args.length)\n      item(args.shift())\n\n    return e\n  }\n\n  h.cleanup = function () {\n    for (var i = 0; i < cleanupFuncs.length; i++){\n      cleanupFuncs[i]()\n    }\n    cleanupFuncs.length = 0\n  }\n\n  return h\n}\n\nvar h = module.exports = context()\nh.context = context\n\nfunction isNode (el) {\n  return el && el.nodeName && el.nodeType\n}\n\nfunction forEach (arr, fn) {\n  if (arr.forEach) return arr.forEach(fn)\n  for (var i = 0; i < arr.length; i++) fn(arr[i], i)\n}\n\nfunction isArray (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]'\n}\n\n\n\n},{\"browser-split\":7,\"class-list\":10,\"html-element\":6}],34:[function(_dereq_,module,exports){\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n},{}],35:[function(_dereq_,module,exports){\n\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};\n},{}],36:[function(_dereq_,module,exports){\nif (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n},{}],37:[function(_dereq_,module,exports){\nvar containers = []; // will store container HTMLElement references\nvar styleElements = []; // will store {prepend: HTMLElement, append: HTMLElement}\n\nvar usage = 'insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).';\n\nfunction insertCss(css, options) {\n    options = options || {};\n\n    if (css === undefined) {\n        throw new Error(usage);\n    }\n\n    var position = options.prepend === true ? 'prepend' : 'append';\n    var container = options.container !== undefined ? options.container : document.querySelector('head');\n    var containerId = containers.indexOf(container);\n\n    // first time we see this container, create the necessary entries\n    if (containerId === -1) {\n        containerId = containers.push(container) - 1;\n        styleElements[containerId] = {};\n    }\n\n    // try to get the correponding container + position styleElement, create it otherwise\n    var styleElement;\n\n    if (styleElements[containerId] !== undefined && styleElements[containerId][position] !== undefined) {\n        styleElement = styleElements[containerId][position];\n    } else {\n        styleElement = styleElements[containerId][position] = createStyleElement();\n\n        if (position === 'prepend') {\n            container.insertBefore(styleElement, container.childNodes[0]);\n        } else {\n            container.appendChild(styleElement);\n        }\n    }\n\n    // strip potential UTF-8 BOM if css was read from a file\n    if (css.charCodeAt(0) === 0xFEFF) { css = css.substr(1, css.length); }\n\n    // actually add the stylesheet\n    if (styleElement.styleSheet) {\n        styleElement.styleSheet.cssText += css\n    } else {\n        styleElement.textContent += css;\n    }\n\n    return styleElement;\n};\n\nfunction createStyleElement() {\n    var styleElement = document.createElement('style');\n    styleElement.setAttribute('type', 'text/css');\n    return styleElement;\n}\n\nmodule.exports = insertCss;\nmodule.exports.insertCss = insertCss;\n\n},{}],38:[function(_dereq_,module,exports){\n/*! npm.im/intervalometer */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction intervalometer(cb, request, cancel, requestParameter) {\n\tvar requestId;\n\tvar previousLoopTime;\n\tfunction loop(now) {\n\t\t// must be requested before cb() because that might call .stop()\n\t\trequestId = request(loop, requestParameter);\n\n\t\t// called with \"ms since last call\". 0 on start()\n\t\tcb(now - (previousLoopTime || now));\n\n\t\tpreviousLoopTime = now;\n\t}\n\treturn {\n\t\tstart: function start() {\n\t\t\tif (!requestId) { // prevent double starts\n\t\t\t\tloop(0);\n\t\t\t}\n\t\t},\n\t\tstop: function stop() {\n\t\t\tcancel(requestId);\n\t\t\trequestId = null;\n\t\t\tpreviousLoopTime = 0;\n\t\t}\n\t};\n}\n\nfunction frameIntervalometer(cb) {\n\treturn intervalometer(cb, requestAnimationFrame, cancelAnimationFrame);\n}\n\nfunction timerIntervalometer(cb, delay) {\n\treturn intervalometer(cb, setTimeout, clearTimeout, delay);\n}\n\nexports.intervalometer = intervalometer;\nexports.frameIntervalometer = frameIntervalometer;\nexports.timerIntervalometer = timerIntervalometer;\n},{}],39:[function(_dereq_,module,exports){\n/*! npm.im/iphone-inline-video 2.2.2 */\n'use strict';\n\nvar intervalometer = _dereq_('intervalometer');\n\nfunction preventEvent(element, eventName, test) {\n\tfunction handler(e) {\n\t\tif (!test || test(element, eventName)) {\n\t\t\te.stopImmediatePropagation();\n\t\t\t// // console.log(eventName, 'prevented on', element);\n\t\t}\n\t}\n\telement.addEventListener(eventName, handler);\n\n\t// Return handler to allow to disable the prevention. Usage:\n\t// const preventionHandler = preventEvent(el, 'click');\n\t// el.removeEventHandler('click', preventionHandler);\n\treturn handler;\n}\n\nfunction proxyProperty(object, propertyName, sourceObject, copyFirst) {\n\tfunction get() {\n\t\treturn sourceObject[propertyName];\n\t}\n\tfunction set(value) {\n\t\tsourceObject[propertyName] = value;\n\t}\n\n\tif (copyFirst) {\n\t\tset(object[propertyName]);\n\t}\n\n\tObject.defineProperty(object, propertyName, {get: get, set: set});\n}\n\nfunction proxyEvent(object, eventName, sourceObject) {\n\tsourceObject.addEventListener(eventName, function () { return object.dispatchEvent(new Event(eventName)); });\n}\n\nfunction dispatchEventAsync(element, type) {\n\tPromise.resolve().then(function () {\n\t\telement.dispatchEvent(new Event(type));\n\t});\n}\n\nvar iOS8or9 = typeof document === 'object' && 'object-fit' in document.head.style && !matchMedia('(-webkit-video-playable-inline)').matches;\n\nvar IIV = 'bfred-it:iphone-inline-video';\nvar IIVEvent = 'bfred-it:iphone-inline-video:event';\nvar IIVPlay = 'bfred-it:iphone-inline-video:nativeplay';\nvar IIVPause = 'bfred-it:iphone-inline-video:nativepause';\n\n/**\n * UTILS\n */\n\nfunction getAudioFromVideo(video) {\n\tvar audio = new Audio();\n\tproxyEvent(video, 'play', audio);\n\tproxyEvent(video, 'playing', audio);\n\tproxyEvent(video, 'pause', audio);\n\taudio.crossOrigin = video.crossOrigin;\n\n\t// 'data:' causes audio.networkState > 0\n\t// which then allows to keep <audio> in a resumable playing state\n\t// i.e. once you set a real src it will keep playing if it was if .play() was called\n\taudio.src = video.src || video.currentSrc || 'data:';\n\n\t// // if (audio.src === 'data:') {\n\t//   TODO: wait for video to be selected\n\t// // }\n\treturn audio;\n}\n\nvar lastRequests = [];\nvar requestIndex = 0;\nvar lastTimeupdateEvent;\n\nfunction setTime(video, time, rememberOnly) {\n\t// Allow one timeupdate event every 200+ ms\n\tif ((lastTimeupdateEvent || 0) + 200 < Date.now()) {\n\t\tvideo[IIVEvent] = true;\n\t\tlastTimeupdateEvent = Date.now();\n\t}\n\tif (!rememberOnly) {\n\t\tvideo.currentTime = time;\n\t}\n\tlastRequests[++requestIndex % 3] = time * 100 | 0 / 100;\n}\n\nfunction isPlayerEnded(player) {\n\treturn player.driver.currentTime >= player.video.duration;\n}\n\nfunction update(timeDiff) {\n\tvar player = this;\n\t// // console.log('update', player.video.readyState, player.video.networkState, player.driver.readyState, player.driver.networkState, player.driver.paused);\n\tif (player.video.readyState >= player.video.HAVE_FUTURE_DATA) {\n\t\tif (!player.hasAudio) {\n\t\t\tplayer.driver.currentTime = player.video.currentTime + ((timeDiff * player.video.playbackRate) / 1000);\n\t\t\tif (player.video.loop && isPlayerEnded(player)) {\n\t\t\t\tplayer.driver.currentTime = 0;\n\t\t\t}\n\t\t}\n\t\tsetTime(player.video, player.driver.currentTime);\n\t} else if (player.video.networkState === player.video.NETWORK_IDLE && player.video.buffered.length === 0) {\n\t\t// This should happen when the source is available but:\n\t\t// - it's potentially playing (.paused === false)\n\t\t// - it's not ready to play\n\t\t// - it's not loading\n\t\t// If it hasAudio, that will be loaded in the 'emptied' handler below\n\t\tplayer.video.load();\n\t\t// // console.log('Will load');\n\t}\n\n\t// // console.assert(player.video.currentTime === player.driver.currentTime, 'Video not updating!');\n\n\tif (player.video.ended) {\n\t\tdelete player.video[IIVEvent]; // Allow timeupdate event\n\t\tplayer.video.pause(true);\n\t}\n}\n\n/**\n * METHODS\n */\n\nfunction play() {\n\t// // console.log('play');\n\tvar video = this;\n\tvar player = video[IIV];\n\n\t// If it's fullscreen, use the native player\n\tif (video.webkitDisplayingFullscreen) {\n\t\tvideo[IIVPlay]();\n\t\treturn;\n\t}\n\n\tif (player.driver.src !== 'data:' && player.driver.src !== video.src) {\n\t\t// // console.log('src changed on play', video.src);\n\t\tsetTime(video, 0, true);\n\t\tplayer.driver.src = video.src;\n\t}\n\n\tif (!video.paused) {\n\t\treturn;\n\t}\n\tplayer.paused = false;\n\n\tif (video.buffered.length === 0) {\n\t\t// .load() causes the emptied event\n\t\t// the alternative is .play()+.pause() but that triggers play/pause events, even worse\n\t\t// possibly the alternative is preventing this event only once\n\t\tvideo.load();\n\t}\n\n\tplayer.driver.play();\n\tplayer.updater.start();\n\n\tif (!player.hasAudio) {\n\t\tdispatchEventAsync(video, 'play');\n\t\tif (player.video.readyState >= player.video.HAVE_ENOUGH_DATA) {\n\t\t\t// // console.log('onplay');\n\t\t\tdispatchEventAsync(video, 'playing');\n\t\t}\n\t}\n}\nfunction pause(forceEvents) {\n\t// // console.log('pause');\n\tvar video = this;\n\tvar player = video[IIV];\n\n\tplayer.driver.pause();\n\tplayer.updater.stop();\n\n\t// If it's fullscreen, the developer the native player.pause()\n\t// This is at the end of pause() because it also\n\t// needs to make sure that the simulation is paused\n\tif (video.webkitDisplayingFullscreen) {\n\t\tvideo[IIVPause]();\n\t}\n\n\tif (player.paused && !forceEvents) {\n\t\treturn;\n\t}\n\n\tplayer.paused = true;\n\tif (!player.hasAudio) {\n\t\tdispatchEventAsync(video, 'pause');\n\t}\n\n\t// Handle the 'ended' event only if it's not fullscreen\n\tif (video.ended && !video.webkitDisplayingFullscreen) {\n\t\tvideo[IIVEvent] = true;\n\t\tdispatchEventAsync(video, 'ended');\n\t}\n}\n\n/**\n * SETUP\n */\n\nfunction addPlayer(video, hasAudio) {\n\tvar player = {};\n\tvideo[IIV] = player;\n\tplayer.paused = true; // Track whether 'pause' events have been fired\n\tplayer.hasAudio = hasAudio;\n\tplayer.video = video;\n\tplayer.updater = intervalometer.frameIntervalometer(update.bind(player));\n\n\tif (hasAudio) {\n\t\tplayer.driver = getAudioFromVideo(video);\n\t} else {\n\t\tvideo.addEventListener('canplay', function () {\n\t\t\tif (!video.paused) {\n\t\t\t\t// // console.log('oncanplay');\n\t\t\t\tdispatchEventAsync(video, 'playing');\n\t\t\t}\n\t\t});\n\t\tplayer.driver = {\n\t\t\tsrc: video.src || video.currentSrc || 'data:',\n\t\t\tmuted: true,\n\t\t\tpaused: true,\n\t\t\tpause: function () {\n\t\t\t\tplayer.driver.paused = true;\n\t\t\t},\n\t\t\tplay: function () {\n\t\t\t\tplayer.driver.paused = false;\n\t\t\t\t// Media automatically goes to 0 if .play() is called when it's done\n\t\t\t\tif (isPlayerEnded(player)) {\n\t\t\t\t\tsetTime(video, 0);\n\t\t\t\t}\n\t\t\t},\n\t\t\tget ended() {\n\t\t\t\treturn isPlayerEnded(player);\n\t\t\t}\n\t\t};\n\t}\n\n\t// .load() causes the emptied event\n\tvideo.addEventListener('emptied', function () {\n\t\t// // console.log('driver src is', player.driver.src);\n\t\tvar wasEmpty = !player.driver.src || player.driver.src === 'data:';\n\t\tif (player.driver.src && player.driver.src !== video.src) {\n\t\t\t// // console.log('src changed to', video.src);\n\t\t\tsetTime(video, 0, true);\n\t\t\tplayer.driver.src = video.src;\n\t\t\t// Playing videos will only keep playing if no src was present when .play()’ed\n\t\t\tif (wasEmpty || (!hasAudio && video.autoplay)) {\n\t\t\t\tplayer.driver.play();\n\t\t\t} else {\n\t\t\t\tplayer.updater.stop();\n\t\t\t}\n\t\t}\n\t}, false);\n\n\t// Stop programmatic player when OS takes over\n\tvideo.addEventListener('webkitbeginfullscreen', function () {\n\t\tif (!video.paused) {\n\t\t\t// Make sure that the <audio> and the syncer/updater are stopped\n\t\t\tvideo.pause();\n\n\t\t\t// Play video natively\n\t\t\tvideo[IIVPlay]();\n\t\t} else if (hasAudio && player.driver.buffered.length === 0) {\n\t\t\t// If the first play is native,\n\t\t\t// the <audio> needs to be buffered manually\n\t\t\t// so when the fullscreen ends, it can be set to the same current time\n\t\t\tplayer.driver.load();\n\t\t}\n\t});\n\tif (hasAudio) {\n\t\tvideo.addEventListener('webkitendfullscreen', function () {\n\t\t\t// Sync audio to new video position\n\t\t\tplayer.driver.currentTime = video.currentTime;\n\t\t\t// // console.assert(player.driver.currentTime === video.currentTime, 'Audio not synced');\n\t\t});\n\n\t\t// Allow seeking\n\t\tvideo.addEventListener('seeking', function () {\n\t\t\tif (lastRequests.indexOf(video.currentTime * 100 | 0 / 100) < 0) {\n\t\t\t\t// // console.log('User-requested seeking');\n\t\t\t\tplayer.driver.currentTime = video.currentTime;\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction preventWithPropOrFullscreen(el) {\n\tvar isAllowed = el[IIVEvent];\n\tdelete el[IIVEvent];\n\treturn !el.webkitDisplayingFullscreen && !isAllowed;\n}\n\nfunction overloadAPI(video) {\n\tvar player = video[IIV];\n\tvideo[IIVPlay] = video.play;\n\tvideo[IIVPause] = video.pause;\n\tvideo.play = play;\n\tvideo.pause = pause;\n\tproxyProperty(video, 'paused', player.driver);\n\tproxyProperty(video, 'muted', player.driver, true);\n\tproxyProperty(video, 'playbackRate', player.driver, true);\n\tproxyProperty(video, 'ended', player.driver);\n\tproxyProperty(video, 'loop', player.driver, true);\n\n\t// IIV works by seeking 60 times per second.\n\t// These events are now useless.\n\tpreventEvent(video, 'seeking', function (el) { return !el.webkitDisplayingFullscreen; });\n\tpreventEvent(video, 'seeked', function (el) { return !el.webkitDisplayingFullscreen; });\n\n\t// Limit timeupdate events\n\tpreventEvent(video, 'timeupdate', preventWithPropOrFullscreen);\n\n\t// Prevent occasional native ended events\n\tpreventEvent(video, 'ended', preventWithPropOrFullscreen);\n}\n\nfunction enableInlineVideo(video, opts) {\n\tif ( opts === void 0 ) opts = {};\n\n\t// Stop if already enabled\n\tif (video[IIV]) {\n\t\treturn;\n\t}\n\n\t// Allow the user to skip detection\n\tif (!opts.everywhere) {\n\t\t// Only iOS8 and 9 are supported\n\t\tif (!iOS8or9) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Stop if it's not an allowed device\n\t\tif (!(opts.iPad || opts.ipad ? /iPhone|iPod|iPad/ : /iPhone|iPod/).test(navigator.userAgent)) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\t// Try to pause\n\tvideo.pause();\n\n\t// Prevent autoplay.\n\t// An non-started autoplaying video can't be .pause()'d\n\tvar willAutoplay = video.autoplay;\n\tvideo.autoplay = false;\n\n\taddPlayer(video, !video.muted);\n\toverloadAPI(video);\n\tvideo.classList.add('IIV');\n\n\t// Autoplay\n\tif (video.muted && willAutoplay) {\n\t\tvideo.play();\n\t\tvideo.addEventListener('playing', function restoreAutoplay() {\n\t\t\tvideo.autoplay = true;\n\t\t\tvideo.removeEventListener('playing', restoreAutoplay);\n\t\t});\n\t}\n\n\tif (!/iPhone|iPod|iPad/.test(navigator.platform)) {\n\t\tconsole.warn('iphone-inline-video is not guaranteed to work in emulated environments');\n\t}\n}\n\nmodule.exports = enableInlineVideo;\n\n},{\"intervalometer\":38}],40:[function(_dereq_,module,exports){\n/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n\n},{}],41:[function(_dereq_,module,exports){\n'use strict';\nvar numberIsNan = _dereq_('number-is-nan');\n\nmodule.exports = Number.isFinite || function (val) {\n\treturn !(typeof val !== 'number' || numberIsNan(val) || val === Infinity || val === -Infinity);\n};\n\n},{\"number-is-nan\":47}],42:[function(_dereq_,module,exports){\nmodule.exports = isPowerOfTwo\n\nfunction isPowerOfTwo(n) {\n  return n !== 0 && (n & (n - 1)) === 0\n}\n},{}],43:[function(_dereq_,module,exports){\nmodule.exports      = isTypedArray\nisTypedArray.strict = isStrictTypedArray\nisTypedArray.loose  = isLooseTypedArray\n\nvar toString = Object.prototype.toString\nvar names = {\n    '[object Int8Array]': true\n  , '[object Int16Array]': true\n  , '[object Int32Array]': true\n  , '[object Uint8Array]': true\n  , '[object Uint8ClampedArray]': true\n  , '[object Uint16Array]': true\n  , '[object Uint32Array]': true\n  , '[object Float32Array]': true\n  , '[object Float64Array]': true\n}\n\nfunction isTypedArray(arr) {\n  return (\n       isStrictTypedArray(arr)\n    || isLooseTypedArray(arr)\n  )\n}\n\nfunction isStrictTypedArray(arr) {\n  return (\n       arr instanceof Int8Array\n    || arr instanceof Int16Array\n    || arr instanceof Int32Array\n    || arr instanceof Uint8Array\n    || arr instanceof Uint8ClampedArray\n    || arr instanceof Uint16Array\n    || arr instanceof Uint32Array\n    || arr instanceof Float32Array\n    || arr instanceof Float64Array\n  )\n}\n\nfunction isLooseTypedArray(arr) {\n  return names[toString.call(arr)]\n}\n\n},{}],44:[function(_dereq_,module,exports){\nvar toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n},{}],45:[function(_dereq_,module,exports){\n/**\n * Copyright 2013-2014 Facebook, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n\"use strict\";\n\n/**\n * Constructs an enumeration with keys equal to their value.\n *\n * For example:\n *\n *   var COLORS = keyMirror({blue: null, red: null});\n *   var myColor = COLORS.blue;\n *   var isColorValid = !!COLORS[myColor];\n *\n * The last line could not be performed if the values of the generated enum were\n * not equal to their keys.\n *\n *   Input:  {key1: val1, key2: val2}\n *   Output: {key1: key1, key2: key2}\n *\n * @param {object} obj\n * @return {object}\n */\nvar keyMirror = function(obj) {\n  var ret = {};\n  var key;\n  if (!(obj instanceof Object && !Array.isArray(obj))) {\n    throw new Error('keyMirror(...): Argument must be an object.');\n  }\n  for (key in obj) {\n    if (!obj.hasOwnProperty(key)) {\n      continue;\n    }\n    ret[key] = key;\n  }\n  return ret;\n};\n\nmodule.exports = keyMirror;\n\n},{}],46:[function(_dereq_,module,exports){\n'use strict';\nvar numberIsFinite = _dereq_('is-finite');\n\nmodule.exports = Number.isInteger || function (x) {\n\treturn numberIsFinite(x) && Math.floor(x) === x;\n};\n\n},{\"is-finite\":41}],47:[function(_dereq_,module,exports){\n'use strict';\nmodule.exports = Number.isNaN || function (x) {\n\treturn x !== x;\n};\n\n},{}],48:[function(_dereq_,module,exports){\nvar wrappy = _dereq_('wrappy')\nmodule.exports = wrappy(once)\nmodule.exports.strict = wrappy(onceStrict)\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n\n  Object.defineProperty(Function.prototype, 'onceStrict', {\n    value: function () {\n      return onceStrict(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var f = function () {\n    if (f.called) return f.value\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  f.called = false\n  return f\n}\n\nfunction onceStrict (fn) {\n  var f = function () {\n    if (f.called)\n      throw new Error(f.onceError)\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  var name = fn.name || 'Function wrapped with `once`'\n  f.onceError = name + \" shouldn't be called more than once\"\n  f.called = false\n  return f\n}\n\n},{\"wrappy\":84}],49:[function(_dereq_,module,exports){\n(function (process){\n// Generated by CoffeeScript 1.12.2\n(function() {\n  var getNanoSeconds, hrtime, loadTime, moduleLoadTime, nodeLoadTime, upTime;\n\n  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n    module.exports = function() {\n      return performance.now();\n    };\n  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n    module.exports = function() {\n      return (getNanoSeconds() - nodeLoadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    moduleLoadTime = getNanoSeconds();\n    upTime = process.uptime() * 1e9;\n    nodeLoadTime = moduleLoadTime - upTime;\n  } else if (Date.now) {\n    module.exports = function() {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function() {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n\n}).call(this);\n\n\n\n}).call(this,_dereq_('_process'))\n},{\"_process\":50}],50:[function(_dereq_,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],51:[function(_dereq_,module,exports){\n(function (global){\nvar now = _dereq_('performance-now')\n  , root = typeof window === 'undefined' ? global : window\n  , vendors = ['moz', 'webkit']\n  , suffix = 'AnimationFrame'\n  , raf = root['request' + suffix]\n  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\nfor(var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix]\n  caf = root[vendors[i] + 'Cancel' + suffix]\n      || root[vendors[i] + 'CancelRequest' + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif(!raf || !caf) {\n  var last = 0\n    , id = 0\n    , queue = []\n    , frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if(queue.length === 0) {\n      var _now = now()\n        , next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for(var i = 0; i < cp.length; i++) {\n          if(!cp[i].cancelled) {\n            try{\n              cp[i].callback(last)\n            } catch(e) {\n              setTimeout(function() { throw e }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for(var i = 0; i < queue.length; i++) {\n      if(queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nmodule.exports = function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\nmodule.exports.cancel = function() {\n  caf.apply(root, arguments)\n}\nmodule.exports.polyfill = function(object) {\n  if (!object) {\n    object = root;\n  }\n  object.requestAnimationFrame = raf\n  object.cancelAnimationFrame = caf\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"performance-now\":49}],52:[function(_dereq_,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = _dereq_('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar util = _dereq_('core-util-is');\nutil.inherits = _dereq_('inherits');\n/*</replacement>*/\n\nvar Readable = _dereq_('./_stream_readable');\nvar Writable = _dereq_('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\nvar keys = objectKeys(Writable.prototype);\nfor (var v = 0; v < keys.length; v++) {\n  var method = keys[v];\n  if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  pna.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});\n\nDuplex.prototype._destroy = function (err, cb) {\n  this.push(null);\n  this.end();\n\n  pna.nextTick(cb, err);\n};\n\nfunction forEach(xs, f) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    f(xs[i], i);\n  }\n}\n},{\"./_stream_readable\":54,\"./_stream_writable\":56,\"core-util-is\":14,\"inherits\":36,\"process-nextick-args\":60}],53:[function(_dereq_,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = _dereq_('./_stream_transform');\n\n/*<replacement>*/\nvar util = _dereq_('core-util-is');\nutil.inherits = _dereq_('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};\n},{\"./_stream_transform\":55,\"core-util-is\":14,\"inherits\":36}],54:[function(_dereq_,module,exports){\n(function (process,global){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = _dereq_('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = _dereq_('isarray');\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = _dereq_('events').EventEmitter;\n\nvar EElistenerCount = function (emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = _dereq_('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = _dereq_('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = _dereq_('core-util-is');\nutil.inherits = _dereq_('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar debugUtil = _dereq_('util');\nvar debug = void 0;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\nvar BufferList = _dereq_('./internal/streams/BufferList');\nvar destroyImpl = _dereq_('./internal/streams/destroy');\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream) {\n  Duplex = Duplex || _dereq_('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var readableHwm = options.readableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = _dereq_('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || _dereq_('./_stream_duplex');\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\n\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  this.push(null);\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new Error('stream.push() after EOF'));\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n    }\n  }\n\n  return needMoreData(state);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    stream.emit('data', chunk);\n    stream.read(0);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = _dereq_('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    pna.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('_read() is not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = { hasUnpiped: false };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, unpipeInfo);\n    }return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this, unpipeInfo);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        pna.nextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    pna.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    pna.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction forEach(xs, f) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    f(xs[i], i);\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}\n}).call(this,_dereq_('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./_stream_duplex\":52,\"./internal/streams/BufferList\":57,\"./internal/streams/destroy\":58,\"./internal/streams/stream\":59,\"_process\":50,\"core-util-is\":14,\"events\":24,\"inherits\":36,\"isarray\":44,\"process-nextick-args\":60,\"safe-buffer\":66,\"string_decoder/\":61,\"util\":6}],55:[function(_dereq_,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\n\nvar Duplex = _dereq_('./_stream_duplex');\n\n/*<replacement>*/\nvar util = _dereq_('core-util-is');\nutil.inherits = _dereq_('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) {\n    return this.emit('error', new Error('write callback called multiple times'));\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n\n  cb(er);\n\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function') {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('_transform() is not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  var _this2 = this;\n\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n    _this2.emit('close');\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}\n},{\"./_stream_duplex\":52,\"core-util-is\":14,\"inherits\":36}],56:[function(_dereq_,module,exports){\n(function (process,global){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = _dereq_('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar util = _dereq_('core-util-is');\nutil.inherits = _dereq_('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: _dereq_('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = _dereq_('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = _dereq_('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\nvar destroyImpl = _dereq_('./internal/streams/destroy');\n\nutil.inherits(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream) {\n  Duplex = Duplex || _dereq_('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var writableHwm = options.writableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function () {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function (object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function (object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || _dereq_('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\n    return new Writable(options);\n  }\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  pna.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    pna.nextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    pna.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    pna.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n      asyncWrite(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('_write() is not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      stream.emit('error', err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function') {\n      state.pendingcb++;\n      state.finalCalled = true;\n      pna.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n  if (state.corkedRequestsFree) {\n    state.corkedRequestsFree.next = corkReq;\n  } else {\n    state.corkedRequestsFree = corkReq;\n  }\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  get: function () {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\n\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  this.end();\n  cb(err);\n};\n}).call(this,_dereq_('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./_stream_duplex\":52,\"./internal/streams/destroy\":58,\"./internal/streams/stream\":59,\"_process\":50,\"core-util-is\":14,\"inherits\":36,\"process-nextick-args\":60,\"safe-buffer\":66,\"util-deprecate\":77}],57:[function(_dereq_,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Buffer = _dereq_('safe-buffer').Buffer;\nvar util = _dereq_('util');\n\nfunction copyBuffer(src, target, offset) {\n  src.copy(target, offset);\n}\n\nmodule.exports = function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  BufferList.prototype.push = function push(v) {\n    var entry = { data: v, next: null };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.unshift = function unshift(v) {\n    var entry = { data: v, next: this.head };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  BufferList.prototype.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  BufferList.prototype.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n    while (p = p.next) {\n      ret += s + p.data;\n    }return ret;\n  };\n\n  BufferList.prototype.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    if (this.length === 1) return this.head.data;\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n    return ret;\n  };\n\n  return BufferList;\n}();\n\nif (util && util.inspect && util.inspect.custom) {\n  module.exports.prototype[util.inspect.custom] = function () {\n    var obj = util.inspect({ length: this.length });\n    return this.constructor.name + ' ' + obj;\n  };\n}\n},{\"safe-buffer\":66,\"util\":6}],58:[function(_dereq_,module,exports){\n'use strict';\n\n/*<replacement>*/\n\nvar pna = _dereq_('process-nextick-args');\n/*</replacement>*/\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n      pna.nextTick(emitErrorNT, this, err);\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      pna.nextTick(emitErrorNT, _this, err);\n      if (_this._writableState) {\n        _this._writableState.errorEmitted = true;\n      }\n    } else if (cb) {\n      cb(err);\n    }\n  });\n\n  return this;\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};\n},{\"process-nextick-args\":60}],59:[function(_dereq_,module,exports){\nmodule.exports = _dereq_('events').EventEmitter;\n\n},{\"events\":24}],60:[function(_dereq_,module,exports){\n(function (process){\n'use strict';\n\nif (!process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = { nextTick: nextTick };\n} else {\n  module.exports = process\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n\n}).call(this,_dereq_('_process'))\n},{\"_process\":50}],61:[function(_dereq_,module,exports){\n'use strict';\n\nvar Buffer = _dereq_('safe-buffer').Buffer;\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return -1;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// UTF-8 replacement characters ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd'.repeat(p);\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd'.repeat(p + 1);\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd'.repeat(p + 2);\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character for each buffered byte of a (partial)\n// character needs to be added to the output.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd'.repeat(this.lastTotal - this.lastNeed);\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}\n},{\"safe-buffer\":66}],62:[function(_dereq_,module,exports){\nexports = module.exports = _dereq_('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = _dereq_('./lib/_stream_writable.js');\nexports.Duplex = _dereq_('./lib/_stream_duplex.js');\nexports.Transform = _dereq_('./lib/_stream_transform.js');\nexports.PassThrough = _dereq_('./lib/_stream_passthrough.js');\n\n},{\"./lib/_stream_duplex.js\":52,\"./lib/_stream_passthrough.js\":53,\"./lib/_stream_readable.js\":54,\"./lib/_stream_transform.js\":55,\"./lib/_stream_writable.js\":56}],63:[function(_dereq_,module,exports){\n'use strict';\n\nvar readystate = module.exports = _dereq_('./readystate')\n  , win = (new Function('return this'))()\n  , complete = 'complete'\n  , root = true\n  , doc = win.document\n  , html = doc.documentElement;\n\n(function wrapper() {\n  //\n  // Bail out early if the document is already fully loaded. This means that this\n  // script is loaded after the onload event.\n  //\n  if (complete === doc.readyState) {\n    return readystate.change(complete);\n  }\n\n  //\n  // Use feature detection to see what kind of browser environment we're dealing\n  // with. Old versions of Internet Explorer do not support the addEventListener\n  // interface so we can also safely assume that we need to fall back to polling.\n  //\n  var modern = !!doc.addEventListener\n    , prefix = modern ? '' : 'on'\n    , on = modern ? 'addEventListener' : 'attachEvent'\n    , off = modern ? 'removeEventListener' : 'detachEvent';\n\n  if (!modern && 'function' === typeof html.doScroll) {\n    try { root = !win.frameElement; }\n    catch (e) {}\n\n    if (root) (function polling() {\n      try { html.doScroll('left'); }\n      catch (e) { return setTimeout(polling, 50); }\n\n      readystate.change('interactive');\n    }());\n  }\n\n  /**\n   * Handle the various of event listener calls.\n   *\n   * @param {Event} evt Simple DOM event.\n   * @api private\n   */\n  function change(evt) {\n    evt = evt || win.event;\n\n    if ('readystatechange' === evt.type) {\n      readystate.change(doc.readyState);\n      if (complete !== doc.readyState) return;\n    }\n\n    if ('load' === evt.type) readystate.change('complete');\n    else readystate.change('interactive');\n\n    //\n    // House keeping, remove our assigned event listeners.\n    //\n    (evt.type === 'load' ? win : doc)[off](evt.type, change, false);\n  }\n\n  //\n  // Assign a shit load of event listeners so we can update our internal state.\n  //\n  doc[on](prefix +'DOMContentLoaded', change, false);\n  doc[on](prefix +'readystatechange', change, false);\n  win[on](prefix +'load', change, false);\n} ());\n\n\n},{\"./readystate\":64}],64:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Generate a new prototype method which will the given function once the\n * desired state has been reached. The returned function accepts 2 arguments:\n *\n * - fn: The assigned function which needs to be called.\n * - context: Context/this value of the function we need to execute.\n *\n * @param {String} state The state we need to operate upon.\n * @returns {Function}\n * @api private\n */\nfunction generate(state) {\n  return function proxy(fn, context) {\n    var rs = this;\n\n    if (rs.is(state)) {\n      setTimeout(function () {\n        fn.call(context, rs.readyState);\n      }, 0);\n    } else {\n      if (!rs._events[state]) rs._events[state] = [];\n      rs._events[state].push({ fn: fn, context: context });\n    }\n\n    return rs;\n  };\n}\n\n/**\n * RS (readyState) instance.\n *\n * @constructor\n * @api public\n */\nfunction RS() {\n  this.readyState = RS.UNKNOWN;\n  this._events = {};\n}\n\n/**\n * The environment can be in different states. The following states are\n * generated:\n *\n * - ALL:         The I don't really give a fuck state.\n * - UNKNOWN:     We got an unknown readyState we should start listening for events.\n * - LOADING:     Environment is currently loading.\n * - INTERACTIVE: Environment is ready for modification.\n * - COMPLETE:    All resources have been loaded.\n *\n * Please note that the order of the `states` string/array is of vital\n * importance as it's used in the readyState check.\n *\n * @type {Number}\n * @private\n */\nRS.states = 'ALL,UNKNOWN,LOADING,INTERACTIVE,COMPLETE'.split(',');\n\nfor (var s = 0, state; s < RS.states.length; s++) {\n  state = RS.states[s];\n\n  RS[state] = RS.prototype[state] = s;\n  RS.prototype[state.toLowerCase()] = generate(state);\n}\n\n/**\n * A change in the environment has been detected so we need to change our\n * readyState and call assigned event listeners and those of the previous\n * states.\n *\n * @param {Number} state The new readyState that we detected.\n * @returns {RS}\n * @api private\n */\nRS.prototype.change = function change(state) {\n  state = this.clean(state, true);\n\n  var j\n    , name\n    , i = 0\n    , listener\n    , rs = this\n    , previously = rs.readyState;\n\n  if (previously >= state) return rs;\n\n  rs.readyState = state;\n\n  for (; i < RS.states.length; i++) {\n    if (i > state) break;\n    name = RS.states[i];\n\n    if (name in rs._events) {\n      for (j = 0; j < rs._events[name].length; j++) {\n        listener = rs._events[name][j];\n        listener.fn.call(listener.context || rs, previously);\n      }\n\n      delete rs._events[name];\n    }\n  }\n\n  return rs;\n};\n\n/**\n * Check if we're currently in a given readyState.\n *\n * @param {String|Number} state The required readyState.\n * @returns {Boolean} Indication if this state has been reached.\n * @api public\n */\nRS.prototype.is = function is(state) {\n  return this.readyState >= this.clean(state, true);\n};\n\n/**\n * Transform a state to a number or toUpperCase.\n *\n * @param {Mixed} state State to transform.\n * @param {Boolean} nr Change to number.\n * @returns {Mixed}\n * @api public\n */\nRS.prototype.clean = function transform(state, nr) {\n  var type = typeof state;\n\n  if (nr) return 'number' !== type\n  ? +RS[state.toUpperCase()] || 0\n  : state;\n\n  return ('number' === type ? RS.states[state] : state).toUpperCase();\n};\n\n/**\n * Removes all event listeners. Useful when you want to unload readystatechange\n * completely so that it won't react to any events anymore. See\n * https://github.com/unshiftio/readystate/issues/8\n *\n * @returns {Function} rs so that calls can be chained.\n * @api public\n */\nRS.prototype.removeAllListeners = function removeAllListeners() {\n  this._events = {};\n  return this;\n}\n\n//\n// Expose the module.\n//\nmodule.exports = new RS();\n\n},{}],65:[function(_dereq_,module,exports){\n/**\n * request-frame - requestAnimationFrame & cancelAnimationFrame polyfill for optimal cross-browser development.\n * @version v1.5.3\n * @license MIT\n * Copyright Julien Etienne 2015 All Rights Reserved.\n */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.requestFrame = factory());\n}(this, (function () { 'use strict';\n\n/**\n * @param  {String} type - request | cancel | native.\n * @return {Function} Timing function.\n */\nfunction requestFrame(type) {\n    // The only vendor prefixes required.\n    var vendors = ['moz', 'webkit'];\n\n    // Disassembled timing function abbreviations.\n    var aF = 'AnimationFrame';\n    var rqAF = 'Request' + aF;\n\n    // Checks for firefox 4 - 10 function pair mismatch.\n    var mozRAF = window.mozRequestAnimationFrame;\n    var mozCAF = window.mozCancelAnimationFrame;\n    var hasMozMismatch = mozRAF && !mozCAF;\n\n    // Final assigned functions.\n    var assignedRequestAnimationFrame;\n    var assignedCancelAnimationFrame;\n\n    // Initial time of the timing lapse.\n    var previousTime = 0;\n\n    var requestFrameMain;\n\n    // Date.now polyfill, mainly for legacy IE versions.\n    if (!Date.now) {\n        Date.now = function () {\n            return new Date().getTime();\n        };\n    }\n\n    /**\n     * hasIOS6RequestAnimationFrameBug.\n     * @See {@Link https://gist.github.com/julienetie/86ac394ec41f1271ff0a}\n     * - for Commentary.\n     * @Copyright 2015 - Julien Etienne. \n     * @License: MIT.\n     */\n    function hasIOS6RequestAnimationFrameBug() {\n        var webkitRAF = window.webkitRequestAnimationFrame;\n        var rAF = window.requestAnimationFrame;\n\n        // CSS/ Device with max for iOS6 Devices.\n        var hasMobileDeviceWidth = screen.width <= 768 ? true : false;\n\n        // Only supports webkit prefixed requestAnimtionFrane.\n        var requiresWebkitprefix = !(webkitRAF && rAF);\n\n        // iOS6 webkit browsers don't support performance now.\n        var hasNoNavigationTiming = window.performance ? false : true;\n\n        var iOS6Notice = 'setTimeout is being used as a substitiue for \\n            requestAnimationFrame due to a bug within iOS 6 builds';\n\n        var hasIOS6Bug = requiresWebkitprefix && hasMobileDeviceWidth && hasNoNavigationTiming;\n\n        var bugCheckresults = function bugCheckresults(timingFnA, timingFnB, notice) {\n            if (timingFnA || timingFnB) {\n                console.warn(notice);\n                return true;\n            } else {\n                return false;\n            }\n        };\n\n        var displayResults = function displayResults(hasBug, hasBugNotice, webkitFn, nativeFn) {\n            if (hasBug) {\n                return bugCheckresults(webkitFn, nativeFn, hasBugNotice);\n            } else {\n                return false;\n            }\n        };\n\n        return displayResults(hasIOS6Bug, iOS6Notice, webkitRAF, rAF);\n    }\n\n    /**\n     * Native clearTimeout function.\n     * @return {Function}\n     */\n    function clearTimeoutWithId(id) {\n        clearTimeout(id);\n    }\n\n    /**\n     * Based on a polyfill by Erik, introduced by Paul Irish & \n     * further improved by Darius Bacon.\n     * @see  {@link http://www.paulirish.com/2011/\n     * requestanimationframe-for-smart-animating}\n     * @see  {@link https://github.com/darius/requestAnimationFrame/blob/\n     * master/requestAnimationFrame.js}\n     * @callback {Number} Timestamp.\n     * @return {Function} setTimeout Function.\n     */\n    function setTimeoutWithTimestamp(callback) {\n        var immediateTime = Date.now();\n        var lapsedTime = Math.max(previousTime + 16, immediateTime);\n        return setTimeout(function () {\n            callback(previousTime = lapsedTime);\n        }, lapsedTime - immediateTime);\n    }\n\n    /**\n     * Queries the native function, prefixed function \n     * or use the setTimeoutWithTimestamp function.\n     * @return {Function}\n     */\n    function queryRequestAnimationFrame() {\n        if (Array.prototype.filter) {\n            assignedRequestAnimationFrame = window['request' + aF] || window[vendors.filter(function (vendor) {\n                if (window[vendor + rqAF] !== undefined) return vendor;\n            }) + rqAF] || setTimeoutWithTimestamp;\n        } else {\n            return setTimeoutWithTimestamp;\n        }\n        if (!hasIOS6RequestAnimationFrameBug()) {\n            return assignedRequestAnimationFrame;\n        } else {\n            return setTimeoutWithTimestamp;\n        }\n    }\n\n    /**\n     * Queries the native function, prefixed function \n     * or use the clearTimeoutWithId function.\n     * @return {Function}\n     */\n    function queryCancelAnimationFrame() {\n        var cancellationNames = [];\n        if (Array.prototype.map) {\n            vendors.map(function (vendor) {\n                return ['Cancel', 'CancelRequest'].map(function (cancellationNamePrefix) {\n                    cancellationNames.push(vendor + cancellationNamePrefix + aF);\n                });\n            });\n        } else {\n            return clearTimeoutWithId;\n        }\n\n        /**\n         * Checks for the prefixed cancelAnimationFrame implementation.\n         * @param  {Array} prefixedNames - An array of the prefixed names. \n         * @param  {Number} i - Iteration start point.\n         * @return {Function} prefixed cancelAnimationFrame function.\n         */\n        function prefixedCancelAnimationFrame(prefixedNames, i) {\n            var cancellationFunction = void 0;\n            for (; i < prefixedNames.length; i++) {\n                if (window[prefixedNames[i]]) {\n                    cancellationFunction = window[prefixedNames[i]];\n                    break;\n                }\n            }\n            return cancellationFunction;\n        }\n\n        // Use truthly function\n        assignedCancelAnimationFrame = window['cancel' + aF] || prefixedCancelAnimationFrame(cancellationNames, 0) || clearTimeoutWithId;\n\n        // Check for iOS 6 bug\n        if (!hasIOS6RequestAnimationFrameBug()) {\n            return assignedCancelAnimationFrame;\n        } else {\n            return clearTimeoutWithId;\n        }\n    }\n\n    function getRequestFn() {\n        if (hasMozMismatch) {\n            return setTimeoutWithTimestamp;\n        } else {\n            return queryRequestAnimationFrame();\n        }\n    }\n\n    function getCancelFn() {\n        return queryCancelAnimationFrame();\n    }\n\n    function setNativeFn() {\n        if (hasMozMismatch) {\n            window.requestAnimationFrame = setTimeoutWithTimestamp;\n            window.cancelAnimationFrame = clearTimeoutWithId;\n        } else {\n            window.requestAnimationFrame = queryRequestAnimationFrame();\n            window.cancelAnimationFrame = queryCancelAnimationFrame();\n        }\n    }\n\n    /**\n     * The type value \"request\" singles out firefox 4 - 10 and \n     * assigns the setTimeout function if plausible.\n     */\n\n    switch (type) {\n        case 'request':\n        case '':\n            requestFrameMain = getRequestFn();\n            break;\n\n        case 'cancel':\n            requestFrameMain = getCancelFn();\n            break;\n\n        case 'native':\n            setNativeFn();\n            break;\n        default:\n            throw new Error('RequestFrame parameter is not a type.');\n    }\n    return requestFrameMain;\n}\n\nreturn requestFrame;\n\n})));\n\n},{}],66:[function(_dereq_,module,exports){\n/* eslint-disable node/no-deprecated-api */\nvar buffer = _dereq_('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n\n},{\"buffer\":8}],67:[function(_dereq_,module,exports){\nvar hasProp = Object.prototype.hasOwnProperty;\n\nfunction throwsMessage(err) {\n\treturn '[Throws: ' + (err ? err.message : '?') + ']';\n}\n\nfunction safeGetValueFromPropertyOnObject(obj, property) {\n\tif (hasProp.call(obj, property)) {\n\t\ttry {\n\t\t\treturn obj[property];\n\t\t}\n\t\tcatch (err) {\n\t\t\treturn throwsMessage(err);\n\t\t}\n\t}\n\n\treturn obj[property];\n}\n\nfunction ensureProperties(obj) {\n\tvar seen = [ ]; // store references to objects we have seen before\n\n\tfunction visit(obj) {\n\t\tif (obj === null || typeof obj !== 'object') {\n\t\t\treturn obj;\n\t\t}\n\n\t\tif (seen.indexOf(obj) !== -1) {\n\t\t\treturn '[Circular]';\n\t\t}\n\t\tseen.push(obj);\n\n\t\tif (typeof obj.toJSON === 'function') {\n\t\t\ttry {\n\t\t\t\treturn visit(obj.toJSON());\n\t\t\t} catch(err) {\n\t\t\t\treturn throwsMessage(err);\n\t\t\t}\n\t\t}\n\n\t\tif (Array.isArray(obj)) {\n\t\t\treturn obj.map(visit);\n\t\t}\n\n\t\treturn Object.keys(obj).reduce(function(result, prop) {\n\t\t\t// prevent faulty defined getter properties\n\t\t\tresult[prop] = visit(safeGetValueFromPropertyOnObject(obj, prop));\n\t\t\treturn result;\n\t\t}, {});\n\t};\n\n\treturn visit(obj);\n}\n\nmodule.exports = function(data, replacer, space) {\n\treturn JSON.stringify(ensureProperties(data), replacer, space);\n}\n\nmodule.exports.ensureProperties = ensureProperties;\n\n},{}],68:[function(_dereq_,module,exports){\nmodule.exports = shift\n\nfunction shift (stream) {\n  var rs = stream._readableState\n  if (!rs) return null\n  return rs.objectMode ? stream.read() : stream.read(getStateLength(rs))\n}\n\nfunction getStateLength (state) {\n  if (state.buffer.length) {\n    // Since node 6.3.0 state.buffer is a BufferList not an array\n    if (state.buffer.head) {\n      return state.buffer.head.data.length\n    }\n\n    return state.buffer[0].length\n  }\n\n  return state.length\n}\n\n},{}],69:[function(_dereq_,module,exports){\nfunction Agent() {\n  this._defaults = [];\n}\n\n[\"use\", \"on\", \"once\", \"set\", \"query\", \"type\", \"accept\", \"auth\", \"withCredentials\", \"sortQuery\", \"retry\", \"ok\", \"redirects\",\n \"timeout\", \"buffer\", \"serialize\", \"parse\", \"ca\", \"key\", \"pfx\", \"cert\"].forEach(function(fn) {\n  /** Default setting for all requests from this agent */\n  Agent.prototype[fn] = function(/*varargs*/) {\n    this._defaults.push({fn:fn, arguments:arguments});\n    return this;\n  }\n});\n\nAgent.prototype._setDefaults = function(req) {\n    this._defaults.forEach(function(def) {\n      req[def.fn].apply(req, def.arguments);\n    });\n};\n\nmodule.exports = Agent;\n\n},{}],70:[function(_dereq_,module,exports){\n/**\n * Root reference for iframes.\n */\n\nvar root;\nif (typeof window !== 'undefined') { // Browser window\n  root = window;\n} else if (typeof self !== 'undefined') { // Web Worker\n  root = self;\n} else { // Other environments\n  console.warn(\"Using browser-only version of superagent in non-browser environment\");\n  root = this;\n}\n\nvar Emitter = _dereq_('component-emitter');\nvar RequestBase = _dereq_('./request-base');\nvar isObject = _dereq_('./is-object');\nvar ResponseBase = _dereq_('./response-base');\nvar Agent = _dereq_('./agent-base');\n\n/**\n * Noop.\n */\n\nfunction noop(){};\n\n/**\n * Expose `request`.\n */\n\nvar request = exports = module.exports = function(method, url) {\n  // callback\n  if ('function' == typeof url) {\n    return new exports.Request('GET', method).end(url);\n  }\n\n  // url first\n  if (1 == arguments.length) {\n    return new exports.Request('GET', method);\n  }\n\n  return new exports.Request(method, url);\n}\n\nexports.Request = Request;\n\n/**\n * Determine XHR.\n */\n\nrequest.getXHR = function () {\n  if (root.XMLHttpRequest\n      && (!root.location || 'file:' != root.location.protocol\n          || !root.ActiveXObject)) {\n    return new XMLHttpRequest;\n  } else {\n    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}\n  }\n  throw Error(\"Browser-only version of superagent could not find XHR\");\n};\n\n/**\n * Removes leading and trailing whitespace, added to support IE.\n *\n * @param {String} s\n * @return {String}\n * @api private\n */\n\nvar trim = ''.trim\n  ? function(s) { return s.trim(); }\n  : function(s) { return s.replace(/(^\\s*|\\s*$)/g, ''); };\n\n/**\n * Serialize the given `obj`.\n *\n * @param {Object} obj\n * @return {String}\n * @api private\n */\n\nfunction serialize(obj) {\n  if (!isObject(obj)) return obj;\n  var pairs = [];\n  for (var key in obj) {\n    pushEncodedKeyValuePair(pairs, key, obj[key]);\n  }\n  return pairs.join('&');\n}\n\n/**\n * Helps 'serialize' with serializing arrays.\n * Mutates the pairs array.\n *\n * @param {Array} pairs\n * @param {String} key\n * @param {Mixed} val\n */\n\nfunction pushEncodedKeyValuePair(pairs, key, val) {\n  if (val != null) {\n    if (Array.isArray(val)) {\n      val.forEach(function(v) {\n        pushEncodedKeyValuePair(pairs, key, v);\n      });\n    } else if (isObject(val)) {\n      for(var subkey in val) {\n        pushEncodedKeyValuePair(pairs, key + '[' + subkey + ']', val[subkey]);\n      }\n    } else {\n      pairs.push(encodeURIComponent(key)\n        + '=' + encodeURIComponent(val));\n    }\n  } else if (val === null) {\n    pairs.push(encodeURIComponent(key));\n  }\n}\n\n/**\n * Expose serialization method.\n */\n\nrequest.serializeObject = serialize;\n\n/**\n  * Parse the given x-www-form-urlencoded `str`.\n  *\n  * @param {String} str\n  * @return {Object}\n  * @api private\n  */\n\nfunction parseString(str) {\n  var obj = {};\n  var pairs = str.split('&');\n  var pair;\n  var pos;\n\n  for (var i = 0, len = pairs.length; i < len; ++i) {\n    pair = pairs[i];\n    pos = pair.indexOf('=');\n    if (pos == -1) {\n      obj[decodeURIComponent(pair)] = '';\n    } else {\n      obj[decodeURIComponent(pair.slice(0, pos))] =\n        decodeURIComponent(pair.slice(pos + 1));\n    }\n  }\n\n  return obj;\n}\n\n/**\n * Expose parser.\n */\n\nrequest.parseString = parseString;\n\n/**\n * Default MIME type map.\n *\n *     superagent.types.xml = 'application/xml';\n *\n */\n\nrequest.types = {\n  html: 'text/html',\n  json: 'application/json',\n  xml: 'text/xml',\n  urlencoded: 'application/x-www-form-urlencoded',\n  'form': 'application/x-www-form-urlencoded',\n  'form-data': 'application/x-www-form-urlencoded'\n};\n\n/**\n * Default serialization map.\n *\n *     superagent.serialize['application/xml'] = function(obj){\n *       return 'generated xml here';\n *     };\n *\n */\n\nrequest.serialize = {\n  'application/x-www-form-urlencoded': serialize,\n  'application/json': JSON.stringify,\n};\n\n/**\n  * Default parsers.\n  *\n  *     superagent.parse['application/xml'] = function(str){\n  *       return { object parsed from str };\n  *     };\n  *\n  */\n\nrequest.parse = {\n  'application/x-www-form-urlencoded': parseString,\n  'application/json': JSON.parse,\n};\n\n/**\n * Parse the given header `str` into\n * an object containing the mapped fields.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction parseHeader(str) {\n  var lines = str.split(/\\r?\\n/);\n  var fields = {};\n  var index;\n  var line;\n  var field;\n  var val;\n\n  for (var i = 0, len = lines.length; i < len; ++i) {\n    line = lines[i];\n    index = line.indexOf(':');\n    if (index === -1) { // could be empty line, just skip it\n      continue;\n    }\n    field = line.slice(0, index).toLowerCase();\n    val = trim(line.slice(index + 1));\n    fields[field] = val;\n  }\n\n  return fields;\n}\n\n/**\n * Check if `mime` is json or has +json structured syntax suffix.\n *\n * @param {String} mime\n * @return {Boolean}\n * @api private\n */\n\nfunction isJSON(mime) {\n  // should match /json or +json\n  // but not /json-seq\n  return /[\\/+]json($|[^-\\w])/.test(mime);\n}\n\n/**\n * Initialize a new `Response` with the given `xhr`.\n *\n *  - set flags (.ok, .error, etc)\n *  - parse header\n *\n * Examples:\n *\n *  Aliasing `superagent` as `request` is nice:\n *\n *      request = superagent;\n *\n *  We can use the promise-like API, or pass callbacks:\n *\n *      request.get('/').end(function(res){});\n *      request.get('/', function(res){});\n *\n *  Sending data can be chained:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' })\n *        .end(function(res){});\n *\n *  Or passed to `.send()`:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' }, function(res){});\n *\n *  Or passed to `.post()`:\n *\n *      request\n *        .post('/user', { name: 'tj' })\n *        .end(function(res){});\n *\n * Or further reduced to a single call for simple cases:\n *\n *      request\n *        .post('/user', { name: 'tj' }, function(res){});\n *\n * @param {XMLHTTPRequest} xhr\n * @param {Object} options\n * @api private\n */\n\nfunction Response(req) {\n  this.req = req;\n  this.xhr = this.req.xhr;\n  // responseText is accessible only if responseType is '' or 'text' and on older browsers\n  this.text = ((this.req.method !='HEAD' && (this.xhr.responseType === '' || this.xhr.responseType === 'text')) || typeof this.xhr.responseType === 'undefined')\n     ? this.xhr.responseText\n     : null;\n  this.statusText = this.req.xhr.statusText;\n  var status = this.xhr.status;\n  // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n  if (status === 1223) {\n    status = 204;\n  }\n  this._setStatusProperties(status);\n  this.header = this.headers = parseHeader(this.xhr.getAllResponseHeaders());\n  // getAllResponseHeaders sometimes falsely returns \"\" for CORS requests, but\n  // getResponseHeader still works. so we get content-type even if getting\n  // other headers fails.\n  this.header['content-type'] = this.xhr.getResponseHeader('content-type');\n  this._setHeaderProperties(this.header);\n\n  if (null === this.text && req._responseType) {\n    this.body = this.xhr.response;\n  } else {\n    this.body = this.req.method != 'HEAD'\n      ? this._parseBody(this.text ? this.text : this.xhr.response)\n      : null;\n  }\n}\n\nResponseBase(Response.prototype);\n\n/**\n * Parse the given body `str`.\n *\n * Used for auto-parsing of bodies. Parsers\n * are defined on the `superagent.parse` object.\n *\n * @param {String} str\n * @return {Mixed}\n * @api private\n */\n\nResponse.prototype._parseBody = function(str) {\n  var parse = request.parse[this.type];\n  if (this.req._parser) {\n    return this.req._parser(this, str);\n  }\n  if (!parse && isJSON(this.type)) {\n    parse = request.parse['application/json'];\n  }\n  return parse && str && (str.length || str instanceof Object)\n    ? parse(str)\n    : null;\n};\n\n/**\n * Return an `Error` representative of this response.\n *\n * @return {Error}\n * @api public\n */\n\nResponse.prototype.toError = function(){\n  var req = this.req;\n  var method = req.method;\n  var url = req.url;\n\n  var msg = 'cannot ' + method + ' ' + url + ' (' + this.status + ')';\n  var err = new Error(msg);\n  err.status = this.status;\n  err.method = method;\n  err.url = url;\n\n  return err;\n};\n\n/**\n * Expose `Response`.\n */\n\nrequest.Response = Response;\n\n/**\n * Initialize a new `Request` with the given `method` and `url`.\n *\n * @param {String} method\n * @param {String} url\n * @api public\n */\n\nfunction Request(method, url) {\n  var self = this;\n  this._query = this._query || [];\n  this.method = method;\n  this.url = url;\n  this.header = {}; // preserves header name case\n  this._header = {}; // coerces header names to lowercase\n  this.on('end', function(){\n    var err = null;\n    var res = null;\n\n    try {\n      res = new Response(self);\n    } catch(e) {\n      err = new Error('Parser is unable to parse the response');\n      err.parse = true;\n      err.original = e;\n      // issue #675: return the raw response if the response parsing fails\n      if (self.xhr) {\n        // ie9 doesn't have 'response' property\n        err.rawResponse = typeof self.xhr.responseType == 'undefined' ? self.xhr.responseText : self.xhr.response;\n        // issue #876: return the http status code if the response parsing fails\n        err.status = self.xhr.status ? self.xhr.status : null;\n        err.statusCode = err.status; // backwards-compat only\n      } else {\n        err.rawResponse = null;\n        err.status = null;\n      }\n\n      return self.callback(err);\n    }\n\n    self.emit('response', res);\n\n    var new_err;\n    try {\n      if (!self._isResponseOK(res)) {\n        new_err = new Error(res.statusText || 'Unsuccessful HTTP response');\n      }\n    } catch(custom_err) {\n      new_err = custom_err; // ok() callback can throw\n    }\n\n    // #1000 don't catch errors from the callback to avoid double calling it\n    if (new_err) {\n      new_err.original = err;\n      new_err.response = res;\n      new_err.status = res.status;\n      self.callback(new_err, res);\n    } else {\n      self.callback(null, res);\n    }\n  });\n}\n\n/**\n * Mixin `Emitter` and `RequestBase`.\n */\n\nEmitter(Request.prototype);\nRequestBase(Request.prototype);\n\n/**\n * Set Content-Type to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.xml = 'application/xml';\n *\n *      request.post('/')\n *        .type('xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n *      request.post('/')\n *        .type('application/xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n * @param {String} type\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.type = function(type){\n  this.set('Content-Type', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Accept to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.json = 'application/json';\n *\n *      request.get('/agent')\n *        .accept('json')\n *        .end(callback);\n *\n *      request.get('/agent')\n *        .accept('application/json')\n *        .end(callback);\n *\n * @param {String} accept\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.accept = function(type){\n  this.set('Accept', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Authorization field value with `user` and `pass`.\n *\n * @param {String} user\n * @param {String} [pass] optional in case of using 'bearer' as type\n * @param {Object} options with 'type' property 'auto', 'basic' or 'bearer' (default 'basic')\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.auth = function(user, pass, options){\n  if (1 === arguments.length) pass = '';\n  if (typeof pass === 'object' && pass !== null) { // pass is optional and can be replaced with options\n    options = pass;\n    pass = '';\n  }\n  if (!options) {\n    options = {\n      type: 'function' === typeof btoa ? 'basic' : 'auto',\n    };\n  }\n\n  var encoder = function(string) {\n    if ('function' === typeof btoa) {\n      return btoa(string);\n    }\n    throw new Error('Cannot use basic auth, btoa is not a function');\n  };\n\n  return this._auth(user, pass, options, encoder);\n};\n\n/**\n * Add query-string `val`.\n *\n * Examples:\n *\n *   request.get('/shoes')\n *     .query('size=10')\n *     .query({ color: 'blue' })\n *\n * @param {Object|String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.query = function(val){\n  if ('string' != typeof val) val = serialize(val);\n  if (val) this._query.push(val);\n  return this;\n};\n\n/**\n * Queue the given `file` as an attachment to the specified `field`,\n * with optional `options` (or filename).\n *\n * ``` js\n * request.post('/upload')\n *   .attach('content', new Blob(['<a id=\"a\"><b id=\"b\">hey!</b></a>'], { type: \"text/html\"}))\n *   .end(callback);\n * ```\n *\n * @param {String} field\n * @param {Blob|File} file\n * @param {String|Object} options\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.attach = function(field, file, options){\n  if (file) {\n    if (this._data) {\n      throw Error(\"superagent can't mix .send() and .attach()\");\n    }\n\n    this._getFormData().append(field, file, options || file.name);\n  }\n  return this;\n};\n\nRequest.prototype._getFormData = function(){\n  if (!this._formData) {\n    this._formData = new root.FormData();\n  }\n  return this._formData;\n};\n\n/**\n * Invoke the callback with `err` and `res`\n * and handle arity check.\n *\n * @param {Error} err\n * @param {Response} res\n * @api private\n */\n\nRequest.prototype.callback = function(err, res){\n  if (this._shouldRetry(err, res)) {\n    return this._retry();\n  }\n\n  var fn = this._callback;\n  this.clearTimeout();\n\n  if (err) {\n    if (this._maxRetries) err.retries = this._retries - 1;\n    this.emit('error', err);\n  }\n\n  fn(err, res);\n};\n\n/**\n * Invoke callback with x-domain error.\n *\n * @api private\n */\n\nRequest.prototype.crossDomainError = function(){\n  var err = new Error('Request has been terminated\\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.');\n  err.crossDomain = true;\n\n  err.status = this.status;\n  err.method = this.method;\n  err.url = this.url;\n\n  this.callback(err);\n};\n\n// This only warns, because the request is still likely to work\nRequest.prototype.buffer = Request.prototype.ca = Request.prototype.agent = function(){\n  console.warn(\"This is not supported in browser version of superagent\");\n  return this;\n};\n\n// This throws, because it can't send/receive data as expected\nRequest.prototype.pipe = Request.prototype.write = function(){\n  throw Error(\"Streaming is not supported in browser version of superagent\");\n};\n\n/**\n * Check if `obj` is a host object,\n * we don't want to serialize these :)\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\nRequest.prototype._isHost = function _isHost(obj) {\n  // Native objects stringify to [object File], [object Blob], [object FormData], etc.\n  return obj && 'object' === typeof obj && !Array.isArray(obj) && Object.prototype.toString.call(obj) !== '[object Object]';\n}\n\n/**\n * Initiate request, invoking callback `fn(res)`\n * with an instanceof `Response`.\n *\n * @param {Function} fn\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.end = function(fn){\n  if (this._endCalled) {\n    console.warn(\"Warning: .end() was called twice. This is not supported in superagent\");\n  }\n  this._endCalled = true;\n\n  // store callback\n  this._callback = fn || noop;\n\n  // querystring\n  this._finalizeQueryString();\n\n  return this._end();\n};\n\nRequest.prototype._end = function() {\n  var self = this;\n  var xhr = (this.xhr = request.getXHR());\n  var data = this._formData || this._data;\n\n  this._setTimeouts();\n\n  // state change\n  xhr.onreadystatechange = function(){\n    var readyState = xhr.readyState;\n    if (readyState >= 2 && self._responseTimeoutTimer) {\n      clearTimeout(self._responseTimeoutTimer);\n    }\n    if (4 != readyState) {\n      return;\n    }\n\n    // In IE9, reads to any property (e.g. status) off of an aborted XHR will\n    // result in the error \"Could not complete the operation due to error c00c023f\"\n    var status;\n    try { status = xhr.status } catch(e) { status = 0; }\n\n    if (!status) {\n      if (self.timedout || self._aborted) return;\n      return self.crossDomainError();\n    }\n    self.emit('end');\n  };\n\n  // progress\n  var handleProgress = function(direction, e) {\n    if (e.total > 0) {\n      e.percent = e.loaded / e.total * 100;\n    }\n    e.direction = direction;\n    self.emit('progress', e);\n  };\n  if (this.hasListeners('progress')) {\n    try {\n      xhr.onprogress = handleProgress.bind(null, 'download');\n      if (xhr.upload) {\n        xhr.upload.onprogress = handleProgress.bind(null, 'upload');\n      }\n    } catch(e) {\n      // Accessing xhr.upload fails in IE from a web worker, so just pretend it doesn't exist.\n      // Reported here:\n      // https://connect.microsoft.com/IE/feedback/details/837245/xmlhttprequest-upload-throws-invalid-argument-when-used-from-web-worker-context\n    }\n  }\n\n  // initiate request\n  try {\n    if (this.username && this.password) {\n      xhr.open(this.method, this.url, true, this.username, this.password);\n    } else {\n      xhr.open(this.method, this.url, true);\n    }\n  } catch (err) {\n    // see #1149\n    return this.callback(err);\n  }\n\n  // CORS\n  if (this._withCredentials) xhr.withCredentials = true;\n\n  // body\n  if (!this._formData && 'GET' != this.method && 'HEAD' != this.method && 'string' != typeof data && !this._isHost(data)) {\n    // serialize stuff\n    var contentType = this._header['content-type'];\n    var serialize = this._serializer || request.serialize[contentType ? contentType.split(';')[0] : ''];\n    if (!serialize && isJSON(contentType)) {\n      serialize = request.serialize['application/json'];\n    }\n    if (serialize) data = serialize(data);\n  }\n\n  // set header fields\n  for (var field in this.header) {\n    if (null == this.header[field]) continue;\n\n    if (this.header.hasOwnProperty(field))\n      xhr.setRequestHeader(field, this.header[field]);\n  }\n\n  if (this._responseType) {\n    xhr.responseType = this._responseType;\n  }\n\n  // send stuff\n  this.emit('request', this);\n\n  // IE11 xhr.send(undefined) sends 'undefined' string as POST payload (instead of nothing)\n  // We need null here if data is undefined\n  xhr.send(typeof data !== 'undefined' ? data : null);\n  return this;\n};\n\nrequest.agent = function() {\n  return new Agent();\n};\n\n[\"GET\", \"POST\", \"OPTIONS\", \"PATCH\", \"PUT\", \"DELETE\"].forEach(function(method) {\n  Agent.prototype[method.toLowerCase()] = function(url, fn) {\n    var req = new request.Request(method, url);\n    this._setDefaults(req);\n    if (fn) {\n      req.end(fn);\n    }\n    return req;\n  };\n});\n\nAgent.prototype.del = Agent.prototype['delete'];\n\n/**\n * GET `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.get = function(url, data, fn) {\n  var req = request('GET', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.query(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * HEAD `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.head = function(url, data, fn) {\n  var req = request('HEAD', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.query(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * OPTIONS query to `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.options = function(url, data, fn) {\n  var req = request('OPTIONS', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * DELETE `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nfunction del(url, data, fn) {\n  var req = request('DELETE', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n}\n\nrequest['del'] = del;\nrequest['delete'] = del;\n\n/**\n * PATCH `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.patch = function(url, data, fn) {\n  var req = request('PATCH', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * POST `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.post = function(url, data, fn) {\n  var req = request('POST', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * PUT `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.put = function(url, data, fn) {\n  var req = request('PUT', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n},{\"./agent-base\":69,\"./is-object\":71,\"./request-base\":72,\"./response-base\":73,\"component-emitter\":12}],71:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Check if `obj` is an object.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isObject(obj) {\n  return null !== obj && 'object' === typeof obj;\n}\n\nmodule.exports = isObject;\n\n},{}],72:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Module of mixed-in functions shared between node and client code\n */\nvar isObject = _dereq_('./is-object');\n\n/**\n * Expose `RequestBase`.\n */\n\nmodule.exports = RequestBase;\n\n/**\n * Initialize a new `RequestBase`.\n *\n * @api public\n */\n\nfunction RequestBase(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the prototype properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in RequestBase.prototype) {\n    obj[key] = RequestBase.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Clear previous timeout.\n *\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.clearTimeout = function _clearTimeout(){\n  clearTimeout(this._timer);\n  clearTimeout(this._responseTimeoutTimer);\n  delete this._timer;\n  delete this._responseTimeoutTimer;\n  return this;\n};\n\n/**\n * Override default response body parser\n *\n * This function will be called to convert incoming data into request.body\n *\n * @param {Function}\n * @api public\n */\n\nRequestBase.prototype.parse = function parse(fn){\n  this._parser = fn;\n  return this;\n};\n\n/**\n * Set format of binary response body.\n * In browser valid formats are 'blob' and 'arraybuffer',\n * which return Blob and ArrayBuffer, respectively.\n *\n * In Node all values result in Buffer.\n *\n * Examples:\n *\n *      req.get('/')\n *        .responseType('blob')\n *        .end(callback);\n *\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.responseType = function(val){\n  this._responseType = val;\n  return this;\n};\n\n/**\n * Override default request body serializer\n *\n * This function will be called to convert data set via .send or .attach into payload to send\n *\n * @param {Function}\n * @api public\n */\n\nRequestBase.prototype.serialize = function serialize(fn){\n  this._serializer = fn;\n  return this;\n};\n\n/**\n * Set timeouts.\n *\n * - response timeout is time between sending request and receiving the first byte of the response. Includes DNS and connection time.\n * - deadline is the time from start of the request to receiving response body in full. If the deadline is too short large files may not load at all on slow connections.\n *\n * Value of 0 or false means no timeout.\n *\n * @param {Number|Object} ms or {response, deadline}\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.timeout = function timeout(options){\n  if (!options || 'object' !== typeof options) {\n    this._timeout = options;\n    this._responseTimeout = 0;\n    return this;\n  }\n\n  for(var option in options) {\n    switch(option) {\n      case 'deadline':\n        this._timeout = options.deadline;\n        break;\n      case 'response':\n        this._responseTimeout = options.response;\n        break;\n      default:\n        console.warn(\"Unknown timeout option\", option);\n    }\n  }\n  return this;\n};\n\n/**\n * Set number of retry attempts on error.\n *\n * Failed requests will be retried 'count' times if timeout or err.code >= 500.\n *\n * @param {Number} count\n * @param {Function} [fn]\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.retry = function retry(count, fn){\n  // Default to 1 if no count passed or true\n  if (arguments.length === 0 || count === true) count = 1;\n  if (count <= 0) count = 0;\n  this._maxRetries = count;\n  this._retries = 0;\n  this._retryCallback = fn;\n  return this;\n};\n\nvar ERROR_CODES = [\n  'ECONNRESET',\n  'ETIMEDOUT',\n  'EADDRINFO',\n  'ESOCKETTIMEDOUT'\n];\n\n/**\n * Determine if a request should be retried.\n * (Borrowed from segmentio/superagent-retry)\n *\n * @param {Error} err\n * @param {Response} [res]\n * @returns {Boolean}\n */\nRequestBase.prototype._shouldRetry = function(err, res) {\n  if (!this._maxRetries || this._retries++ >= this._maxRetries) {\n    return false;\n  }\n  if (this._retryCallback) {\n    try {\n      var override = this._retryCallback(err, res);\n      if (override === true) return true;\n      if (override === false) return false;\n      // undefined falls back to defaults\n    } catch(e) {\n      console.error(e);\n    }\n  }\n  if (res && res.status && res.status >= 500 && res.status != 501) return true;\n  if (err) {\n    if (err.code && ~ERROR_CODES.indexOf(err.code)) return true;\n    // Superagent timeout\n    if (err.timeout && err.code == 'ECONNABORTED') return true;\n    if (err.crossDomain) return true;\n  }\n  return false;\n};\n\n/**\n * Retry request\n *\n * @return {Request} for chaining\n * @api private\n */\n\nRequestBase.prototype._retry = function() {\n\n  this.clearTimeout();\n\n  // node\n  if (this.req) {\n    this.req = null;\n    this.req = this.request();\n  }\n\n  this._aborted = false;\n  this.timedout = false;\n\n  return this._end();\n};\n\n/**\n * Promise support\n *\n * @param {Function} resolve\n * @param {Function} [reject]\n * @return {Request}\n */\n\nRequestBase.prototype.then = function then(resolve, reject) {\n  if (!this._fullfilledPromise) {\n    var self = this;\n    if (this._endCalled) {\n      console.warn(\"Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises\");\n    }\n    this._fullfilledPromise = new Promise(function(innerResolve, innerReject) {\n      self.end(function(err, res) {\n        if (err) innerReject(err);\n        else innerResolve(res);\n      });\n    });\n  }\n  return this._fullfilledPromise.then(resolve, reject);\n};\n\nRequestBase.prototype.catch = function(cb) {\n  return this.then(undefined, cb);\n};\n\n/**\n * Allow for extension\n */\n\nRequestBase.prototype.use = function use(fn) {\n  fn(this);\n  return this;\n};\n\nRequestBase.prototype.ok = function(cb) {\n  if ('function' !== typeof cb) throw Error(\"Callback required\");\n  this._okCallback = cb;\n  return this;\n};\n\nRequestBase.prototype._isResponseOK = function(res) {\n  if (!res) {\n    return false;\n  }\n\n  if (this._okCallback) {\n    return this._okCallback(res);\n  }\n\n  return res.status >= 200 && res.status < 300;\n};\n\n/**\n * Get request header `field`.\n * Case-insensitive.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nRequestBase.prototype.get = function(field){\n  return this._header[field.toLowerCase()];\n};\n\n/**\n * Get case-insensitive header `field` value.\n * This is a deprecated internal API. Use `.get(field)` instead.\n *\n * (getHeader is no longer used internally by the superagent code base)\n *\n * @param {String} field\n * @return {String}\n * @api private\n * @deprecated\n */\n\nRequestBase.prototype.getHeader = RequestBase.prototype.get;\n\n/**\n * Set header `field` to `val`, or multiple fields with one object.\n * Case-insensitive.\n *\n * Examples:\n *\n *      req.get('/')\n *        .set('Accept', 'application/json')\n *        .set('X-API-Key', 'foobar')\n *        .end(callback);\n *\n *      req.get('/')\n *        .set({ Accept: 'application/json', 'X-API-Key': 'foobar' })\n *        .end(callback);\n *\n * @param {String|Object} field\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.set = function(field, val){\n  if (isObject(field)) {\n    for (var key in field) {\n      this.set(key, field[key]);\n    }\n    return this;\n  }\n  this._header[field.toLowerCase()] = val;\n  this.header[field] = val;\n  return this;\n};\n\n/**\n * Remove header `field`.\n * Case-insensitive.\n *\n * Example:\n *\n *      req.get('/')\n *        .unset('User-Agent')\n *        .end(callback);\n *\n * @param {String} field\n */\nRequestBase.prototype.unset = function(field){\n  delete this._header[field.toLowerCase()];\n  delete this.header[field];\n  return this;\n};\n\n/**\n * Write the field `name` and `val`, or multiple fields with one object\n * for \"multipart/form-data\" request bodies.\n *\n * ``` js\n * request.post('/upload')\n *   .field('foo', 'bar')\n *   .end(callback);\n *\n * request.post('/upload')\n *   .field({ foo: 'bar', baz: 'qux' })\n *   .end(callback);\n * ```\n *\n * @param {String|Object} name\n * @param {String|Blob|File|Buffer|fs.ReadStream} val\n * @return {Request} for chaining\n * @api public\n */\nRequestBase.prototype.field = function(name, val) {\n  // name should be either a string or an object.\n  if (null === name || undefined === name) {\n    throw new Error('.field(name, val) name can not be empty');\n  }\n\n  if (this._data) {\n    console.error(\".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()\");\n  }\n\n  if (isObject(name)) {\n    for (var key in name) {\n      this.field(key, name[key]);\n    }\n    return this;\n  }\n\n  if (Array.isArray(val)) {\n    for (var i in val) {\n      this.field(name, val[i]);\n    }\n    return this;\n  }\n\n  // val should be defined now\n  if (null === val || undefined === val) {\n    throw new Error('.field(name, val) val can not be empty');\n  }\n  if ('boolean' === typeof val) {\n    val = '' + val;\n  }\n  this._getFormData().append(name, val);\n  return this;\n};\n\n/**\n * Abort the request, and clear potential timeout.\n *\n * @return {Request}\n * @api public\n */\nRequestBase.prototype.abort = function(){\n  if (this._aborted) {\n    return this;\n  }\n  this._aborted = true;\n  this.xhr && this.xhr.abort(); // browser\n  this.req && this.req.abort(); // node\n  this.clearTimeout();\n  this.emit('abort');\n  return this;\n};\n\nRequestBase.prototype._auth = function(user, pass, options, base64Encoder) {\n  switch (options.type) {\n    case 'basic':\n      this.set('Authorization', 'Basic ' + base64Encoder(user + ':' + pass));\n      break;\n\n    case 'auto':\n      this.username = user;\n      this.password = pass;\n      break;\n\n    case 'bearer': // usage would be .auth(accessToken, { type: 'bearer' })\n      this.set('Authorization', 'Bearer ' + user);\n      break;\n  }\n  return this;\n};\n\n/**\n * Enable transmission of cookies with x-domain requests.\n *\n * Note that for this to work the origin must not be\n * using \"Access-Control-Allow-Origin\" with a wildcard,\n * and also must set \"Access-Control-Allow-Credentials\"\n * to \"true\".\n *\n * @api public\n */\n\nRequestBase.prototype.withCredentials = function(on) {\n  // This is browser-only functionality. Node side is no-op.\n  if (on == undefined) on = true;\n  this._withCredentials = on;\n  return this;\n};\n\n/**\n * Set the max redirects to `n`. Does noting in browser XHR implementation.\n *\n * @param {Number} n\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.redirects = function(n){\n  this._maxRedirects = n;\n  return this;\n};\n\n/**\n * Maximum size of buffered response body, in bytes. Counts uncompressed size.\n * Default 200MB.\n *\n * @param {Number} n\n * @return {Request} for chaining\n */\nRequestBase.prototype.maxResponseSize = function(n){\n  if ('number' !== typeof n) {\n    throw TypeError(\"Invalid argument\");\n  }\n  this._maxResponseSize = n;\n  return this;\n};\n\n/**\n * Convert to a plain javascript object (not JSON string) of scalar properties.\n * Note as this method is designed to return a useful non-this value,\n * it cannot be chained.\n *\n * @return {Object} describing method, url, and data of this request\n * @api public\n */\n\nRequestBase.prototype.toJSON = function() {\n  return {\n    method: this.method,\n    url: this.url,\n    data: this._data,\n    headers: this._header,\n  };\n};\n\n/**\n * Send `data` as the request body, defaulting the `.type()` to \"json\" when\n * an object is given.\n *\n * Examples:\n *\n *       // manual json\n *       request.post('/user')\n *         .type('json')\n *         .send('{\"name\":\"tj\"}')\n *         .end(callback)\n *\n *       // auto json\n *       request.post('/user')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // manual x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send('name=tj')\n *         .end(callback)\n *\n *       // auto x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // defaults to x-www-form-urlencoded\n *      request.post('/user')\n *        .send('name=tobi')\n *        .send('species=ferret')\n *        .end(callback)\n *\n * @param {String|Object} data\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.send = function(data){\n  var isObj = isObject(data);\n  var type = this._header['content-type'];\n\n  if (this._formData) {\n    console.error(\".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()\");\n  }\n\n  if (isObj && !this._data) {\n    if (Array.isArray(data)) {\n      this._data = [];\n    } else if (!this._isHost(data)) {\n      this._data = {};\n    }\n  } else if (data && this._data && this._isHost(this._data)) {\n    throw Error(\"Can't merge these send calls\");\n  }\n\n  // merge\n  if (isObj && isObject(this._data)) {\n    for (var key in data) {\n      this._data[key] = data[key];\n    }\n  } else if ('string' == typeof data) {\n    // default to x-www-form-urlencoded\n    if (!type) this.type('form');\n    type = this._header['content-type'];\n    if ('application/x-www-form-urlencoded' == type) {\n      this._data = this._data\n        ? this._data + '&' + data\n        : data;\n    } else {\n      this._data = (this._data || '') + data;\n    }\n  } else {\n    this._data = data;\n  }\n\n  if (!isObj || this._isHost(data)) {\n    return this;\n  }\n\n  // default to json\n  if (!type) this.type('json');\n  return this;\n};\n\n/**\n * Sort `querystring` by the sort function\n *\n *\n * Examples:\n *\n *       // default order\n *       request.get('/user')\n *         .query('name=Nick')\n *         .query('search=Manny')\n *         .sortQuery()\n *         .end(callback)\n *\n *       // customized sort function\n *       request.get('/user')\n *         .query('name=Nick')\n *         .query('search=Manny')\n *         .sortQuery(function(a, b){\n *           return a.length - b.length;\n *         })\n *         .end(callback)\n *\n *\n * @param {Function} sort\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.sortQuery = function(sort) {\n  // _sort default to true but otherwise can be a function or boolean\n  this._sort = typeof sort === 'undefined' ? true : sort;\n  return this;\n};\n\n/**\n * Compose querystring to append to req.url\n *\n * @api private\n */\nRequestBase.prototype._finalizeQueryString = function(){\n  var query = this._query.join('&');\n  if (query) {\n    this.url += (this.url.indexOf('?') >= 0 ? '&' : '?') + query;\n  }\n  this._query.length = 0; // Makes the call idempotent\n\n  if (this._sort) {\n    var index = this.url.indexOf('?');\n    if (index >= 0) {\n      var queryArr = this.url.substring(index + 1).split('&');\n      if ('function' === typeof this._sort) {\n        queryArr.sort(this._sort);\n      } else {\n        queryArr.sort();\n      }\n      this.url = this.url.substring(0, index) + '?' + queryArr.join('&');\n    }\n  }\n};\n\n// For backwards compat only\nRequestBase.prototype._appendQueryString = function() {console.trace(\"Unsupported\");}\n\n/**\n * Invoke callback with timeout error.\n *\n * @api private\n */\n\nRequestBase.prototype._timeoutError = function(reason, timeout, errno){\n  if (this._aborted) {\n    return;\n  }\n  var err = new Error(reason + timeout + 'ms exceeded');\n  err.timeout = timeout;\n  err.code = 'ECONNABORTED';\n  err.errno = errno;\n  this.timedout = true;\n  this.abort();\n  this.callback(err);\n};\n\nRequestBase.prototype._setTimeouts = function() {\n  var self = this;\n\n  // deadline\n  if (this._timeout && !this._timer) {\n    this._timer = setTimeout(function(){\n      self._timeoutError('Timeout of ', self._timeout, 'ETIME');\n    }, this._timeout);\n  }\n  // response timeout\n  if (this._responseTimeout && !this._responseTimeoutTimer) {\n    this._responseTimeoutTimer = setTimeout(function(){\n      self._timeoutError('Response timeout of ', self._responseTimeout, 'ETIMEDOUT');\n    }, this._responseTimeout);\n  }\n};\n\n},{\"./is-object\":71}],73:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar utils = _dereq_('./utils');\n\n/**\n * Expose `ResponseBase`.\n */\n\nmodule.exports = ResponseBase;\n\n/**\n * Initialize a new `ResponseBase`.\n *\n * @api public\n */\n\nfunction ResponseBase(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the prototype properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in ResponseBase.prototype) {\n    obj[key] = ResponseBase.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Get case-insensitive `field` value.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nResponseBase.prototype.get = function(field) {\n  return this.header[field.toLowerCase()];\n};\n\n/**\n * Set header related properties:\n *\n *   - `.type` the content type without params\n *\n * A response of \"Content-Type: text/plain; charset=utf-8\"\n * will provide you with a `.type` of \"text/plain\".\n *\n * @param {Object} header\n * @api private\n */\n\nResponseBase.prototype._setHeaderProperties = function(header){\n    // TODO: moar!\n    // TODO: make this a util\n\n    // content-type\n    var ct = header['content-type'] || '';\n    this.type = utils.type(ct);\n\n    // params\n    var params = utils.params(ct);\n    for (var key in params) this[key] = params[key];\n\n    this.links = {};\n\n    // links\n    try {\n        if (header.link) {\n            this.links = utils.parseLinks(header.link);\n        }\n    } catch (err) {\n        // ignore\n    }\n};\n\n/**\n * Set flags such as `.ok` based on `status`.\n *\n * For example a 2xx response will give you a `.ok` of __true__\n * whereas 5xx will be __false__ and `.error` will be __true__. The\n * `.clientError` and `.serverError` are also available to be more\n * specific, and `.statusType` is the class of error ranging from 1..5\n * sometimes useful for mapping respond colors etc.\n *\n * \"sugar\" properties are also defined for common cases. Currently providing:\n *\n *   - .noContent\n *   - .badRequest\n *   - .unauthorized\n *   - .notAcceptable\n *   - .notFound\n *\n * @param {Number} status\n * @api private\n */\n\nResponseBase.prototype._setStatusProperties = function(status){\n    var type = status / 100 | 0;\n\n    // status / class\n    this.status = this.statusCode = status;\n    this.statusType = type;\n\n    // basics\n    this.info = 1 == type;\n    this.ok = 2 == type;\n    this.redirect = 3 == type;\n    this.clientError = 4 == type;\n    this.serverError = 5 == type;\n    this.error = (4 == type || 5 == type)\n        ? this.toError()\n        : false;\n\n    // sugar\n    this.accepted = 202 == status;\n    this.noContent = 204 == status;\n    this.badRequest = 400 == status;\n    this.unauthorized = 401 == status;\n    this.notAcceptable = 406 == status;\n    this.forbidden = 403 == status;\n    this.notFound = 404 == status;\n};\n\n},{\"./utils\":74}],74:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Return the mime type for the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nexports.type = function(str){\n  return str.split(/ *; */).shift();\n};\n\n/**\n * Return header field parameters.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nexports.params = function(str){\n  return str.split(/ *; */).reduce(function(obj, str){\n    var parts = str.split(/ *= */);\n    var key = parts.shift();\n    var val = parts.shift();\n\n    if (key && val) obj[key] = val;\n    return obj;\n  }, {});\n};\n\n/**\n * Parse Link header fields.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nexports.parseLinks = function(str){\n  return str.split(/ *, */).reduce(function(obj, str){\n    var parts = str.split(/ *; */);\n    var url = parts[0].slice(1, -1);\n    var rel = parts[1].split(/ *= */)[1].slice(1, -1);\n    obj[rel] = url;\n    return obj;\n  }, {});\n};\n\n/**\n * Strip content related fields from `header`.\n *\n * @param {Object} header\n * @return {Object} header\n * @api private\n */\n\nexports.cleanHeader = function(header, changesOrigin){\n  delete header['content-type'];\n  delete header['content-length'];\n  delete header['transfer-encoding'];\n  delete header['host'];\n  // secuirty\n  if (changesOrigin) {\n    delete header['authorization'];\n    delete header['cookie'];\n  }\n  return header;\n};\n\n},{}],75:[function(_dereq_,module,exports){\n(function (Buffer){\n/**\n * Convert a typed array to a Buffer without a copy\n *\n * Author:   Feross Aboukhadijeh <https://feross.org>\n * License:  MIT\n *\n * `npm install typedarray-to-buffer`\n */\n\nvar isTypedArray = _dereq_('is-typedarray').strict\n\nmodule.exports = function typedarrayToBuffer (arr) {\n  if (isTypedArray(arr)) {\n    // To avoid a copy, use the typed array's underlying ArrayBuffer to back new Buffer\n    var buf = Buffer.from(arr.buffer)\n    if (arr.byteLength !== arr.buffer.byteLength) {\n      // Respect the \"view\", i.e. byteOffset and byteLength, without doing a copy\n      buf = buf.slice(arr.byteOffset, arr.byteOffset + arr.byteLength)\n    }\n    return buf\n  } else {\n    // Pass through all other types to `Buffer.from`\n    return Buffer.from(arr)\n  }\n}\n\n}).call(this,_dereq_(\"buffer\").Buffer)\n},{\"buffer\":8,\"is-typedarray\":43}],76:[function(_dereq_,module,exports){\n/**\n * UAParser.js v0.7.17\n * Lightweight JavaScript-based User-Agent string parser\n * https://github.com/faisalman/ua-parser-js\n *\n * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>\n * Dual licensed under GPLv2 & MIT\n */\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '0.7.17',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major', // deprecated\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded';\n\n\n    ///////////\n    // Helper\n    //////////\n\n\n    var util = {\n        extend : function (regexes, extensions) {\n            var margedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    margedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    margedRegexes[i] = regexes[i];\n                }\n            }\n            return margedRegexes;\n        },\n        has : function (str1, str2) {\n          if (typeof str1 === \"string\") {\n            return str2.toLowerCase().indexOf(str1.toLowerCase()) !== -1;\n          } else {\n            return false;\n          }\n        },\n        lowerize : function (str) {\n            return str.toLowerCase();\n        },\n        major : function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g,'').split(\".\")[0] : undefined;\n        },\n        trim : function (str) {\n          return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n        }\n    };\n\n\n    ///////////////\n    // Map helper\n    //////////////\n\n\n    var mapper = {\n\n        rgx : function (ua, arrays) {\n\n            //var result = {},\n            var i = 0, j, k, p, q, matches, match;//, args = arguments;\n\n            /*// construct object barebones\n            for (p = 0; p < args[1].length; p++) {\n                q = args[1][p];\n                result[typeof q === OBJ_TYPE ? q[0] : q] = undefined;\n            }*/\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length == 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length == 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length == 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n            // console.log(this);\n            //return this;\n        },\n\n        str : function (str, map) {\n\n            for (var i in map) {\n                // check if array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (util.has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (util.has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n        }\n    };\n\n\n    ///////////////\n    // String map\n    //////////////\n\n\n    var maps = {\n\n        browser : {\n            oldsafari : {\n                version : {\n                    '1.0'   : '/8',\n                    '1.2'   : '/1',\n                    '1.3'   : '/3',\n                    '2.0'   : '/412',\n                    '2.0.2' : '/416',\n                    '2.0.3' : '/417',\n                    '2.0.4' : '/419',\n                    '?'     : '/'\n                }\n            }\n        },\n\n        device : {\n            amazon : {\n                model : {\n                    'Fire Phone' : ['SD', 'KF']\n                }\n            },\n            sprint : {\n                model : {\n                    'Evo Shift 4G' : '7373KT'\n                },\n                vendor : {\n                    'HTC'       : 'APA',\n                    'Sprint'    : 'Sprint'\n                }\n            }\n        },\n\n        os : {\n            windows : {\n                version : {\n                    'ME'        : '4.90',\n                    'NT 3.11'   : 'NT3.51',\n                    'NT 4.0'    : 'NT4.0',\n                    '2000'      : 'NT 5.0',\n                    'XP'        : ['NT 5.1', 'NT 5.2'],\n                    'Vista'     : 'NT 6.0',\n                    '7'         : 'NT 6.1',\n                    '8'         : 'NT 6.2',\n                    '8.1'       : 'NT 6.3',\n                    '10'        : ['NT 6.4', 'NT 10.0'],\n                    'RT'        : 'ARM'\n                }\n            }\n        }\n    };\n\n\n    //////////////\n    // Regex map\n    /////////////\n\n\n    var regexes = {\n\n        browser : [[\n\n            // Presto based\n            /(opera\\smini)\\/([\\w\\.-]+)/i,                                       // Opera Mini\n            /(opera\\s[mobiletab]+).+version\\/([\\w\\.-]+)/i,                      // Opera Mobi/Tablet\n            /(opera).+version\\/([\\w\\.]+)/i,                                     // Opera > 9.80\n            /(opera)[\\/\\s]+([\\w\\.]+)/i                                          // Opera < 9.80\n            ], [NAME, VERSION], [\n\n            /(opios)[\\/\\s]+([\\w\\.]+)/i                                          // Opera mini on iphone >= 8.0\n            ], [[NAME, 'Opera Mini'], VERSION], [\n\n            /\\s(opr)\\/([\\w\\.]+)/i                                               // Opera Webkit\n            ], [[NAME, 'Opera'], VERSION], [\n\n            // Mixed\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/\\s]?([\\w\\.]+)*/i,\n                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n\n            // Trident based\n            /(avant\\s|iemobile|slim|baidu)(?:browser)?[\\/\\s]?([\\w\\.]*)/i,\n                                                                                // Avant/IEMobile/SlimBrowser/Baidu\n            /(?:ms|\\()(ie)\\s([\\w\\.]+)/i,                                        // Internet Explorer\n\n            // Webkit/KHTML based\n            /(rekonq)\\/([\\w\\.]+)*/i,                                            // Rekonq\n            /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\\/([\\w\\.-]+)/i\n                                                                                // Chromium/Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser\n            ], [NAME, VERSION], [\n\n            /(trident).+rv[:\\s]([\\w\\.]+).+like\\sgecko/i                         // IE11\n            ], [[NAME, 'IE'], VERSION], [\n\n            /(edge)\\/((\\d+)?[\\w\\.]+)/i                                          // Microsoft Edge\n            ], [NAME, VERSION], [\n\n            /(yabrowser)\\/([\\w\\.]+)/i                                           // Yandex\n            ], [[NAME, 'Yandex'], VERSION], [\n\n            /(puffin)\\/([\\w\\.]+)/i                                              // Puffin\n            ], [[NAME, 'Puffin'], VERSION], [\n\n            /((?:[\\s\\/])uc?\\s?browser|(?:juc.+)ucweb)[\\/\\s]?([\\w\\.]+)/i\n                                                                                // UCBrowser\n            ], [[NAME, 'UCBrowser'], VERSION], [\n\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n\n            /(micromessenger)\\/([\\w\\.]+)/i                                      // WeChat\n            ], [[NAME, 'WeChat'], VERSION], [\n\n            /(QQ)\\/([\\d\\.]+)/i                                                  // QQ, aka ShouQ\n            ], [NAME, VERSION], [\n\n            /m?(qqbrowser)[\\/\\s]?([\\w\\.]+)/i                                    // QQBrowser\n            ], [NAME, VERSION], [\n\n            /xiaomi\\/miuibrowser\\/([\\w\\.]+)/i                                   // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI Browser']], [\n\n            /;fbav\\/([\\w\\.]+);/i                                                // Facebook App for iOS & Android\n            ], [VERSION, [NAME, 'Facebook']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)|\\s)/i                                 // Chrome Headless\n            ], [VERSION, [NAME, 'Chrome Headless']], [\n\n            /\\swv\\).+(chrome)\\/([\\w\\.]+)/i                                      // Chrome WebView\n            ], [[NAME, /(.+)/, '$1 WebView'], VERSION], [\n\n            /((?:oculus|samsung)browser)\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+(?:g|us))(.+)/, '$1 $2'], VERSION], [                // Oculus / Samsung Browser\n\n            /android.+version\\/([\\w\\.]+)\\s+(?:mobile\\s?safari|safari)*/i        // Android Browser\n            ], [VERSION, [NAME, 'Android Browser']], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5}\\s?browser)\\/v?([\\w\\.]+)/i\n                                                                                // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /(dolfin)\\/([\\w\\.]+)/i                                              // Dolphin\n            ], [[NAME, 'Dolphin'], VERSION], [\n\n            /((?:android.+)crmo|crios)\\/([\\w\\.]+)/i                             // Chrome for Android/iOS\n            ], [[NAME, 'Chrome'], VERSION], [\n\n            /(coast)\\/([\\w\\.]+)/i                                               // Opera Coast\n            ], [[NAME, 'Opera Coast'], VERSION], [\n\n            /fxios\\/([\\w\\.-]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, 'Firefox']], [\n\n            /version\\/([\\w\\.]+).+?mobile\\/\\w+\\s(safari)/i                       // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n\n            /version\\/([\\w\\.]+).+?(mobile\\s?safari|safari)/i                    // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n\n            /webkit.+?(gsa)\\/([\\w\\.]+).+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i  // Google Search Appliance on iOS\n            ], [[NAME, 'GSA'], VERSION], [\n\n            /webkit.+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i                     // Safari < 3.0\n            ], [NAME, [VERSION, mapper.str, maps.browser.oldsafari.version]], [\n\n            /(konqueror)\\/([\\w\\.]+)/i,                                          // Konqueror\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape)\\/([\\w\\.-]+)/i                                 // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo\\sbrowser|minimo|conkeror)[\\/\\s]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n            /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\\/([\\w\\.-]+)/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(mozilla)\\/([\\w\\.]+).+rv\\:.+gecko\\/\\d+/i,                          // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\\/\\s]?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir\n            /(links)\\s\\(([\\w\\.]+)/i,                                            // Links\n            /(gobrowser)\\/?([\\w\\.]+)*/i,                                        // GoBrowser\n            /(ice\\s?browser)\\/v?([\\w\\._]+)/i,                                   // ICE Browser\n            /(mosaic)[\\/\\s]([\\w\\.]+)/i                                          // Mosaic\n            ], [NAME, VERSION]\n\n            /* /////////////////////\n            // Media players BEGIN\n            ////////////////////////\n\n            , [\n\n            /(apple(?:coremedia|))\\/((\\d+)[\\w\\._]+)/i,                          // Generic Apple CoreMedia\n            /(coremedia) v((\\d+)[\\w\\._]+)/i\n            ], [NAME, VERSION], [\n\n            /(aqualung|lyssna|bsplayer)\\/((\\d+)?[\\w\\.-]+)/i                     // Aqualung/Lyssna/BSPlayer\n            ], [NAME, VERSION], [\n\n            /(ares|ossproxy)\\s((\\d+)[\\w\\.-]+)/i                                 // Ares/OSSProxy\n            ], [NAME, VERSION], [\n\n            /(audacious|audimusicstream|amarok|bass|core|dalvik|gnomemplayer|music on console|nsplayer|psp-internetradioplayer|videos)\\/((\\d+)[\\w\\.-]+)/i,\n                                                                                // Audacious/AudiMusicStream/Amarok/BASS/OpenCORE/Dalvik/GnomeMplayer/MoC\n                                                                                // NSPlayer/PSP-InternetRadioPlayer/Videos\n            /(clementine|music player daemon)\\s((\\d+)[\\w\\.-]+)/i,               // Clementine/MPD\n            /(lg player|nexplayer)\\s((\\d+)[\\d\\.]+)/i,\n            /player\\/(nexplayer|lg player)\\s((\\d+)[\\w\\.-]+)/i                   // NexPlayer/LG Player\n            ], [NAME, VERSION], [\n            /(nexplayer)\\s((\\d+)[\\w\\.-]+)/i                                     // Nexplayer\n            ], [NAME, VERSION], [\n\n            /(flrp)\\/((\\d+)[\\w\\.-]+)/i                                          // Flip Player\n            ], [[NAME, 'Flip Player'], VERSION], [\n\n            /(fstream|nativehost|queryseekspider|ia-archiver|facebookexternalhit)/i\n                                                                                // FStream/NativeHost/QuerySeekSpider/IA Archiver/facebookexternalhit\n            ], [NAME], [\n\n            /(gstreamer) souphttpsrc (?:\\([^\\)]+\\)){0,1} libsoup\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // Gstreamer\n            ], [NAME, VERSION], [\n\n            /(htc streaming player)\\s[\\w_]+\\s\\/\\s((\\d+)[\\d\\.]+)/i,              // HTC Streaming Player\n            /(java|python-urllib|python-requests|wget|libcurl)\\/((\\d+)[\\w\\.-_]+)/i,\n                                                                                // Java/urllib/requests/wget/cURL\n            /(lavf)((\\d+)[\\d\\.]+)/i                                             // Lavf (FFMPEG)\n            ], [NAME, VERSION], [\n\n            /(htc_one_s)\\/((\\d+)[\\d\\.]+)/i                                      // HTC One S\n            ], [[NAME, /_/g, ' '], VERSION], [\n\n            /(mplayer)(?:\\s|\\/)(?:(?:sherpya-){0,1}svn)(?:-|\\s)(r\\d+(?:-\\d+[\\w\\.-]+){0,1})/i\n                                                                                // MPlayer SVN\n            ], [NAME, VERSION], [\n\n            /(mplayer)(?:\\s|\\/|[unkow-]+)((\\d+)[\\w\\.-]+)/i                      // MPlayer\n            ], [NAME, VERSION], [\n\n            /(mplayer)/i,                                                       // MPlayer (no other info)\n            /(yourmuze)/i,                                                      // YourMuze\n            /(media player classic|nero showtime)/i                             // Media Player Classic/Nero ShowTime\n            ], [NAME], [\n\n            /(nero (?:home|scout))\\/((\\d+)[\\w\\.-]+)/i                           // Nero Home/Nero Scout\n            ], [NAME, VERSION], [\n\n            /(nokia\\d+)\\/((\\d+)[\\w\\.-]+)/i                                      // Nokia\n            ], [NAME, VERSION], [\n\n            /\\s(songbird)\\/((\\d+)[\\w\\.-]+)/i                                    // Songbird/Philips-Songbird\n            ], [NAME, VERSION], [\n\n            /(winamp)3 version ((\\d+)[\\w\\.-]+)/i,                               // Winamp\n            /(winamp)\\s((\\d+)[\\w\\.-]+)/i,\n            /(winamp)mpeg\\/((\\d+)[\\w\\.-]+)/i\n            ], [NAME, VERSION], [\n\n            /(ocms-bot|tapinradio|tunein radio|unknown|winamp|inlight radio)/i  // OCMS-bot/tap in radio/tunein/unknown/winamp (no other info)\n                                                                                // inlight radio\n            ], [NAME], [\n\n            /(quicktime|rma|radioapp|radioclientapplication|soundtap|totem|stagefright|streamium)\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // QuickTime/RealMedia/RadioApp/RadioClientApplication/\n                                                                                // SoundTap/Totem/Stagefright/Streamium\n            ], [NAME, VERSION], [\n\n            /(smp)((\\d+)[\\d\\.]+)/i                                              // SMP\n            ], [NAME, VERSION], [\n\n            /(vlc) media player - version ((\\d+)[\\w\\.]+)/i,                     // VLC Videolan\n            /(vlc)\\/((\\d+)[\\w\\.-]+)/i,\n            /(xbmc|gvfs|xine|xmms|irapp)\\/((\\d+)[\\w\\.-]+)/i,                    // XBMC/gvfs/Xine/XMMS/irapp\n            /(foobar2000)\\/((\\d+)[\\d\\.]+)/i,                                    // Foobar2000\n            /(itunes)\\/((\\d+)[\\d\\.]+)/i                                         // iTunes\n            ], [NAME, VERSION], [\n\n            /(wmplayer)\\/((\\d+)[\\w\\.-]+)/i,                                     // Windows Media Player\n            /(windows-media-player)\\/((\\d+)[\\w\\.-]+)/i\n            ], [[NAME, /-/g, ' '], VERSION], [\n\n            /windows\\/((\\d+)[\\w\\.-]+) upnp\\/[\\d\\.]+ dlnadoc\\/[\\d\\.]+ (home media server)/i\n                                                                                // Windows Media Server\n            ], [VERSION, [NAME, 'Windows']], [\n\n            /(com\\.riseupradioalarm)\\/((\\d+)[\\d\\.]*)/i                          // RiseUP Radio Alarm\n            ], [NAME, VERSION], [\n\n            /(rad.io)\\s((\\d+)[\\d\\.]+)/i,                                        // Rad.io\n            /(radio.(?:de|at|fr))\\s((\\d+)[\\d\\.]+)/i\n            ], [[NAME, 'rad.io'], VERSION]\n\n            //////////////////////\n            // Media players END\n            ////////////////////*/\n\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\\)]/i                     // AMD64\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, util.lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows\\s(ce|mobile);\\sppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?:\\smac|;|\\))/i                           // PowerPC\n            ], [[ARCHITECTURE, /ower/, '', util.lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|arm(?:64|(?=v\\d+;))|(?=atmel\\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, util.lowerize]]\n        ],\n\n        device : [[\n\n            /\\((ipad|playbook);[\\w\\s\\);-]+(rim|apple)/i                         // iPad/PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/                                  // iPad\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, TABLET]], [\n\n            /(apple\\s{0,1}tv)/i                                                 // Apple TV\n            ], [[MODEL, 'Apple TV'], [VENDOR, 'Apple']], [\n\n            /(archos)\\s(gamepad2?)/i,                                           // Archos\n            /(hp).+(touchpad)/i,                                                // HP TouchPad\n            /(hp).+(tablet)/i,                                                  // HP Tablet\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /\\s(nook)[\\w\\s]+build\\/(\\w+)/i,                                     // Nook\n            /(dell)\\s(strea[kpr\\s\\d]*[\\dko])/i                                  // Dell Streak\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(kf[A-z]+)\\sbuild\\/[\\w\\.]+.*silk\\//i                               // Kindle Fire HD\n            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [\n            /(sd|kf)[0349hijorstuw]+\\sbuild\\/[\\w\\.]+.*silk\\//i                  // Fire Phone\n            ], [[MODEL, mapper.str, maps.device.amazon.model], [VENDOR, 'Amazon'], [TYPE, MOBILE]], [\n\n            /\\((ip[honed|\\s\\w*]+);.+(apple)/i                                   // iPod/iPhone\n            ], [MODEL, VENDOR, [TYPE, MOBILE]], [\n            /\\((ip[honed|\\s\\w*]+);/i                                            // iPod/iPhone\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, MOBILE]], [\n\n            /(blackberry)[\\s-]?(\\w+)/i,                                         // BlackBerry\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\\s_-]?([\\w-]+)*/i,\n                                                                                // BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron\n            /(hp)\\s([\\w\\s]+\\w)/i,                                               // HP iPAQ\n            /(asus)-?(\\w+)/i                                                    // Asus\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /\\(bb10;\\s(\\w+)/i                                                   // BlackBerry 10\n            ], [MODEL, [VENDOR, 'BlackBerry'], [TYPE, MOBILE]], [\n                                                                                // Asus Tablets\n            /android.+(transfo[prime\\s]{4,10}\\s\\w+|eeepc|slider\\s\\w+|nexus 7|padfone)/i\n            ], [MODEL, [VENDOR, 'Asus'], [TYPE, TABLET]], [\n\n            /(sony)\\s(tablet\\s[ps])\\sbuild\\//i,                                  // Sony\n            /(sony)?(?:sgp.+)\\sbuild\\//i\n            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Tablet'], [TYPE, TABLET]], [\n            /android.+\\s([c-g]\\d{4}|so[-l]\\w+)\\sbuild\\//i\n            ], [MODEL, [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n\n            /\\s(ouya)\\s/i,                                                      // Ouya\n            /(nintendo)\\s([wids3u]+)/i                                          // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n\n            /android.+;\\s(shield)\\sbuild/i                                      // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n\n            /(playstation\\s[34portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, 'Sony'], [TYPE, CONSOLE]], [\n\n            /(sprint\\s(\\w+))/i                                                  // Sprint Phones\n            ], [[VENDOR, mapper.str, maps.device.sprint.vendor], [MODEL, mapper.str, maps.device.sprint.model], [TYPE, MOBILE]], [\n\n            /(lenovo)\\s?(S(?:5000|6000)+(?:[-][\\w+]))/i                         // Lenovo tablets\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(htc)[;_\\s-]+([\\w\\s]+(?=\\))|\\w+)*/i,                               // HTC\n            /(zte)-(\\w+)*/i,                                                    // ZTE\n            /(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\\s)sony)[_\\s-]?([\\w-]+)*/i\n                                                                                // Alcatel/GeeksPhone/Lenovo/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            /(nexus\\s9)/i                                                       // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n\n            /d\\/huawei([\\w\\s-]+)[;\\)]/i,\n            /(nexus\\s6p)/i                                                      // Huawei\n            ], [MODEL, [VENDOR, 'Huawei'], [TYPE, MOBILE]], [\n\n            /(microsoft);\\s(lumia[\\s\\w]+)/i                                     // Microsoft Lumia\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /[\\s\\(;](xbox(?:\\sone)?)[\\s\\);]/i                                   // Microsoft Xbox\n            ], [MODEL, [VENDOR, 'Microsoft'], [TYPE, CONSOLE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, 'Microsoft'], [TYPE, MOBILE]], [\n\n                                                                                // Motorola\n            /\\s(milestone|droid(?:[2-4x]|\\s(?:bionic|x2|pro|razr))?(:?\\s4g)?)[\\w\\s]+build\\//i,\n            /mot[\\s-]?(\\w+)*/i,\n            /(XT\\d{3,4}) build\\//i,\n            /(nexus\\s6)/i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, MOBILE]], [\n            /android.+\\s(mz60\\d|xoom[\\s2]{0,2})\\sbuild\\//i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, TABLET]], [\n\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+\\s+\\([\\w\\s]*;\\s*(\\w[^;]*);([^;]*)/i            // HbbTV devices\n            ], [[VENDOR, util.trim], [MODEL, util.trim], [TYPE, SMARTTV]], [\n\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, 'Samsung'], [TYPE, SMARTTV]], [\n\n            /\\(dtv[\\);].+(aquos)/i                                              // Sharp\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [\n\n            /android.+((sch-i[89]0\\d|shw-m380s|gt-p\\d{4}|gt-n\\d+|sgh-t8[56]9|nexus 10))/i,\n            /((SM-T\\w+))/i\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, TABLET]], [                  // Samsung\n            /smart-tv.+(samsung)/i\n            ], [VENDOR, [TYPE, SMARTTV], MODEL], [\n            /((s[cgp]h-\\w+|gt-\\w+|galaxy\\snexus|sm-\\w[\\w\\d]+))/i,\n            /(sam[sung]*)[\\s-]*(\\w+-?[\\w-]*)*/i,\n            /sec-((sgh\\w+))/i\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, MOBILE]], [\n\n            /sie-(\\w+)*/i                                                       // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n\n            /(maemo|nokia).*(n900|lumia\\s\\d+)/i,                                // Nokia\n            /(nokia)[\\s_-]?([\\w-]+)*/i\n            ], [[VENDOR, 'Nokia'], MODEL, [TYPE, MOBILE]], [\n\n            /android\\s3\\.[\\s\\w;-]{10}(a\\d{3})/i                                 // Acer\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            /android.+([vl]k\\-?\\d{3})\\s+build/i                                 // LG Tablet\n            ], [MODEL, [VENDOR, 'LG'], [TYPE, TABLET]], [\n            /android\\s3\\.[\\s\\w;-]{10}(lg?)-([06cv9]{3,4})/i                     // LG Tablet\n            ], [[VENDOR, 'LG'], MODEL, [TYPE, TABLET]], [\n            /(lg) netcast\\.tv/i                                                 // LG SmartTV\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /(nexus\\s[45])/i,                                                   // LG\n            /lg[e;\\s\\/-]+(\\w+)*/i,\n            /android.+lg(\\-?[\\d\\w]+)\\s+build/i\n            ], [MODEL, [VENDOR, 'LG'], [TYPE, MOBILE]], [\n\n            /android.+(ideatab[a-z0-9\\-\\s]+)/i                                  // Lenovo\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            /linux;.+((jolla));/i                                               // Jolla\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /((pebble))app\\/[\\d\\.]+\\s/i                                         // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n\n            /android.+;\\s(oppo)\\s?([\\w\\s]+)\\sbuild/i                            // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, 'Chromecast'], [VENDOR, 'Google']], [\n\n            /android.+;\\s(glass)\\s\\d/i                                          // Google Glass\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, WEARABLE]], [\n\n            /android.+;\\s(pixel c)\\s/i                                          // Google Pixel C\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, TABLET]], [\n\n            /android.+;\\s(pixel xl|pixel)\\s/i                                   // Google Pixel\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, MOBILE]], [\n\n            /android.+(\\w+)\\s+build\\/hm\\1/i,                                    // Xiaomi Hongmi 'numeric' models\n            /android.+(hm[\\s\\-_]*note?[\\s_]*(?:\\d\\w)?)\\s+build/i,               // Xiaomi Hongmi\n            /android.+(mi[\\s\\-_]*(?:one|one[\\s_]plus|note lte)?[\\s_]*(?:\\d\\w)?)\\s+build/i,    // Xiaomi Mi\n            /android.+(redmi[\\s\\-_]*(?:note)?(?:[\\s_]*[\\w\\s]+)?)\\s+build/i      // Redmi Phones\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, MOBILE]], [\n            /android.+(mi[\\s\\-_]*(?:pad)?(?:[\\s_]*[\\w\\s]+)?)\\s+build/i          // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, TABLET]], [\n            /android.+;\\s(m[1-5]\\snote)\\sbuild/i                                // Meizu Tablet\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, TABLET]], [\n\n            /android.+a000(1)\\s+build/i                                         // OnePlus\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            /android.+[;\\/]\\s*(RCT[\\d\\w]+)\\s+build/i                            // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*(Venue[\\d\\s]*)\\s+build/i                          // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*(Q[T|M][\\d\\w]+)\\s+build/i                         // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s+(Barnes[&\\s]+Noble\\s+|BN[RT])(V?.*)\\s+build/i     // Barnes & Noble Tablet\n            ], [[VENDOR, 'Barnes & Noble'], MODEL, [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s+(TM\\d{3}.*\\b)\\s+build/i                           // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*(zte)?.+(k\\d{2})\\s+build/i                        // ZTE K Series Tablet\n            ], [[VENDOR, 'ZTE'], MODEL, [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*(gen\\d{3})\\s+build.*49h/i                         // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n\n            /android.+[;\\/]\\s*(zur\\d{3})\\s+build/i                              // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*((Zeki)?TB.*\\b)\\s+build/i                         // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n\n            /(android).+[;\\/]\\s+([YR]\\d{2}x?.*)\\s+build/i,\n            /android.+[;\\/]\\s+(Dragon[\\-\\s]+Touch\\s+|DT)(.+)\\s+build/i          // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*(NS-?.+)\\s+build/i                                // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*((NX|Next)-?.+)\\s+build/i                         // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*(Xtreme\\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\\s+build/i\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [                    // Voice Xtreme Phones\n\n            /android.+[;\\/]\\s*(LVTEL\\-?)?(V1[12])\\s+build/i                     // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n\n            /android.+[;\\/]\\s*(V(100MD|700NA|7011|917G).*\\b)\\s+build/i          // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*(Le[\\s\\-]+Pan)[\\s\\-]+(.*\\b)\\s+build/i             // Le Pan Tablets\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*(Trio[\\s\\-]*.*)\\s+build/i                         // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*(Trinity)[\\-\\s]*(T\\d{3})\\s+build/i                // Trinity Tablets\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*TU_(1491)\\s+build/i                               // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n\n            /android.+(KS(.+))\\s+build/i                                        // Amazon Kindle Tablets\n            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [\n\n            /android.+(Gigaset)[\\s\\-]+(Q.+)\\s+build/i                           // Gigaset Tablets\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /\\s(tablet|tab)[;\\/]/i,                                             // Unidentifiable Tablet\n            /\\s(mobile)(?:[;\\/]|\\ssafari)/i                                     // Unidentifiable Mobile\n            ], [[TYPE, util.lowerize], VENDOR, MODEL], [\n\n            /(android.+)[;\\/].+build/i                                          // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n\n\n        /*//////////////////////////\n            // TODO: move to string map\n            ////////////////////////////\n\n            /(C6603)/i                                                          // Sony Xperia Z C6603\n            ], [[MODEL, 'Xperia Z C6603'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n            /(C6903)/i                                                          // Sony Xperia Z 1\n            ], [[MODEL, 'Xperia Z 1'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n\n            /(SM-G900[F|H])/i                                                   // Samsung Galaxy S5\n            ], [[MODEL, 'Galaxy S5'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G7102)/i                                                       // Samsung Galaxy Grand 2\n            ], [[MODEL, 'Galaxy Grand 2'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G530H)/i                                                       // Samsung Galaxy Grand Prime\n            ], [[MODEL, 'Galaxy Grand Prime'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G313HZ)/i                                                      // Samsung Galaxy V\n            ], [[MODEL, 'Galaxy V'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-T805)/i                                                        // Samsung Galaxy Tab S 10.5\n            ], [[MODEL, 'Galaxy Tab S 10.5'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n            /(SM-G800F)/i                                                       // Samsung Galaxy S5 Mini\n            ], [[MODEL, 'Galaxy S5 Mini'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-T311)/i                                                        // Samsung Galaxy Tab 3 8.0\n            ], [[MODEL, 'Galaxy Tab 3 8.0'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n\n            /(T3C)/i                                                            // Advan Vandroid T3C\n            ], [MODEL, [VENDOR, 'Advan'], [TYPE, TABLET]], [\n            /(ADVAN T1J\\+)/i                                                    // Advan Vandroid T1J+\n            ], [[MODEL, 'Vandroid T1J+'], [VENDOR, 'Advan'], [TYPE, TABLET]], [\n            /(ADVAN S4A)/i                                                      // Advan Vandroid S4A\n            ], [[MODEL, 'Vandroid S4A'], [VENDOR, 'Advan'], [TYPE, MOBILE]], [\n\n            /(V972M)/i                                                          // ZTE V972M\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n\n            /(i-mobile)\\s(IQ\\s[\\d\\.]+)/i                                        // i-mobile IQ\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(IQ6.3)/i                                                          // i-mobile IQ IQ 6.3\n            ], [[MODEL, 'IQ 6.3'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n            /(i-mobile)\\s(i-style\\s[\\d\\.]+)/i                                   // i-mobile i-STYLE\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(i-STYLE2.1)/i                                                     // i-mobile i-STYLE 2.1\n            ], [[MODEL, 'i-STYLE 2.1'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n\n            /(mobiistar touch LAI 512)/i                                        // mobiistar touch LAI 512\n            ], [[MODEL, 'Touch LAI 512'], [VENDOR, 'mobiistar'], [TYPE, MOBILE]], [\n\n            /////////////\n            // END TODO\n            ///////////*/\n\n        ],\n\n        engine : [[\n\n            /windows.+\\sedge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, 'EdgeHTML']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\\/([\\w\\.]+)/i,     // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m\n            /(khtml|tasman|links)[\\/\\s]\\(?([\\w\\.]+)/i,                          // KHTML/Tasman/Links\n            /(icab)[\\/\\s]([23]\\.[\\d\\.]+)/i                                      // iCab\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]+).*(gecko)/i                                           // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows based\n            /microsoft\\s(windows)\\s(vista|xp)/i                                 // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows)\\snt\\s6\\.2;\\s(arm)/i,                                     // Windows RT\n            /(windows\\sphone(?:\\sos)*)[\\s\\/]?([\\d\\.\\s]+\\w)*/i,                  // Windows Phone\n            /(windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)/i\n            ], [NAME, [VERSION, mapper.str, maps.os.windows.version]], [\n            /(win(?=3|9|n)|win\\s9x\\s)([nt\\d\\.]+)/i\n            ], [[NAME, 'Windows'], [VERSION, mapper.str, maps.os.windows.version]], [\n\n            // Mobile/Embedded OS\n            /\\((bb)(10);/i                                                      // BlackBerry 10\n            ], [[NAME, 'BlackBerry'], VERSION], [\n            /(blackberry)\\w*\\/?([\\w\\.]+)*/i,                                    // Blackberry\n            /(tizen)[\\/\\s]([\\w\\.]+)/i,                                          // Tizen\n            /(android|webos|palm\\sos|qnx|bada|rim\\stablet\\sos|meego|contiki)[\\/\\s-]?([\\w\\.]+)*/i,\n                                                                                // Android/WebOS/Palm/QNX/Bada/RIM/MeeGo/Contiki\n            /linux;.+(sailfish);/i                                              // Sailfish OS\n            ], [NAME, VERSION], [\n            /(symbian\\s?os|symbos|s60(?=;))[\\/\\s-]?([\\w\\.]+)*/i                 // Symbian\n            ], [[NAME, 'Symbian'], VERSION], [\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME], [\n            /mozilla.+\\(mobile;.+gecko.+firefox/i                               // Firefox OS\n            ], [[NAME, 'Firefox OS'], VERSION], [\n\n            // Console\n            /(nintendo|playstation)\\s([wids34portablevu]+)/i,                   // Nintendo/Playstation\n\n            // GNU/Linux based\n            /(mint)[\\/\\s\\(]?(\\w+)*/i,                                           // Mint\n            /(mageia|vectorlinux)[;\\s]/i,                                       // Mageia/VectorLinux\n            /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\\/\\s-]?(?!chrom)([\\w\\.-]+)*/i,\n                                                                                // Joli/Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware\n                                                                                // Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus\n            /(hurd|linux)\\s?([\\w\\.]+)*/i,                                       // Hurd/Linux\n            /(gnu)\\s?([\\w\\.]+)*/i                                               // GNU\n            ], [NAME, VERSION], [\n\n            /(cros)\\s[\\w]+\\s([\\w\\.]+\\w)/i                                       // Chromium OS\n            ], [[NAME, 'Chromium OS'], VERSION],[\n\n            // Solaris\n            /(sunos)\\s?([\\w\\.]+\\d)*/i                                           // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n\n            // BSD based\n            /\\s([frentopc-]{0,4}bsd|dragonfly)\\s?([\\w\\.]+)*/i                   // FreeBSD/NetBSD/OpenBSD/PC-BSD/DragonFly\n            ], [NAME, VERSION],[\n\n            /(haiku)\\s(\\w+)/i                                                  // Haiku\n            ], [NAME, VERSION],[\n\n            /cfnetwork\\/.+darwin/i,\n            /ip[honead]+(?:.*os\\s([\\w]+)\\slike\\smac|;\\sopera)/i                 // iOS\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n\n            /(mac\\sos\\sx)\\s?([\\w\\s\\.]+\\w)*/i,\n            /(macintosh|mac(?=_powerpc)\\s)/i                                    // Mac OS\n            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [\n\n            // Other\n            /((?:open)?solaris)[\\/\\s-]?([\\w\\.]+)*/i,                            // Solaris\n            /(aix)\\s((\\d)(?=\\.|\\)|\\s)[\\w\\.]*)*/i,                               // AIX\n            /(plan\\s9|minix|beos|os\\/2|amigaos|morphos|risc\\sos|openvms)/i,\n                                                                                // Plan9/Minix/BeOS/OS2/AmigaOS/MorphOS/RISCOS/OpenVMS\n            /(unix)\\s?([\\w\\.]+)*/i                                              // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n\n    /////////////////\n    // Constructor\n    ////////////////\n    /*\n    var Browser = function (name, version) {\n        this[NAME] = name;\n        this[VERSION] = version;\n    };\n    var CPU = function (arch) {\n        this[ARCHITECTURE] = arch;\n    };\n    var Device = function (vendor, model, type) {\n        this[VENDOR] = vendor;\n        this[MODEL] = model;\n        this[TYPE] = type;\n    };\n    var Engine = Browser;\n    var OS = Browser;\n    */\n    var UAParser = function (uastring, extensions) {\n\n        if (typeof uastring === 'object') {\n            extensions = uastring;\n            uastring = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(uastring, extensions).getResult();\n        }\n\n        var ua = uastring || ((window && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);\n        var rgxmap = extensions ? util.extend(regexes, extensions) : regexes;\n        //var browser = new Browser();\n        //var cpu = new CPU();\n        //var device = new Device();\n        //var engine = new Engine();\n        //var os = new OS();\n\n        this.getBrowser = function () {\n            var browser = { name: undefined, version: undefined };\n            mapper.rgx.call(browser, ua, rgxmap.browser);\n            browser.major = util.major(browser.version); // deprecated\n            return browser;\n        };\n        this.getCPU = function () {\n            var cpu = { architecture: undefined };\n            mapper.rgx.call(cpu, ua, rgxmap.cpu);\n            return cpu;\n        };\n        this.getDevice = function () {\n            var device = { vendor: undefined, model: undefined, type: undefined };\n            mapper.rgx.call(device, ua, rgxmap.device);\n            return device;\n        };\n        this.getEngine = function () {\n            var engine = { name: undefined, version: undefined };\n            mapper.rgx.call(engine, ua, rgxmap.engine);\n            return engine;\n        };\n        this.getOS = function () {\n            var os = { name: undefined, version: undefined };\n            mapper.rgx.call(os, ua, rgxmap.os);\n            return os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return ua;\n        };\n        this.setUA = function (uastring) {\n            ua = uastring;\n            //browser = new Browser();\n            //cpu = new CPU();\n            //device = new Device();\n            //engine = new Engine();\n            //os = new OS();\n            return this;\n        };\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER = {\n        NAME    : NAME,\n        MAJOR   : MAJOR, // deprecated\n        VERSION : VERSION\n    };\n    UAParser.CPU = {\n        ARCHITECTURE : ARCHITECTURE\n    };\n    UAParser.DEVICE = {\n        MODEL   : MODEL,\n        VENDOR  : VENDOR,\n        TYPE    : TYPE,\n        CONSOLE : CONSOLE,\n        MOBILE  : MOBILE,\n        SMARTTV : SMARTTV,\n        TABLET  : TABLET,\n        WEARABLE: WEARABLE,\n        EMBEDDED: EMBEDDED\n    };\n    UAParser.ENGINE = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n    UAParser.OS = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n    //UAParser.Utils = util;\n\n    ///////////\n    // Export\n    //////////\n\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        // TODO: test!!!!!!!!\n        /*\n        if (require && require.main === module && process) {\n            // cli\n            var jsonize = function (arr) {\n                var res = [];\n                for (var i in arr) {\n                    res.push(new UAParser(arr[i]).getResult());\n                }\n                process.stdout.write(JSON.stringify(res, null, 2) + '\\n');\n            };\n            if (process.stdin.isTTY) {\n                // via args\n                jsonize(process.argv.slice(2));\n            } else {\n                // via pipe\n                var str = '';\n                process.stdin.on('readable', function() {\n                    var read = process.stdin.read();\n                    if (read !== null) {\n                        str += read;\n                    }\n                });\n                process.stdin.on('end', function () {\n                    jsonize(str.replace(/\\n$/, '').split('\\n'));\n                });\n            }\n        }\n        */\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else if (window) {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = window && (window.jQuery || window.Zepto);\n    if (typeof $ !== UNDEF_TYPE) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (uastring) {\n            parser.setUA(uastring);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n\n},{}],77:[function(_dereq_,module,exports){\n(function (global){\n\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],78:[function(_dereq_,module,exports){\narguments[4][36][0].apply(exports,arguments)\n},{\"dup\":36}],79:[function(_dereq_,module,exports){\nmodule.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n},{}],80:[function(_dereq_,module,exports){\n(function (process,global){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = _dereq_('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = _dereq_('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\n}).call(this,_dereq_('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./support/isBuffer\":79,\"_process\":50,\"inherits\":78}],81:[function(_dereq_,module,exports){\n'use strict';\n\n// FUNCTIONS //\n\nvar isStr = Object.prototype.toString;\n\n\n// IS FLOAT32ARRAY //\n\n/**\n* FUNCTION: isFloat32Array( value )\n*\tValidates if a value is a Float32Array.\n*\n* @param {*} value - value to validate\n* @returns {Boolean} boolean indicating if a value is a Float32Array\n*/\nfunction isFloat32Array( value ) {\n\treturn isStr.call( value ) === '[object Float32Array]';\n} // end FUNCTION isFloat32Array()\n\n\n// EXPORTS //\n\nmodule.exports = isFloat32Array;\n\n},{}],82:[function(_dereq_,module,exports){\n(function (process,global){\n'use strict'\n\nvar Transform = _dereq_('readable-stream').Transform\nvar duplexify = _dereq_('duplexify')\nvar WS = _dereq_('ws')\nvar Buffer = _dereq_('safe-buffer').Buffer\n\nmodule.exports = WebSocketStream\n\nfunction buildProxy (options, socketWrite, socketEnd) {\n  var proxy = new Transform({\n    objectMode: options.objectMode\n  })\n\n  proxy._write = socketWrite\n  proxy._flush = socketEnd\n\n  return proxy\n}\n\nfunction WebSocketStream(target, protocols, options) {\n  var stream, socket\n\n  var isBrowser = process.title === 'browser'\n  var isNative = !!global.WebSocket\n  var socketWrite = isBrowser ? socketWriteBrowser : socketWriteNode\n\n  if (protocols && !Array.isArray(protocols) && 'object' === typeof protocols) {\n    // accept the \"options\" Object as the 2nd argument\n    options = protocols\n    protocols = null\n\n    if (typeof options.protocol === 'string' || Array.isArray(options.protocol)) {\n      protocols = options.protocol;\n    }\n  }\n\n  if (!options) options = {}\n\n  if (options.objectMode === undefined) {\n    options.objectMode = !(options.binary === true || options.binary === undefined)\n  }\n\n  var proxy = buildProxy(options, socketWrite, socketEnd)\n\n  if (!options.objectMode) {\n    proxy._writev = writev\n  }\n\n  // browser only: sets the maximum socket buffer size before throttling\n  var bufferSize = options.browserBufferSize || 1024 * 512\n\n  // browser only: how long to wait when throttling\n  var bufferTimeout = options.browserBufferTimeout || 1000\n\n  // use existing WebSocket object that was passed in\n  if (typeof target === 'object') {\n    socket = target\n  // otherwise make a new one\n  } else {\n    // special constructor treatment for native websockets in browsers, see\n    // https://github.com/maxogden/websocket-stream/issues/82\n    if (isNative && isBrowser) {\n      socket = new WS(target, protocols)\n    } else {\n      socket = new WS(target, protocols, options)\n    }\n\n    socket.binaryType = 'arraybuffer'\n  }\n\n  // was already open when passed in\n  if (socket.readyState === socket.OPEN) {\n    stream = proxy\n  } else {\n    stream = duplexify.obj()\n    socket.onopen = onopen\n  }\n\n  stream.socket = socket\n\n  socket.onclose = onclose\n  socket.onerror = onerror\n  socket.onmessage = onmessage\n\n  proxy.on('close', destroy)\n\n  var coerceToBuffer = !options.objectMode\n\n  function socketWriteNode(chunk, enc, next) {\n    // avoid errors, this never happens unless\n    // destroy() is called\n    if (socket.readyState !== socket.OPEN) {\n      next()\n      return\n    }\n\n    if (coerceToBuffer && typeof chunk === 'string') {\n      chunk = Buffer.from(chunk, 'utf8')\n    }\n    socket.send(chunk, next)\n  }\n\n  function socketWriteBrowser(chunk, enc, next) {\n    if (socket.bufferedAmount > bufferSize) {\n      setTimeout(socketWriteBrowser, bufferTimeout, chunk, enc, next)\n      return\n    }\n\n    if (coerceToBuffer && typeof chunk === 'string') {\n      chunk = Buffer.from(chunk, 'utf8')\n    }\n\n    try {\n      socket.send(chunk)\n    } catch(err) {\n      return next(err)\n    }\n\n    next()\n  }\n\n  function socketEnd(done) {\n    socket.close()\n    done()\n  }\n\n  function onopen() {\n    stream.setReadable(proxy)\n    stream.setWritable(proxy)\n    stream.emit('connect')\n  }\n\n  function onclose() {\n    stream.end()\n    stream.destroy()\n  }\n\n  function onerror(err) {\n    stream.destroy(err)\n  }\n\n  function onmessage(event) {\n    var data = event.data\n    if (data instanceof ArrayBuffer) data = Buffer.from(data)\n    else data = Buffer.from(data, 'utf8')\n    proxy.push(data)\n  }\n\n  function destroy() {\n    socket.close()\n  }\n\n  // this is to be enabled only if objectMode is false\n  function writev (chunks, cb) {\n    var buffers = new Array(chunks.length)\n    for (var i = 0; i < chunks.length; i++) {\n      if (typeof chunks[i].chunk === 'string') {\n        buffers[i] = Buffer.from(chunks[i], 'utf8')\n      } else {\n        buffers[i] = chunks[i].chunk\n      }\n    }\n\n    this._write(Buffer.concat(buffers), 'binary', cb)\n  }\n\n  return stream\n}\n\n}).call(this,_dereq_('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"_process\":50,\"duplexify\":21,\"readable-stream\":62,\"safe-buffer\":66,\"ws\":83}],83:[function(_dereq_,module,exports){\n\nvar ws = null\n\nif (typeof WebSocket !== 'undefined') {\n  ws = WebSocket\n} else if (typeof MozWebSocket !== 'undefined') {\n  ws = MozWebSocket\n} else if (typeof window !== 'undefined') {\n  ws = window.WebSocket || window.MozWebSocket\n}\n\nmodule.exports = ws\n\n},{}],84:[function(_dereq_,module,exports){\n// Returns a wrapper function that returns a wrapped callback\n// The wrapper function should do some stuff, and return a\n// presumably different callback function.\n// This makes sure that own properties are retained, so that\n// decorations and such are not lost along the way.\nmodule.exports = wrappy\nfunction wrappy (fn, cb) {\n  if (fn && cb) return wrappy(fn)(cb)\n\n  if (typeof fn !== 'function')\n    throw new TypeError('need wrapper function')\n\n  Object.keys(fn).forEach(function (k) {\n    wrapper[k] = fn[k]\n  })\n\n  return wrapper\n\n  function wrapper() {\n    var args = new Array(arguments.length)\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i]\n    }\n    var ret = fn.apply(this, args)\n    var cb = args[args.length-1]\n    if (typeof ret === 'function' && ret !== cb) {\n      Object.keys(cb).forEach(function (k) {\n        ret[k] = cb[k]\n      })\n    }\n    return ret\n  }\n}\n\n},{}],85:[function(_dereq_,module,exports){\nmodule.exports={\n  \"name\": \"videomail-client\",\n  \"version\": \"2.4.3\",\n  \"description\": \"A wicked npm package to record videos directly in the browser, wohooo!\",\n  \"author\": \"Michael Heuberger <michael.heuberger@binarykitchen.com>\",\n  \"contributors\": [\n    {\n      \"name\": \"Michael Heuberger\",\n      \"email\": \"michael.heuberger@binarykitchen.com\"\n    }\n  ],\n  \"homepage\": \"https://videomail.io\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/binarykitchen/videomail-client.git\"\n  },\n  \"license\": \"CC0-1.0\",\n  \"readmeFilename\": \"README.md\",\n  \"module\": \"src/index.js\",\n  \"main\": \"dist/videomail-client.js\",\n  \"scripts\": {\n    \"test\": \"gulp test\",\n    \"start\": \"NODE_NO_HTTP2=1 gulp examples\",\n    \"patch\": \"./env/dev/release.sh --importance=patch\",\n    \"minor\": \"./env/dev/release.sh --importance=minor\",\n    \"major\": \"./env/dev/release.sh --importance=major\"\n  },\n  \"engines\": {\n    \"node\": \">=8.3.0\",\n    \"yarn\": \">=1.3.0\",\n    \"npm\": \">=5.4.0\"\n  },\n  \"keywords\": [\n    \"webcam\",\n    \"video\",\n    \"videomail\",\n    \"encoder\",\n    \"getusermedia\",\n    \"audio\",\n    \"recorder\"\n  ],\n  \"dependencies\": {\n    \"add-eventlistener-with-options\": \"1.25.0\",\n    \"animitter\": \"3.0.0\",\n    \"audio-sample\": \"1.0.5\",\n    \"canvas-to-buffer\": \"1.0.13\",\n    \"classlist.js\": \"1.1.20150312\",\n    \"contains\": \"0.1.1\",\n    \"create-error\": \"0.3.1\",\n    \"deepmerge\": \"2.1.0\",\n    \"defined\": \"1.0.0\",\n    \"despot\": \"1.1.3\",\n    \"document-visibility\": \"1.0.1\",\n    \"element-closest\": \"2.0.2\",\n    \"filesize\": \"3.6.1\",\n    \"get-form-data\": \"2.0.0\",\n    \"hidden\": \"1.1.1\",\n    \"humanize-duration\": \"3.14.0\",\n    \"hyperscript\": \"2.0.2\",\n    \"insert-css\": \"2.0.0\",\n    \"iphone-inline-video\": \"2.2.2\",\n    \"is-power-of-two\": \"1.0.0\",\n    \"keymirror\": \"0.1.1\",\n    \"number-is-integer\": \"1.0.1\",\n    \"readystate\": \"0.3.0\",\n    \"request-frame\": \"1.5.3\",\n    \"safe-json-stringify\": \"1.1.0\",\n    \"superagent\": \"3.8.2\",\n    \"ua-parser-js\": \"0.7.17\",\n    \"websocket-stream\": \"5.1.2\"\n  },\n  \"devDependencies\": {\n    \"babel-core\": \"6.26.0\",\n    \"babel-polyfill\": \"6.26.0\",\n    \"babel-preset-env\": \"1.6.1\",\n    \"babelify\": \"8.0.0\",\n    \"body-parser\": \"1.18.2\",\n    \"browserify\": \"16.2.0\",\n    \"connect-send-json\": \"1.0.0\",\n    \"del\": \"3.0.0\",\n    \"fancy-log\": \"1.3.2\",\n    \"glob\": \"7.1.2\",\n    \"gulp\": \"3.9.1\",\n    \"gulp-autoprefixer\": \"5.0.0\",\n    \"gulp-bump\": \"3.1.0\",\n    \"gulp-bytediff\": \"1.0.0\",\n    \"gulp-concat\": \"2.6.1\",\n    \"gulp-connect\": \"5.5.0\",\n    \"gulp-cssnano\": \"2.1.3\",\n    \"gulp-derequire\": \"2.1.0\",\n    \"gulp-if\": \"2.0.2\",\n    \"gulp-inject-string\": \"1.1.1\",\n    \"gulp-load-plugins\": \"1.5.0\",\n    \"gulp-plumber\": \"1.2.0\",\n    \"gulp-rename\": \"1.2.2\",\n    \"gulp-sourcemaps\": \"2.6.4\",\n    \"gulp-standard\": \"10.1.2\",\n    \"gulp-stylus\": \"2.7.0\",\n    \"gulp-todo\": \"5.5.0\",\n    \"gulp-uglify\": \"3.0.0\",\n    \"minimist\": \"1.2.0\",\n    \"nib\": \"1.1.2\",\n    \"router\": \"1.3.2\",\n    \"ssl-root-cas\": \"1.2.5\",\n    \"standard\": \"11.0.1\",\n    \"tap-summary\": \"4.0.0\",\n    \"tape\": \"4.9.0\",\n    \"tape-catch\": \"1.0.6\",\n    \"tape-run\": \"4.0.0\",\n    \"vinyl-buffer\": \"1.0.1\",\n    \"vinyl-source-stream\": \"2.0.0\",\n    \"watchify\": \"3.11.0\"\n  }\n}\n\n},{}],86:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _deepmerge = _dereq_('deepmerge');\n\nvar _deepmerge2 = _interopRequireDefault(_deepmerge);\n\nvar _readystate = _dereq_('readystate');\n\nvar _readystate2 = _interopRequireDefault(_readystate);\n\nvar _util = _dereq_('util');\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _options = _dereq_('./options');\n\nvar _options2 = _interopRequireDefault(_options);\n\nvar _constants = _dereq_('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _events = _dereq_('./events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _collectLogger = _dereq_('./util/collectLogger');\n\nvar _collectLogger2 = _interopRequireDefault(_collectLogger);\n\nvar _eventEmitter = _dereq_('./util/eventEmitter');\n\nvar _eventEmitter2 = _interopRequireDefault(_eventEmitter);\n\nvar _container = _dereq_('./wrappers/container');\n\nvar _container2 = _interopRequireDefault(_container);\n\nvar _replay = _dereq_('./wrappers/visuals/replay');\n\nvar _replay2 = _interopRequireDefault(_replay);\n\nvar _optionsWrapper = _dereq_('./wrappers/optionsWrapper');\n\nvar _optionsWrapper2 = _interopRequireDefault(_optionsWrapper);\n\nvar _browser = _dereq_('./util/browser');\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _resource = _dereq_('./resource');\n\nvar _resource2 = _interopRequireDefault(_resource);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar collectLogger;\nvar browser;\n\nfunction adjustOptions() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var localOptions = (0, _deepmerge2.default)(_options2.default, options, {\n    arrayMerge: function arrayMerge(destination, source) {\n      return source;\n    }\n  });\n\n  collectLogger = collectLogger || new _collectLogger2.default(localOptions);\n\n  localOptions.logger = collectLogger;\n  localOptions.debug = localOptions.logger.debug;\n\n  _optionsWrapper2.default.addFunctions(localOptions);\n\n  return localOptions;\n}\n\nfunction getBrowser(localOptions) {\n  if (!browser) {\n    browser = new _browser2.default(localOptions);\n  }\n\n  return browser;\n}\n\nvar VideomailClient = function VideomailClient(options) {\n  var localOptions = adjustOptions(options);\n  var container = new _container2.default(localOptions);\n  var debug = localOptions.debug;\n\n  var replay;\n\n  _eventEmitter2.default.call(this, localOptions, 'VideomailClient');\n\n  // expose all possible events\n  this.events = _events2.default;\n\n  function build() {\n    var building = false;\n\n    _readystate2.default.interactive(function (previousState) {\n      debug('Client: interactive(),', 'previousState =', previousState + ',', '!building =', !building + ',', '!isBuilt() =', !container.isBuilt());\n\n      // it can happen that it gets called twice, i.E. when an error is thrown\n      // in the middle of the build() fn\n      if (!building && !container.isBuilt()) {\n        building = true;\n        try {\n          container.build();\n        } catch (exc) {\n          throw exc;\n        } finally {\n          building = false;\n        }\n      }\n    });\n  }\n\n  this.show = function () {\n    if (container.isBuilt()) {\n      container.show();\n    } else {\n      this.once(_events2.default.BUILT, container.show);\n    }\n  };\n\n  // automatically adds a <video> element inside the given parentElement and loads\n  // it with the videomail\n  this.replay = function (videomail, parentElement) {\n    function buildReplay() {\n      if (typeof parentElement === 'string') {\n        parentElement = document.getElementById(parentElement);\n      }\n\n      if (!parentElement) {\n        if (!container.isBuilt()) {\n          // this will try build all over again\n          container.build();\n        }\n\n        if (!container.hasElement()) {\n          // if container.setElement() failed too, then complain\n          _readystate2.default.removeAllListeners();\n          throw new Error('Unable to replay video without a container nor parent element.');\n        }\n      } else {\n        if (container.isOutsideElementOf(parentElement)) {\n          replay = new _replay2.default(parentElement, localOptions);\n          replay.build();\n        }\n      }\n\n      if (!replay) {\n        replay = container.getReplay();\n      }\n\n      if (!parentElement) {\n        parentElement = replay.getParentElement();\n      }\n\n      if (videomail) {\n        videomail = container.addPlayerDimensions(videomail, parentElement);\n      }\n\n      if (container.isOutsideElementOf(parentElement)) {\n        // replay element must be outside of the container\n        container.hideForm({ deep: true });\n      } else {\n        container.loadForm(videomail);\n      }\n\n      // slight delay needed to avoid HTTP 416 errors (request range unavailable)\n      setTimeout(function () {\n        replay.setVideomail(videomail);\n        container.showReplayOnly();\n      }, 10e2); // not sure, but probably can be reduced a bit\n    }\n\n    _readystate2.default.interactive(buildReplay);\n  };\n\n  this.startOver = function (params) {\n    if (replay) {\n      replay.hide();\n      replay.reset();\n    }\n\n    container.startOver(params);\n  };\n\n  this.unload = function (e) {\n    _readystate2.default.removeAllListeners();\n    container.unload(e);\n  };\n\n  this.hide = function () {\n    container.hide();\n  };\n\n  this.get = function (key, cb) {\n    new _resource2.default(localOptions).get(key, function (err, videomail) {\n      if (err) {\n        cb(err);\n      } else {\n        cb(null, container.addPlayerDimensions(videomail));\n      }\n    });\n  };\n\n  this.canRecord = function () {\n    return getBrowser(localOptions).canRecord();\n  };\n\n  // return true when a video has been recorded but is not sent yet\n  this.isDirty = function () {\n    return container.isDirty();\n  };\n\n  this.isRecording = function () {\n    return container.isRecording();\n  };\n\n  this.submit = function () {\n    container.submit();\n  };\n\n  this.getLogLines = function () {\n    if (localOptions.logger && localOptions.logger.getLines) {\n      return localOptions.logger.getLines();\n    }\n  };\n\n  build();\n};\n\n_util2.default.inherits(VideomailClient, _eventEmitter2.default);\n\nObject.keys(_constants2.default.public).forEach(function (name) {\n  VideomailClient[name] = _constants2.default.public[name];\n});\n\n// just another convenient thing\nVideomailClient.events = _events2.default;\n\nexports.default = VideomailClient;\n\n},{\"./constants\":87,\"./events\":88,\"./options\":89,\"./resource\":90,\"./util/browser\":93,\"./util/collectLogger\":94,\"./util/eventEmitter\":95,\"./wrappers/container\":102,\"./wrappers/optionsWrapper\":105,\"./wrappers/visuals/replay\":114,\"deepmerge\":16,\"readystate\":63,\"util\":80}],87:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// constants (changing these only break down functionality, so be careful)\n\nexports.default = {\n  SITE_NAME_LABEL: 'x-videomail-site-name',\n  VERSION_LABEL: 'videomailClientVersion',\n\n  public: {\n    ENC_TYPE_APP_JSON: 'application/json',\n    ENC_TYPE_FORM: 'application/x-www-form-urlencoded'\n  }\n};\n\n},{}],88:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _keymirror = _dereq_('keymirror');\n\nvar _keymirror2 = _interopRequireDefault(_keymirror);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = (0, _keymirror2.default)({\n  BUILT: null, // all dom elements are ready, are in the DOM\n  FORM_READY: null, // form is ready, available in the DOM\n  LOADING_USER_MEDIA: null, // asking for webcam access\n  USER_MEDIA_READY: null, // user media (= webcam) is ready, loaded\n  CONNECTING: null, // socket is connecting to server\n  CONNECTED: null, // socket is connected to server\n  DISCONNECTED: null, // socket to server is disconnected\n  COUNTDOWN: null, // countdown for recording has started\n  RECORDING: null, // webcam is recording\n  STOPPING: null, // recording is being stopped (= preview)\n  PROGRESS: null, // start sending\n  BEGIN_AUDIO_ENCODING: null, // encoding video\n  BEGIN_VIDEO_ENCODING: null, // encoding video\n  RESETTING: null, // resetting everything to go back to initial state\n  PAUSED: null, // recording is being paused\n  RESUMING: null, // recording is resumed\n  PREVIEW: null, // video preview is set\n  PREVIEW_SHOWN: null, // video preview is shown\n  REPLAY_SHOWN: null, // submitted video is shown\n  INVALID: null, // form is invalid\n  VALIDATING: null, // form is being validated\n  VALID: null, // form is valid\n  SUBMITTING: null, // form is being submitted\n  SUBMITTED: null, // form has been successfully submitted\n  ERROR: null, // an error occured\n  BLOCKING: null, // something serious, most likely an error, is shown and blocks\n  SENDING_FIRST_FRAME: null, // emitted before the first frame is being computed\n  FIRST_FRAME_SENT: null, // emitted once when fist frame has been sent to server\n  HIDE: null, // emitted when hidden\n  NOTIFYING: null, // notifies user about something (not blocking)\n  ENABLING_AUDIO: null, // about to enable audio\n  DISABLING_AUDIO: null, // about to disable audio\n  LOADED_META_DATA: null, // raised when webcam knows its dimensions\n  EVENT_EMITTED: null, // for debugging only, is emitted when an event is emitted lol,\n  GOING_BACK: null, // switch from replaying back to recording\n  STARTING_OVER: null, // starting all over again back to its inital state\n  ASKING_WEBCAM_PERMISSION: null, // when about to ask for webcam permissions\n  VISIBLE: null, // document just became visible\n  INVISIBLE: null // document just became INvisible\n});\n\n},{\"keymirror\":45}],89:[function(_dereq_,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _package = _dereq_('../package.json');\n\nvar PRODUCTION = process.env.NODE_ENV === 'production';\n\nexports.default = {\n  logger: null, // define logging instance. leave null for default, console.\n  logStackSize: 30, // limits the stack size of log outputs to collect\n  verbose: !PRODUCTION, // set true to log more info\n  baseUrl: 'https://videomail.io', // leave as it, permanent url to post videos\n  socketUrl: 'wss://videomail.io', // leave as it, permanent url to send frames\n  siteName: 'videomail-client-demo', // Required for API, use https://videomail.io/whitelist\n  cache: true, // reduces GET queries when loading videos\n  insertCss: true, // inserts predefined CSS, see examples\n  enablePause: true, // enable pause/resume button\n  enableAutoPause: true, // automatically pauses when window becomes inactive\n  enableSpace: true, // hitting space can pause recording\n  disableSubmit: false, // set this to true if you do not want to submit videos,\n  // but just want to record and replay these temporarily\n  enableAutoValidation: true, // automatically validates all form inputs if any exist and\n  // does not /enable disable submit button after recording\n  // when something else seems invalid.\n  enableAutoSubmission: true, // automatically submits the form where the videomail-client\n  // appears upon press of submit button. disable it when\n  // you want a framework to deal with the form submission itself.\n\n  enctype: 'application/json', // enctype for the form submission. currently implemented are:\n  // 'application/json' and 'application/x-www-form-urlencoded'\n\n  // default CSS selectors you can alter, see examples\n  selectors: {\n    containerId: 'videomail',\n    replayClass: 'replay',\n    userMediaClass: 'userMedia',\n    visualsClass: 'visuals',\n    buttonClass: null, // can also be used as a default class for all buttons\n    buttonsClass: 'buttons',\n\n    recordButtonClass: 'record',\n    pauseButtonClass: 'pause',\n    resumeButtonClass: 'resume',\n    previewButtonClass: 'preview',\n    recordAgainButtonClass: 'recordAgain',\n    submitButtonClass: 'submit',\n\n    subjectInputName: 'subject', // the form input name for subject\n    fromInputName: 'from', // the form input name for the from email\n    toInputName: 'to', // the form input name for the to email\n    bodyInputName: 'body', // the form input name for the message (body)\n    sendCopyInputName: 'sendCopy', // the form checkbox name for sending myself a copy\n\n    keyInputName: 'videomail_key',\n    parentKeyInputName: 'videomail_parent_key',\n    aliasInputName: 'videomail_alias',\n\n    formId: null, // automatically detects form if any\n    submitButtonId: null, // semi-automatically detects submit button in the form\n    // but if that does not work, try using the\n    submitButtonSelector: null // submitButtonSelector\n  },\n\n  audio: {\n    enabled: false, // set to true for experimential audio recording\n    'switch': false, // enables a switcher for audio recording (on/off)\n    volume: 0.2, // must be between 0 .. 1 but 0.20 is recommeded to avoid\n    // distorting at the higher volume peaks\n    bufferSize: 1024 // decides how often the audio is being sampled, must be a power of two.\n    // the higher the less traffic, but harder to adjust with rubberband\n    // to match with the video length on server side during encoding\n  },\n\n  video: {\n    fps: 15, // depends on your connection\n    limitSeconds: 30, // recording automatically stops after that limit\n    countdown: 3, // set it to 0 or false to disable it\n\n    // it is recommended to set one dimension only and leave the other one to auto\n    // because each webcam has a different aspect ratio\n\n    width: 'auto', // or use an integer for exact pixels\n    height: 'auto' // or use an integer for exact pixels\n  },\n\n  image: {\n    quality: 0.44,\n    types: ['webp', 'jpeg'] // recommended settings to make most of all browsers\n  },\n\n  // alter these text for internationalisation\n  text: {\n    pausedHeader: 'Paused',\n    pausedHint: null,\n    sending: 'Teleporting',\n    encoding: 'Encoding',\n    limitReached: 'Limit reached',\n    buttons: {\n      'record': 'Record video',\n      'recordAgain': 'Record again',\n      'resume': 'Resume',\n      'pause': 'Pause',\n      'preview': 'Preview'\n    }\n  },\n\n  notifier: {\n    entertain: false, // when true, user is entertained while waiting, see examples\n    entertainClass: 'bg',\n    entertainLimit: 6,\n    entertainInterval: 9000\n  },\n\n  timeouts: {\n    userMedia: 20e3, // in milliseconds, increase if you want user give more time to enable webcam\n    connection: 1e4, // in seconds, increase if api is slow\n    pingInterval: 45e3 // in milliseconds, keeps webstream (connection) alive when pausing\n  },\n\n  callbacks: {\n    // a custom callback to tweak form data before posting to server\n    // this is for advanced use only and shouldn't be used if possible\n    adjustFormDataBeforePosting: null\n  },\n\n  defaults: {\n    from: null, // define default FROM email address\n    to: null, // define default TO email address\n    subject: null, // define default subject line\n    body: null // define default body content\n  },\n\n  // a special flag to indicate that everything to be initialised\n  // serves only for playing existing videomails with the replay function\n  playerOnly: false,\n\n  // show errors inside the container?\n  displayErrors: true,\n\n  // true = all form inputs get disabled and disappear when browser can't record\n  adjustFormOnBrowserError: false,\n\n  // when true, any errors will be sent to the videomail server for analysis\n  // ps: can be a function too returning a boolean\n  reportErrors: false,\n\n  // just for testing purposes to simulate browser agent handling\n  fakeUaString: null,\n\n  version: _package.version\n};\n\n}).call(this,_dereq_('_process'))\n},{\"../package.json\":85,\"_process\":50}],90:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (options) {\n  var cache = {};\n\n  function applyDefaultValue(videomail, name) {\n    if (options.defaults[name] && !videomail[name]) {\n      videomail[name] = options.defaults[name];\n    }\n\n    return videomail;\n  }\n\n  function applyDefaultValues(videomail) {\n    if (options.defaults) {\n      videomail = applyDefaultValue(videomail, 'from');\n      videomail = applyDefaultValue(videomail, 'to');\n      videomail = applyDefaultValue(videomail, 'subject');\n      videomail = applyDefaultValue(videomail, 'body');\n    }\n\n    return videomail;\n  }\n\n  function packError(err, res) {\n    if (res && res.body && res.body.error) {\n      // use the server generated text instead of the superagent's default text\n      err = res.body.error;\n\n      if (!err.message && res.text) {\n        err.message = res.text;\n      }\n    }\n\n    return err;\n  }\n\n  function fetch(alias, cb) {\n    _superagent2.default.get('/videomail/' + alias + '/snapshot').set('Accept', 'application/json').set(_constants2.default.SITE_NAME_LABEL, options.siteName).timeout(options.timeouts.connection).end(function (err, res) {\n      err = packError(err, res);\n\n      if (err) {\n        cb(err);\n      } else {\n        var videomail = res.body ? res.body : null;\n\n        if (options.cache) {\n          cache[CACHE_KEY] = videomail;\n        }\n\n        cb(null, videomail);\n      }\n    });\n  }\n\n  function write(method, videomail, identifier, cb) {\n    if (!cb) {\n      cb = identifier;\n      identifier = null;\n    }\n\n    var queryParams = {};\n\n    var url = options.baseUrl + '/videomail/';\n    var request;\n\n    if (identifier) {\n      url += identifier;\n    }\n\n    request = (0, _superagent2.default)(method, url);\n\n    queryParams[_constants2.default.SITE_NAME_LABEL] = options.siteName;\n\n    request.query(queryParams).send(videomail).timeout(options.timeout).end(function (err, res) {\n      err = packError(err, res);\n\n      if (err) {\n        cb(err);\n      } else {\n        if (options.cache && videomail[CACHE_KEY]) {\n          cache[videomail[CACHE_KEY]] = res.body.videomail;\n        }\n\n        cb(null, res.body.videomail, res.body);\n      }\n    });\n  }\n\n  this.get = function (alias, cb) {\n    if (options.cache && cache[alias]) {\n      // keep all callbacks async\n      setTimeout(function () {\n        cb(null, cache[alias]);\n      }, 0);\n    } else {\n      fetch(alias, cb);\n    }\n  };\n\n  this.reportError = function (err, cb) {\n    var queryParams = {};\n    var url = options.baseUrl + '/client-error/';\n    var request = (0, _superagent2.default)('post', url);\n\n    queryParams[_constants2.default.SITE_NAME_LABEL] = options.siteName;\n\n    request.query(queryParams).send(err).timeout(options.timeout).end(function (err, res) {\n      err = packError(err, res);\n      if (err) {\n        cb && cb(err);\n      } else {\n        cb && cb();\n      }\n    });\n  };\n\n  this.post = function (videomail, cb) {\n    videomail = applyDefaultValues(videomail);\n\n    // always good to know the version of the client\n    // the videomail was submitted with\n    videomail[_constants2.default.VERSION_LABEL] = options.version;\n\n    if (options.callbacks.adjustFormDataBeforePosting) {\n      options.callbacks.adjustFormDataBeforePosting(videomail, function (err, adjustedVideomail) {\n        if (err) {\n          cb(err);\n        } else {\n          write('post', adjustedVideomail, cb);\n        }\n      });\n    } else {\n      write('post', videomail, cb);\n    }\n  };\n\n  this.put = function (videomail, cb) {\n    write('put', videomail, videomail.key, cb);\n  };\n\n  this.form = function (formData, url, cb) {\n    var formType;\n\n    switch (options.enctype) {\n      case _constants2.default.public.ENC_TYPE_APP_JSON:\n        formType = 'json';\n        break;\n      case _constants2.default.public.ENC_TYPE_FORM:\n        formType = 'form';\n        break;\n      default:\n        // keep all callbacks async\n        setTimeout(function () {\n          cb(new Error('Invalid enctype given: ' + options.enctype));\n        }, 0);\n    }\n\n    if (formType) {\n      _superagent2.default.post(url).type(formType).send(formData).timeout(options.timeout).end(function (err, res) {\n        err = packError(err, res);\n\n        if (err) {\n          cb(err);\n        } else {\n          cb(null, res);\n        }\n      });\n    }\n  };\n};\n\nvar _superagent = _dereq_('superagent');\n\nvar _superagent2 = _interopRequireDefault(_superagent);\n\nvar _constants = _dereq_('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar CACHE_KEY = 'alias';\n\n},{\"./constants\":87,\"superagent\":70}],91:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = '@keyframes a{0%{opacity:.9}35%{opacity:.9}50%{opacity:.1}85%{opacity:.1}to{opacity:.9}}.IIV::-webkit-media-controls-play-button,.IIV::-webkit-media-controls-start-playback-button{opacity:0;pointer-events:none;width:5px}.videomail .visuals{position:relative}.videomail .visuals video.replay{width:100%;height:100%}.videomail .countdown,.videomail .pausedHeader,.videomail .pausedHint,.videomail .recordNote,.videomail .recordTimer{margin:0;height:auto}.videomail .countdown,.videomail .paused,.videomail .recordNote,.videomail .recordTimer,.videomail noscript{position:absolute}.videomail .countdown,.videomail .pausedHeader,.videomail .pausedHint,.videomail .recordNote,.videomail .recordTimer,.videomail noscript{font-weight:700}.videomail .countdown,.videomail .paused,.videomail noscript{width:100%;top:50%;transform:translateY(-50%)}.videomail .countdown,.videomail .pausedHeader,.videomail .pausedHint{text-align:center;text-shadow:0 0 2px #fff}.videomail .countdown,.videomail .pausedHeader{opacity:.85;font-size:440%}.videomail .pausedHint{font-size:150%}.videomail .recordNote,.videomail .recordTimer{right:.7em;background:hsla(0,0%,4%,.8);padding:.4em .4em .3em;transition:all 1s ease;color:#00d814;font-family:monospace;opacity:.9}.videomail .recordNote.near,.videomail .recordTimer.near{color:#eb9369}.videomail .recordNote.nigh,.videomail .recordTimer.nigh{color:#ea4b2a}.videomail .recordTimer{top:.7em}.videomail .recordNote{top:3.6em}.videomail .recordNote:before{content:\"REC\";animation:a 1s infinite}.videomail .notifier{overflow:hidden;box-sizing:border-box;height:100%}.videomail .radioGroup{display:block}.videomail video{margin-bottom:0}';\n\n},{}],92:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (userMedia, options) {\n  var scriptProcessor;\n  var audioInput;\n  var vcAudioContext;\n\n  function hasAudioContext() {\n    return !!getAudioContext();\n  }\n\n  function getAudioContext() {\n    // instantiate only once\n    if (!vcAudioContext) {\n      var AudioContext = window.AudioContext || window.webkitAudioContext;\n      vcAudioContext = new AudioContext();\n    }\n\n    return vcAudioContext;\n  }\n\n  function onAudioProcess(e, cb) {\n    if (!userMedia.isRecording() || userMedia.isPaused()) {\n      return;\n    }\n\n    // Returns a Float32Array containing the PCM data associated with the channel,\n    // defined by the channel parameter (with 0 representing the first channel)\n    var float32Array = e.inputBuffer.getChannelData(0);\n\n    cb(new _audioSample2.default(float32Array));\n  }\n\n  this.init = function (localMediaStream) {\n    options.debug('AudioRecorder: init()');\n\n    // creates an audio node from the microphone incoming stream\n    var volume = getAudioContext().createGain();\n\n    try {\n      audioInput = getAudioContext().createMediaStreamSource(localMediaStream);\n    } catch (exc) {\n      throw _videomailError2.default.create('Webcam has no audio', exc.toString(), options);\n    }\n\n    if (!(0, _isPowerOfTwo2.default)(options.audio.bufferSize)) {\n      throw _videomailError2.default.create('Audio buffer size must be a power of two.', options);\n    } else if (!options.audio.volume || options.audio.volume > 1) {\n      throw _videomailError2.default.create('Audio volume must be between zero and one.', options);\n    }\n\n    volume.gain.value = options.audio.volume;\n\n    // Create a ScriptProcessorNode with the given bufferSize and\n    // a single input and output channel\n    scriptProcessor = getAudioContext().createScriptProcessor(options.audio.bufferSize, CHANNELS, CHANNELS);\n\n    // connect stream to our scriptProcessor\n    audioInput.connect(scriptProcessor);\n\n    // connect our scriptProcessor to the previous destination\n    scriptProcessor.connect(getAudioContext().destination);\n\n    // connect volume\n    audioInput.connect(volume);\n    volume.connect(scriptProcessor);\n  };\n\n  this.record = function (cb) {\n    options.debug('AudioRecorder: record()');\n\n    scriptProcessor.onaudioprocess = function (e) {\n      onAudioProcess(e, cb);\n    };\n  };\n\n  this.stop = function () {\n    options.debug('AudioRecorder: stop()');\n\n    if (scriptProcessor) {\n      scriptProcessor.onaudioprocess = undefined;\n    }\n\n    if (audioInput) {\n      audioInput.disconnect();\n    }\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/AudioContext/close\n    if (hasAudioContext()) {\n      if (getAudioContext().close) {\n        getAudioContext().close().then(function () {\n          options.debug('AudioRecorder: audio context is closed');\n          vcAudioContext = null;\n        }).catch(function (err) {\n          throw _videomailError2.default.create(err, options);\n        });\n      } else {\n        vcAudioContext = null;\n      }\n    }\n  };\n\n  this.getSampleRate = function () {\n    if (hasAudioContext()) {\n      return getAudioContext().sampleRate;\n    } else {\n      return -1;\n    }\n  };\n};\n\nvar _isPowerOfTwo = _dereq_('is-power-of-two');\n\nvar _isPowerOfTwo2 = _interopRequireDefault(_isPowerOfTwo);\n\nvar _audioSample = _dereq_('audio-sample');\n\nvar _audioSample2 = _interopRequireDefault(_audioSample);\n\nvar _videomailError = _dereq_('./videomailError');\n\nvar _videomailError2 = _interopRequireDefault(_videomailError);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar CHANNELS = 1;\n\n// for inspiration see\n// https://github.com/saebekassebil/microphone-stream\n\n// todo code needs rewrite\n\n},{\"./videomailError\":100,\"audio-sample\":4,\"is-power-of-two\":42}],93:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _uaParserJs = _dereq_('ua-parser-js');\n\nvar _uaParserJs2 = _interopRequireDefault(_uaParserJs);\n\nvar _defined = _dereq_('defined');\n\nvar _defined2 = _interopRequireDefault(_defined);\n\nvar _videomailError = _dereq_('./videomailError');\n\nvar _videomailError2 = _interopRequireDefault(_videomailError);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Browser = function Browser(options) {\n  options = options || {};\n\n  var firefoxDownload = 'http://www.mozilla.org/firefox/update/';\n  var edgeDownload = 'https://www.microsoft.com/en-us/download/details.aspx?id=48126';\n  var chromeDownload = 'http://www.google.com/chrome/';\n  var chromiumDownload = 'http://www.chromium.org/getting-involved/download-chromium';\n  var browseHappyLink = 'http://browsehappy.com';\n  var ua = (0, _defined2.default)(options.fakeUaString, typeof window !== 'undefined' && window.navigator && window.navigator.userAgent, '');\n\n  var uaParser = new _uaParserJs2.default(ua).getResult();\n\n  var isIOS = uaParser.os.name === 'iOS';\n  var browserVersion = parseFloat(uaParser.browser.version);\n  var isChrome = uaParser.browser.name === 'Chrome';\n  var isChromium = uaParser.browser.name === 'Chromium';\n  var firefox = uaParser.browser.name === 'Firefox';\n  var osVersion = parseFloat(uaParser.os.version);\n  var isWindows = uaParser.os.name === 'Windows';\n  var isEdge = uaParser.browser.name === 'Edge' || isWindows && osVersion >= 10;\n  var isIE = /IE/.test(uaParser.browser.name);\n  var isSafari = /Safari/.test(uaParser.browser.name);\n  var isOpera = /Opera/.test(uaParser.browser.name);\n  var isAndroid = /Android/.test(uaParser.os.name);\n  var chromeBased = isChrome || isChromium;\n\n  var isMobile = isIOS || isAndroid;\n  var isOkSafari = isSafari && browserVersion >= 11;\n  var isOkIOS = isIOS && osVersion >= 11;\n  var isBadIOS = isIOS && osVersion < 11;\n\n  var okBrowser = chromeBased || firefox || isAndroid || isOpera || isEdge || isOkSafari || isOkIOS;\n\n  var self = this;\n\n  var videoType;\n\n  function getRecommendation() {\n    var warning;\n\n    if (firefox) {\n      if (isIOS) {\n        warning = 'Firefox on iOS is not ready for cameras yet. Hopefully in near future ...';\n      } else {\n        warning = 'Probably you need to <a href=\"' + firefoxDownload + '\" target=\"_blank\">' + 'upgrade Firefox</a> to fix this.';\n      }\n    } else if (isChrome) {\n      if (isIOS) {\n        warning = 'Chrome on iOS is not ready for cameras yet. Hopefully in near future ...';\n      } else {\n        warning = 'Probably you need to <a href=\"' + chromeDownload + '\" target=\"_blank\">' + 'upgrade Chrome</a> to fix this.';\n      }\n    } else if (isChromium) {\n      warning = 'Probably you need to <a href=\"' + chromiumDownload + '\" target=\"_blank\">' + 'upgrade Chromium</a> to fix this.';\n    } else if (isIE) {\n      warning = 'Instead of Internet Explorer you need to upgrade to' + ' <a href=\"' + edgeDownload + '\" target=\"_blank\">Edge</a>.';\n    } else if (isOkSafari) {\n      warning = 'Probably you need to shut down Safari and restart it, this for correct webcam access.';\n    } else if (isSafari) {\n      warning = 'Safari below version 11 has no webcam support.<br/>Better upgrade Safari or pick' + ' <a href=\"' + chromeDownload + '\" target=\"_blank\">Chrome</a>,' + ' <a href=\"' + firefoxDownload + '\" target=\"_blank\">Firefox</a> or Android.';\n    }\n\n    return warning;\n  }\n\n  function getUserMediaWarning() {\n    var warning;\n\n    if (isBadIOS) {\n      warning = 'On iPads/iPhones below iOS v11 this cameras feature is missing.<br/><br/>' + 'For now, we recommend you to upgrade iOS or to use an Android device.';\n    } else {\n      warning = getRecommendation();\n    }\n\n    if (!warning) {\n      if (self.isChromeBased() || self.isFirefox() || isSafari) {\n        warning = 'For the webcam feature, your browser needs an upgrade.';\n      } else {\n        warning = 'Hence we recommend you to use either ' + '<a href=\"' + chromeDownload + '\" target=\"_blank\">Chrome</a>, ' + '<a href=\"' + firefoxDownload + '\" target=\"_blank\">Firefox</a>, ' + '<a href=\"' + edgeDownload + '\" target=\"_blank\">Edge</a> or Android.';\n      }\n    }\n\n    return warning;\n  }\n\n  function getPlaybackWarning() {\n    var warning = getRecommendation();\n\n    if (!warning) {\n      warning = '<a href=\"' + browseHappyLink + '\" target=\"_blank\">Upgrading your browser</a> might help.';\n    }\n\n    return warning;\n  }\n\n  function canPlayType(video, type) {\n    var canPlayType;\n\n    if (video && video.canPlayType) {\n      canPlayType = video.canPlayType('video/' + type);\n    }\n\n    return canPlayType;\n  }\n\n  // just temporary\n  this.canRecord = function () {\n    var hasNavigator = typeof navigator !== 'undefined';\n    var canRecord = false;\n\n    if (hasNavigator && navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      canRecord = true;\n    } else {\n      var getUserMediaType = hasNavigator && _typeof(navigator.getUserMedia_);\n\n      canRecord = getUserMediaType === 'function';\n    }\n\n    return canRecord;\n  };\n\n  this.checkRecordingCapabilities = function () {\n    var err;\n\n    if (!okBrowser || !this.canRecord()) {\n      var classList = [];\n\n      if (isBadIOS) {\n        classList.push(_videomailError2.default.IOS_PROBLEM);\n      } else {\n        classList.push(_videomailError2.default.BROWSER_PROBLEM);\n      }\n\n      var message;\n\n      // good to be able to distinguish between two reasons why and what sort of camera it is\n      if (!okBrowser) {\n        if (isMobile) {\n          message = 'Sorry, your browser is unable to use your mobile camera';\n        } else {\n          message = 'Sorry, your browser is unable to use webcams';\n        }\n      } else {\n        if (isMobile) {\n          message = 'Sorry, your browser cannot record from your mobile camera';\n        } else {\n          message = 'Sorry, your browser cannot record from webcams';\n        }\n      }\n\n      err = _videomailError2.default.create({\n        message: message\n      }, getUserMediaWarning(), options, {\n        classList: classList\n      });\n    }\n\n    return err;\n  };\n\n  this.checkPlaybackCapabilities = function (video) {\n    options.debug('Browser: checkPlaybackCapabilities()');\n\n    var err;\n    var message;\n\n    if (!video) {\n      message = 'No HTML5 support for video tag!';\n    } else if (!this.getVideoType(video)) {\n      message = 'Your old browser cannot support modern video codecs';\n    } else if (!video.setAttribute) {\n      // fixes \"Not implemented\" error on older browsers\n      message = 'Unable to set video attributes in your old browser';\n    }\n\n    if (message) {\n      err = _videomailError2.default.create(message, getPlaybackWarning(), options);\n    }\n\n    return err;\n  };\n\n  this.checkBufferTypes = function () {\n    var err;\n\n    if (typeof window === 'undefined' || typeof window.atob === 'undefined') {\n      err = _videomailError2.default.create('atob is not supported', options);\n    } else if (typeof window.ArrayBuffer === 'undefined') {\n      err = _videomailError2.default.create('ArrayBuffers are not supported', options);\n    } else if (typeof window.Uint8Array === 'undefined') {\n      err = _videomailError2.default.create('Uint8Arrays are not supported', options);\n    }\n\n    return err;\n  };\n\n  this.getVideoType = function (video) {\n    if (!videoType) {\n      // there is a bug in canPlayType within chrome for mp4\n      if (canPlayType(video, 'mp4') && !chromeBased) {\n        videoType = 'mp4';\n      } else if (canPlayType(video, 'webm')) {\n        videoType = 'webm';\n      }\n    }\n\n    return videoType;\n  };\n\n  this.getNoAccessIssue = function () {\n    var message = 'Unable to access webcam';\n    var explanation;\n\n    if (this.isChromeBased()) {\n      explanation = 'Click on the allow button to grant access to your webcam.';\n    } else if (this.isFirefox()) {\n      explanation = 'Please grant Firefox access to your webcam.';\n    } else {\n      explanation = 'Your system does not let your browser access your webcam.';\n    }\n\n    return _videomailError2.default.create(message, explanation, options);\n  };\n\n  this.isChromeBased = function () {\n    return chromeBased;\n  };\n\n  this.isFirefox = function () {\n    return firefox;\n  };\n\n  this.isEdge = function () {\n    return isEdge;\n  };\n\n  this.isAndroid = function () {\n    return isAndroid;\n  };\n\n  this.isMobile = function () {\n    return uaParser.device.type === 'mobile';\n  };\n\n  this.isOkSafari = function () {\n    return isOkSafari;\n  };\n\n  this.getUsefulData = function () {\n    return {\n      browser: uaParser.browser,\n      device: uaParser.device,\n      os: uaParser.os,\n      engine: uaParser.engine,\n      userAgent: ua\n    };\n  };\n};\n\nexports.default = Browser;\n\n// so that we also can require() it from videomailError.js within\n\nmodule.exports = Browser;\n\n},{\"./videomailError\":100,\"defined\":17,\"ua-parser-js\":76}],94:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function () {\n  var localOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var browser = new _browser2.default(localOptions);\n  var logger = localOptions.logger || console;\n  var containerId = localOptions.selectors && localOptions.selectors.containerId || 'undefined container id';\n  var stack = [];\n\n  function lifo(level, parameters) {\n    var line = _util2.default.format.apply(_util2.default, parameters);\n\n    if (stack.length > localOptions.logStackSize) {\n      stack.pop();\n    }\n\n    stack.push('[' + level + '] ' + line);\n\n    return line;\n  }\n\n  function addContainerId(firstArgument) {\n    return '#' + containerId + ' [' + new Date().toLocaleTimeString() + '] > ' + firstArgument;\n  }\n\n  // workaround: since we cannot overwrite console.log without having the correct file and line number\n  // we'll use groupCollapsed() and trace() instead to get these.\n  this.debug = function () {\n    // always add it for better client error reports\n    var args = [].slice.call(arguments, 0);\n    args[0] = addContainerId(args[0]);\n\n    var output = lifo('debug', args);\n\n    if (localOptions.verbose) {\n      if (browser.isFirefox()) {\n        logger.debug(output);\n      } else if (logger.groupCollapsed) {\n        logger.groupCollapsed(output);\n        logger.trace('Trace');\n        logger.groupEnd();\n      } else if (logger.debug) {\n        logger.debug(output);\n      } else {\n        // last resort if everything else fails for any weird reasons\n        console.log(output);\n      }\n    }\n  };\n\n  this.error = function () {\n    var args = [].slice.call(arguments, 0);\n    args[0] = addContainerId(args[0]);\n\n    logger.error(lifo('error', args));\n  };\n\n  this.warn = function () {\n    var args = [].slice.call(arguments, 0);\n    args[0] = addContainerId(args[0]);\n\n    logger.warn(lifo('warn', args));\n  };\n\n  this.getLines = function () {\n    return stack;\n  };\n};\n\nvar _util = _dereq_('util');\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _browser = _dereq_('./browser');\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n},{\"./browser\":93,\"util\":80}],95:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (options, name) {\n  this.emit = function (event) {\n    var args = Array.prototype.slice.call(arguments, 0);\n\n    if (!event) {\n      throw _videomailError2.default.create('You cannot emit without an event.', options);\n    }\n\n    // Automatically convert errors to videomail errors\n    if (event === _events2.default.ERROR) {\n      var err = args[1];\n\n      err = _videomailError2.default.create(err, options);\n\n      args[1] = err;\n    }\n\n    if (options.debug) {\n      if (event !== 'removeListener' && event !== 'newListener') {\n        var moreArguments;\n\n        if (args[1]) {\n          moreArguments = args.slice(1);\n        }\n\n        if (moreArguments) {\n          options.debug('%s emits: %s', name, event, moreArguments);\n        } else {\n          options.debug('%s emits: %s', name, event);\n        }\n      }\n    }\n\n    var result = _despot2.default.emit.apply(_despot2.default, args);\n\n    // Todo: have this emitted through a configuration because it is pretty noisy\n    // if (event !== Events.EVENT_EMITTED)\n    //     this.emit(Events.EVENT_EMITTED, event)\n\n    return result;\n  };\n\n  this.on = function (eventName, cb) {\n    return _despot2.default.on(eventName, cb);\n  };\n\n  this.once = function (eventName, cb) {\n    return _despot2.default.once(eventName, cb);\n  };\n\n  this.listeners = function (eventName) {\n    return _despot2.default.listeners(eventName);\n  };\n\n  this.removeListener = function (eventName, cb) {\n    return _despot2.default.removeListener(eventName, cb);\n  };\n\n  this.removeAllListeners = function () {\n    _despot2.default.removeAllListeners();\n  };\n};\n\nvar _despot = _dereq_('despot');\n\nvar _despot2 = _interopRequireDefault(_despot);\n\nvar _videomailError = _dereq_('./videomailError');\n\nvar _videomailError2 = _interopRequireDefault(_videomailError);\n\nvar _events = _dereq_('./../events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n},{\"./../events\":88,\"./videomailError\":100,\"despot\":18}],96:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _filesize2 = _dereq_('filesize');\n\nvar _filesize3 = _interopRequireDefault(_filesize2);\n\nvar _humanizeDuration = _dereq_('humanize-duration');\n\nvar _humanizeDuration2 = _interopRequireDefault(_humanizeDuration);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// todo get rid of this class and use those imports directly\n\nexports.default = {\n  filesize: function filesize(bytes, round) {\n    return (0, _filesize3.default)(bytes, {\n      round: round\n    });\n  },\n\n  toTime: function toTime(t) {\n    return (0, _humanizeDuration2.default)(t);\n  }\n};\n\n},{\"filesize\":25,\"humanize-duration\":32}],97:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// taken from\n// https://bbc.github.io/tal/jsdoc/events_mediaevent.js.html\n\nexports.default = [\n// The user agent begins looking for media data, as part of\n// the resource selection algorithm.\n'loadstart',\n\n// The user agent is intentionally not currently fetching media data,\n// but does not have the entire media resource downloaded. networkState equals NETWORK_IDLE\n'suspend',\n\n// Playback has begun. Fired after the play() method has returned,\n// or when the autoplay attribute has caused playback to begin.\n// paused is newly false.\n// 'play', commented out since it has special treatment\n\n// The user agent has just determined the duration and dimensions of the\n// media resource and the timed tracks are ready.\n// readyState is newly equal to HAVE_METADATA or greater for the first time.\n// 'loadedmetadata', commented out since it has special treatment\n\n// The user agent is fetching media data.\n'progress',\n\n// The user agent is intentionally not currently fetching media data,\n// but does not have the entire media resource downloaded.\n// 'suspend', // commented out, we are already listening to it in code\n\n// Event The user agent stops fetching the media data before it is completely downloaded,\n// but not due to an error.  error is an object with the code MEDIA_ERR_ABORTED.\n'abort',\n\n// A media element whose networkState was previously not in the NETWORK_EMPTY\n// state has just switched to that state (either because of a fatal error\n// during load that's about to be reported, or because the load() method was\n// invoked while the resource selection algorithm was already running).\n'emptied',\n\n// The user agent is trying to fetch media data, but data is\n// unexpectedly not forthcoming\n'stalled',\n\n// Playback has been paused. Fired after the pause() method has returned.\n// paused is newly true.\n'pause',\n\n// The user agent can render the media data at the current playback position\n// for the first time.\n// readyState newly increased to HAVE_CURRENT_DATA or greater for the first time.\n'loadeddata',\n\n// Playback has stopped because the next frame is not available, but the user\n// agent expects that frame to become available in due course.\n// readyState is newly equal to or less than HAVE_CURRENT_DATA,\n// and paused is false. Either seeking is true, or the current playback\n// position is not contained in any of the ranges in buffered.\n// It is possible for playback to stop for two other reasons without\n// paused being false, but those two reasons do not fire this event:\n// maybe playback ended, or playback stopped due to errors.\n'waiting',\n\n// Playback has started. readyState is newly equal to or greater than\n// HAVE_FUTURE_DATA, paused is false, seeking is false,\n// or the current playback position is contained in one of the ranges in buffered.\n'playing',\n\n// The user agent can resume playback of the media data,\n// but estimates that if playback were to be started now, the media resource\n// could not be rendered at the current playback rate up to its end without\n// having to stop for further buffering of content.\n// readyState newly increased to HAVE_FUTURE_DATA or greater.\n'canplay',\n\n// The user agent estimates that if playback were to be started now,\n// the media resource could be rendered at the current playback rate\n// all the way to its end without having to stop for further buffering.\n// readyState is newly equal to HAVE_ENOUGH_DATA.\n'canplaythrough',\n\n// The seeking IDL attribute changed to true and the seek operation is\n// taking long enough that the user agent has time to fire the event.\n'seeking',\n\n// The seeking IDL attribute changed to false.\n'seeked',\n\n// Playback has stopped because the end of the media resource was reached.\n// currentTime equals the end of the media resource; ended is true.\n'ended',\n\n// Either the defaultPlaybackRate or the playbackRate attribute\n// has just been updated.\n'ratechange',\n\n// The duration attribute has just been updated.\n'durationchange',\n\n// Either the volume attribute or the muted attribute has changed.\n// Fired after the relevant attribute's setter has returned.\n'volumechange'\n\n// commented out, happen too often\n\n// The current playback position changed as part of normal playback or in\n// an especially interesting way, for example discontinuously.\n// 'timeupdate'\n];\n\n},{}],98:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.default = function (anything, options) {\n  if (anything === null) {\n    return 'null';\n  } else if (typeof anything === 'undefined') {\n    return 'undefined';\n  } else if (typeof anything === 'string') {\n    return anything;\n  } else if (Array.isArray(anything)) {\n    return arrayToString(anything);\n  } else if ((typeof anything === 'undefined' ? 'undefined' : _typeof(anything)) === 'object') {\n    return objectToString(anything, options);\n  } else {\n    return anything.toString();\n  }\n};\n\nvar _safeJsonStringify = _dereq_('safe-json-stringify');\n\nvar _safeJsonStringify2 = _interopRequireDefault(_safeJsonStringify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar DASH = '- ';\nvar SEPARATOR = '<br/>' + DASH;\n\nfunction arrayToString(array) {\n  if (array.length > 0) {\n    var lines = [];\n\n    array.forEach(function (element) {\n      if (element) {\n        lines.push((0, _safeJsonStringify2.default)(element));\n      }\n    });\n\n    return DASH + lines.join(SEPARATOR);\n  }\n}\n\nfunction objectToString(object, options) {\n  var propertyNames = Object.getOwnPropertyNames(object);\n  var excludes = options && options.excludes || [];\n  var lines = [];\n  var sLines;\n\n  // always ignore these\n  excludes.push('stack');\n\n  if (propertyNames.length > 0) {\n    var exclude = false;\n\n    propertyNames.forEach(function (name) {\n      if (excludes) {\n        exclude = excludes.indexOf(name) >= 0;\n      }\n\n      if (!exclude) {\n        // this to cover this problem:\n        // https://github.com/binarykitchen/videomail-client/issues/157\n        lines.push((0, _safeJsonStringify2.default)(object[name]));\n      }\n    });\n  }\n\n  if (lines.length === 1) {\n    sLines = lines.join();\n  } else if (lines.length > 1) {\n    sLines = DASH + lines.join(SEPARATOR);\n  }\n\n  return sLines;\n}\n\n},{\"safe-json-stringify\":67}],99:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function () {\n  var window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var navigator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  // https://github.com/julienetie/request-frame/issues/6\n  if (!window.screen) {\n    window.screen = {};\n  }\n\n  (0, _requestFrame2.default)('native');\n\n  // avoids warning \"navigator.mozGetUserMedia has been replaced by navigator.mediaDevices.getUserMedia\",\n  // see https://github.com/binarykitchen/videomail-client/issues/79\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // do not shim\n  } else {\n    navigator.getUserMedia_ = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n  }\n\n  if (!window.AudioContext && window.webkitAudioContext) {\n    window.AudioContext = window.webkitAudioContext;\n  }\n\n  if (!window.URL) {\n    window.URL = window.webkitURL || window.mozURL || window.msURL;\n  }\n\n  var methods = ['debug', 'groupCollapsed', 'groupEnd', 'error', 'exception', 'info', 'log', 'trace', 'warn'];\n\n  var console = {};\n\n  if (window.console) {\n    console = window.console;\n  } else {\n    window.console = function () {};\n  }\n\n  var method;\n  var length = methods.length;\n\n  while (length--) {\n    method = methods[length];\n\n    if (!console[method]) {\n      console[method] = function () {};\n    }\n  }\n};\n\n_dereq_('classlist.js');\n\n_dereq_('element-closest');\n\nvar _requestFrame = _dereq_('request-frame');\n\nvar _requestFrame2 = _interopRequireDefault(_requestFrame);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n},{\"classlist.js\":11,\"element-closest\":22,\"request-frame\":65}],100:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; // https://github.com/tgriesser/create-error\n\n\nvar _createError = _dereq_('create-error');\n\nvar _createError2 = _interopRequireDefault(_createError);\n\nvar _util = _dereq_('util');\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _pretty = _dereq_('./pretty');\n\nvar _pretty2 = _interopRequireDefault(_pretty);\n\nvar _resource = _dereq_('./../resource');\n\nvar _resource2 = _interopRequireDefault(_resource);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar VIDEOMAIL_ERR_NAME = 'Videomail Error';\n\nvar VideomailError = (0, _createError2.default)(Error, VIDEOMAIL_ERR_NAME, {\n  'explanation': undefined,\n  'logLines': undefined,\n  'useragent': undefined,\n  'url': undefined,\n  'stack': undefined\n});\n\n// shim pretty to exclude stack always\nvar pretty = function pretty(anything) {\n  return (0, _pretty2.default)(anything, { excludes: ['stack'] });\n};\n\n// static and public attribute of this class\nVideomailError.PERMISSION_DENIED = 'PERMISSION_DENIED';\nVideomailError.NOT_ALLOWED_ERROR = 'NotAllowedError';\nVideomailError.NOT_CONNECTED = 'Not connected';\nVideomailError.DOM_EXCEPTION = 'DOMException';\nVideomailError.STARTING_FAILED = 'Starting video failed';\nVideomailError.MEDIA_DEVICE_NOT_SUPPORTED = 'MediaDeviceNotSupported';\nVideomailError.BROWSER_PROBLEM = 'browser-problem';\nVideomailError.WEBCAM_PROBLEM = 'webcam-problem';\nVideomailError.IOS_PROBLEM = 'ios-problem';\nVideomailError.OVERCONSTRAINED = 'OverconstrainedError';\nVideomailError.NOT_FOUND_ERROR = 'NotFoundError';\nVideomailError.NOT_READABLE_ERROR = 'NotReadableError';\nVideomailError.SECURITY_ERROR = 'SecurityError';\nVideomailError.TRACK_START_ERROR = 'TrackStartError';\n\n// static function to convert an error into a videomail error\nVideomailError.create = function (err, explanation, options, parameters) {\n  if (err && err.name === VIDEOMAIL_ERR_NAME) {\n    return err;\n  }\n\n  if (!options && explanation) {\n    options = explanation;\n    explanation = undefined;\n  }\n\n  options = options || {};\n  parameters = parameters || {};\n\n  // be super robust\n  var debug = options && options.debug || console.log;\n  var audioEnabled = options && options.isAudioEnabled && options.isAudioEnabled();\n\n  debug('VideomailError: create()', err, explanation);\n\n  var classList = parameters.classList || [];\n\n  // Require Browser here, not at the top of the file to avoid\n  // recursion. Because the Browser class is requiring this file as well.\n  var Browser = _dereq_('./browser');\n  var browser = new Browser(options);\n\n  var errType;\n  var message;\n  var stack;\n\n  // whole code is ugly because all browsers behave so differently :(\n\n  if ((typeof err === 'undefined' ? 'undefined' : _typeof(err)) === 'object') {\n    if (err.name === VideomailError.TRACK_START_ERROR) {\n      errType = VideomailError.TRACK_START_ERROR;\n    } else if (err.name === VideomailError.SECURITY_ERROR) {\n      errType = VideomailError.SECURITY_ERROR;\n    } else if (err.code === 8 && err.name === VideomailError.NotFoundError) {\n      errType = VideomailError.NotFoundError;\n    } else if (err.code === 35 || err.name === VideomailError.NOT_ALLOWED_ERROR) {\n      // https://github.com/binarykitchen/videomail.io/issues/411\n      errType = VideomailError.NOT_ALLOWED_ERROR;\n    } else if (err.code === 1 && err.PERMISSION_DENIED === 1) {\n      errType = VideomailError.PERMISSION_DENIED;\n    } else if (err.constructor && err.constructor.name === VideomailError.DOM_EXCEPTION) {\n      if (err.name === VideomailError.NOT_READABLE_ERROR) {\n        errType = VideomailError.NOT_READABLE_ERROR;\n      } else {\n        errType = VideomailError.DOM_EXCEPTION;\n      }\n    } else if (err.constructor && err.constructor.name === VideomailError.OVERCONSTRAINED) {\n      errType = VideomailError.OVERCONSTRAINED;\n    } else if (err.message === VideomailError.STARTING_FAILED) {\n      errType = err.message;\n    } else if (err.name) {\n      errType = err.name;\n    } else if (err.type === 'error' && err.target.bufferedAmount === 0) {\n      errType = VideomailError.NOT_CONNECTED;\n    }\n  } else if (err === VideomailError.NOT_CONNECTED) {\n    errType = VideomailError.NOT_CONNECTED;\n  } else {\n    errType = err;\n  }\n\n  if (err && err.stack) {\n    stack = err.stack;\n  } else {\n    stack = new Error().stack;\n  }\n\n  switch (errType) {\n    case VideomailError.SECURITY_ERROR:\n      message = 'The operation was insecure';\n      explanation = 'Probably you have disallowed Cookies for this page?';\n      classList.push(VideomailError.BROWSER_PROBLEM);\n      break;\n    case VideomailError.OVERCONSTRAINED:\n      message = 'Invalid webcam constraints';\n\n      if (err.constraint) {\n        if (err.constraint === 'width') {\n          explanation = 'Your webcam does not meet the width requirement.';\n        } else {\n          explanation = 'Unmet constraint: ' + err.constraint;\n        }\n      } else {\n        explanation = ' Details: ' + err.toString();\n      }\n      break;\n    case 'MediaDeviceFailedDueToShutdown':\n      message = 'Webcam is shutting down';\n      explanation = 'This happens your webcam is already switching off and not giving you permission to use it.';\n      break;\n    case 'SourceUnavailableError':\n      message = 'Source of your webcam cannot be accessed';\n      explanation = 'Probably it is locked from another process or has a hardware error.';\n\n      if (err.message) {\n        err.message += ' Details: ' + err.message;\n      }\n\n      break;\n    case VideomailError.NOT_FOUND_ERROR:\n    case 'NO_DEVICES_FOUND':\n      if (audioEnabled) {\n        message = 'No webcam nor microphone found';\n        explanation = 'Your browser cannot find a webcam with microphone attached to your machine.';\n      } else {\n        message = 'No webcam found';\n        explanation = 'Your browser cannot find a webcam attached to your machine.';\n      }\n\n      classList.push(VideomailError.WEBCAM_PROBLEM);\n      break;\n\n    case 'PermissionDismissedError':\n      message = 'Ooops, you didn\\'t give me any permissions?';\n      explanation = 'Looks like you skipped the webcam permission dialogue.<br/>' + 'Please grant access next time the dialogue appears.';\n      classList.push(VideomailError.WEBCAM_PROBLEM);\n      break;\n\n    case VideomailError.NOT_ALLOWED_ERROR:\n    case VideomailError.PERMISSION_DENIED:\n    case 'PermissionDeniedError':\n      message = 'Permission denied';\n\n      explanation = 'Cannot access your webcam. This can have two reasons:<br/>' + 'a) you blocked access to webcam; or<br/>' + 'b) your webcam is already in use.';\n\n      classList.push(VideomailError.WEBCAM_PROBLEM);\n\n      break;\n\n    case 'HARDWARE_UNAVAILABLE':\n      message = 'Webcam is unavailable';\n      explanation = 'Maybe it is already busy in another window?';\n\n      if (browser.isChromeBased()) {\n        explanation += ' Or you have to allow access above?';\n      }\n\n      classList.push(VideomailError.WEBCAM_PROBLEM);\n\n      break;\n\n    case VideomailError.NOT_CONNECTED:\n      message = 'Unable to connect';\n      explanation = 'Either the videomail server or your connection is down. ' + 'Trying to reconnect every few seconds …';\n      break;\n\n    case 'NO_VIDEO_FEED':\n      message = 'No video feed found!';\n      explanation = 'Your webcam is already used in another browser.';\n      classList.push(VideomailError.WEBCAM_PROBLEM);\n      break;\n\n    case VideomailError.STARTING_FAILED:\n      message = 'Starting video failed';\n      explanation = 'Most likely this happens when the webam is already active in another browser.';\n      classList.push(VideomailError.WEBCAM_PROBLEM);\n      break;\n\n    case 'DevicesNotFoundError':\n      message = 'No available webcam could be found';\n      explanation = 'Looks like you do not have any webcam attached to your machine; or ' + 'the one you plugged in is already used.';\n      classList.push(VideomailError.WEBCAM_PROBLEM);\n      break;\n\n    case VideomailError.NOT_READABLE_ERROR:\n    case VideomailError.TRACK_START_ERROR:\n      message = 'No access to webcam';\n      explanation = 'A hardware error occurred which prevented access to your webcam.';\n      classList.push(VideomailError.WEBCAM_PROBLEM);\n      break;\n\n    case VideomailError.DOM_EXCEPTION:\n      switch (err.code) {\n        case 8:\n          message = 'Requested webcam not found';\n          explanation = 'A webcam is needed but could not be found.';\n          classList.push(VideomailError.WEBCAM_PROBLEM);\n          break;\n        case 9:\n          var newUrl = 'https:' + window.location.href.substring(window.location.protocol.length);\n          message = 'Security upgrade needed';\n          explanation = 'Click <a href=\"' + newUrl + '\">here</a> to switch to HTTPs which is more safe ' + ' and enables encrypted videomail transfers.';\n          classList.push(VideomailError.BROWSER_PROBLEM);\n          break;\n        case 11:\n          message = 'Invalid State';\n          explanation = 'The object is in an invalid, unusable state.';\n          classList.push(VideomailError.BROWSER_PROBLEM);\n          break;\n        default:\n          message = 'DOM Exception';\n          explanation = pretty(err);\n          classList.push(VideomailError.BROWSER_PROBLEM);\n          break;\n      }\n      break;\n\n    // Chrome has a weird problem where if you try to do a getUserMedia request too early, it\n    // can return a MediaDeviceNotSupported error (even though nothing is wrong and permission\n    // has been granted). Look at userMediaErrorCallback() in recorder, there we do not\n    // emit those kind of errors further and just retry.\n    //\n    // but for whatever reasons, if it happens to reach this code, then investigate this further.\n    case VideomailError.MEDIA_DEVICE_NOT_SUPPORTED:\n      message = 'Media device not supported';\n      explanation = pretty(err);\n      break;\n\n    default:\n      var originalExplanation = explanation;\n\n      if (explanation && (typeof explanation === 'undefined' ? 'undefined' : _typeof(explanation)) === 'object') {\n        explanation = pretty(explanation);\n      }\n\n      // it can be that explanation itself is an error object\n      // error objects can be prettified to undefined sometimes\n      if (!explanation && originalExplanation) {\n        if (originalExplanation.message) {\n          explanation = originalExplanation.message;\n        } else {\n          // tried toString before but nah\n          explanation = 'Inspected: ' + _util2.default.inspect(originalExplanation, { showHidden: true });\n        }\n      }\n\n      if (err && typeof err === 'string') {\n        message = err;\n      } else {\n        if (err) {\n          if (err.message) {\n            message = pretty(err.message);\n          }\n        }\n\n        if (err && err.explanation) {\n          if (!explanation) {\n            explanation = pretty(err.explanation);\n          } else {\n            explanation += ';<br/>' + pretty(err.explanation);\n          }\n        }\n\n        if (err && err.details) {\n          var details = pretty(err.details);\n\n          if (!explanation) {\n            explanation = details;\n          } else {\n            explanation += ';<br/>' + details;\n          }\n        }\n      }\n\n      // for weird, undefined cases\n      if (!message) {\n        if (errType) {\n          message = errType;\n        }\n\n        if (!explanation && err) {\n          explanation = pretty(err, { excludes: ['stack'] });\n        }\n\n        // avoid dupes\n        if (pretty(message) === explanation) {\n          explanation = undefined;\n        }\n      }\n\n      break;\n  }\n\n  var logLines = null;\n\n  if (options.logger && options.logger.getLines) {\n    logLines = options.logger.getLines();\n  }\n\n  if (stack) {\n    message = new Error(message);\n    message.stack = stack;\n  }\n\n  var errCode = 'none';\n\n  if (err) {\n    errCode = 'code=' + (err.code ? err.code : 'undefined');\n    errCode += ', type=' + (err.type ? err.type : 'undefined');\n    errCode += ', name=' + (err.name ? err.name : 'undefined');\n    errCode += ', message=' + (err.message ? err.message : 'undefined');\n  }\n\n  var videomailError = new VideomailError(message, {\n    explanation: explanation,\n    logLines: logLines,\n    client: browser.getUsefulData(),\n    url: window.location.href,\n    siteName: options.siteName,\n    code: errCode,\n    stack: stack // have to assign it manually again because it is kinda protected\n  });\n\n  var resource;\n  var reportErrors = false;\n\n  if (options.reportErrors) {\n    if (typeof options.reportErrors === 'function') {\n      reportErrors = options.reportErrors(videomailError);\n    } else {\n      reportErrors = options.reportErrors;\n    }\n  }\n\n  if (reportErrors) {\n    resource = new _resource2.default(options);\n  }\n\n  if (resource) {\n    resource.reportError(videomailError, function (err2) {\n      if (err2) {\n        console.error('Unable to report error', err2);\n      }\n    });\n  }\n\n  function hasClass(name) {\n    return classList.indexOf(name) >= 0;\n  }\n\n  function isBrowserProblem() {\n    return hasClass(VideomailError.BROWSER_PROBLEM) || parameters.browserProblem;\n  }\n\n  // add some public functions\n\n  // this one is useful so that the notifier can have different css classes\n  videomailError.getClassList = function () {\n    return classList;\n  };\n\n  videomailError.removeDimensions = function () {\n    return hasClass(VideomailError.IOS_PROBLEM) || browser.isMobile();\n  };\n\n  videomailError.hideButtons = function () {\n    return isBrowserProblem() || hasClass(VideomailError.IOS_PROBLEM);\n  };\n\n  videomailError.hideForm = function () {\n    return hasClass(VideomailError.IOS_PROBLEM);\n  };\n\n  return videomailError;\n};\n\nexports.default = VideomailError;\n\n},{\"./../resource\":90,\"./browser\":93,\"./pretty\":98,\"create-error\":15,\"util\":80}],101:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _util = _dereq_('util');\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _hyperscript = _dereq_('hyperscript');\n\nvar _hyperscript2 = _interopRequireDefault(_hyperscript);\n\nvar _hidden = _dereq_('hidden');\n\nvar _hidden2 = _interopRequireDefault(_hidden);\n\nvar _contains = _dereq_('contains');\n\nvar _contains2 = _interopRequireDefault(_contains);\n\nvar _events = _dereq_('./../events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _eventEmitter = _dereq_('./../util/eventEmitter');\n\nvar _eventEmitter2 = _interopRequireDefault(_eventEmitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Buttons = function Buttons(container, options) {\n  _eventEmitter2.default.call(this, options, 'Buttons');\n\n  var self = this;\n  var debug = options.debug;\n\n  var buttonsElement;\n  var recordButton;\n  var pauseButton;\n  var resumeButton;\n  var previewButton;\n  var recordAgainButton;\n  var submitButton;\n\n  var audioOnRadioPair;\n  var audioOffRadioPair;\n\n  var built;\n\n  function hide(elements) {\n    if (elements && !Array.isArray(elements)) {\n      elements = [elements];\n    }\n\n    elements && elements.forEach(function (element) {\n      (0, _hidden2.default)(element, true);\n    });\n  }\n\n  function show(elements) {\n    if (elements && !Array.isArray(elements)) {\n      elements = [elements];\n    }\n\n    elements && elements.forEach(function (element) {\n      (0, _hidden2.default)(element, false);\n    });\n  }\n\n  function isShown(elements) {\n    var isShown = elements && true;\n\n    if (elements && !Array.isArray(elements)) {\n      elements = [elements];\n    }\n\n    elements && elements.forEach(function (element) {\n      isShown = isShown && element && !(0, _hidden2.default)(element);\n    });\n\n    return isShown;\n  }\n\n  function disable(elements) {\n    if (elements && !Array.isArray(elements)) {\n      elements = [elements];\n    }\n\n    elements && elements.forEach(function (element) {\n      // https://github.com/binarykitchen/videomail-client/issues/148\n      if (element) {\n        if (element.tagName === 'INPUT' || element.tagName === 'BUTTON') {\n          element.disabled = true;\n        } else {\n          element.classList.add('disabled');\n        }\n      }\n    });\n  }\n\n  function enable(elements) {\n    if (elements && !Array.isArray(elements)) {\n      elements = [elements];\n    }\n\n    elements && elements.forEach(function (element) {\n      // https://github.com/binarykitchen/videomail-client/issues/148\n      if (element) {\n        if (element.tagName === 'INPUT' || element.tagName === 'BUTTON') {\n          element.disabled = false;\n        } else {\n          element.classList.remove('disabled');\n        }\n      }\n    });\n  }\n\n  function adjustButton(buttonElement, show, type, disabled) {\n    if (disabled) {\n      disable(buttonElement);\n    }\n\n    if (type) {\n      buttonElement.type = type;\n    } else if (!buttonElement.type) {\n      buttonElement.type = 'button';\n    }\n\n    !show && hide(buttonElement);\n\n    return buttonElement;\n  }\n\n  function replaceClickHandler(element, clickHandler) {\n    var wrappedClickHandler = function wrappedClickHandler(e) {\n      e && e.preventDefault();\n\n      try {\n        clickHandler({ event: e });\n      } catch (exc) {\n        self.emit(_events2.default.ERROR, exc);\n      }\n    };\n\n    element.onclick = wrappedClickHandler;\n  }\n\n  function makeRadioButtonPair(options) {\n    var radioButtonElement;\n    var radioButtonGroup;\n\n    if (options.id) {\n      radioButtonElement = document.getElementById(options.id);\n    }\n\n    if (!radioButtonElement) {\n      radioButtonElement = (0, _hyperscript2.default)('input#' + options.id, {\n        type: 'radio',\n        name: options.name,\n        value: options.value,\n        checked: options.checked\n      });\n\n      radioButtonGroup = (0, _hyperscript2.default)('span.radioGroup', radioButtonElement, (0, _hyperscript2.default)('label', {\n        'htmlFor': options.id\n      }, options.label));\n\n      // double check that submit button is already in the buttonsElement container as a child?\n      if (submitButton && (0, _contains2.default)(buttonsElement, submitButton)) {\n        buttonsElement.insertBefore(radioButtonGroup, submitButton);\n      } else {\n        buttonsElement.appendChild(radioButtonGroup);\n      }\n    }\n\n    if (options.changeHandler) {\n      radioButtonElement.onchange = options.changeHandler;\n    }\n\n    disable(radioButtonElement);\n\n    return [radioButtonElement, radioButtonGroup];\n  }\n\n  function makeButton(buttonClass, text, clickHandler, show, id, type, selector) {\n    var disabled = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : true;\n\n    var buttonElement;\n\n    if (id) {\n      buttonElement = document.getElementById(id);\n    } else if (selector) {\n      buttonElement = document.querySelector(selector);\n    } else {\n      buttonElement = buttonsElement.querySelector('.' + buttonClass);\n    }\n\n    if (!buttonElement) {\n      if (options.selectors.buttonClass) {\n        buttonClass += '.' + options.selectors.buttonClass;\n      }\n\n      buttonElement = (0, _hyperscript2.default)('button.' + buttonClass);\n      buttonElement = adjustButton(buttonElement, show, type, disabled);\n\n      buttonElement.innerHTML = text;\n\n      // double check that submit button is already in the buttonsElement container\n      if (submitButton && (0, _contains2.default)(buttonsElement, submitButton)) {\n        buttonsElement.insertBefore(buttonElement, submitButton);\n      } else {\n        buttonsElement.appendChild(buttonElement);\n      }\n    } else {\n      buttonElement = adjustButton(buttonElement, show, type, disabled);\n    }\n\n    if (clickHandler) {\n      replaceClickHandler(buttonElement, clickHandler);\n    }\n\n    return buttonElement;\n  }\n\n  function buildButtons() {\n    if (!options.disableSubmit) {\n      if (!submitButton) {\n        submitButton = makeButton(options.selectors.submitButtonClass, 'Submit', null, true, options.selectors.submitButtonId, 'submit', options.selectors.submitButtonSelector, options.enableAutoValidation);\n      } else {\n        disable(submitButton);\n      }\n\n      // no need to listen to the submit event when it's already listened\n      // within the form element class\n      if (!container.hasForm() && submitButton) {\n        replaceClickHandler(submitButton, submit);\n      }\n    }\n\n    recordButton = makeButton(options.selectors.recordButtonClass, options.text.buttons.record, record, false);\n\n    if (options.enablePause) {\n      pauseButton = makeButton(options.selectors.pauseButtonClass, options.text.buttons.pause, container.pause, false);\n    }\n\n    if (options.enablePause) {\n      resumeButton = makeButton(options.selectors.resumeButtonClass, options.text.buttons.resume, container.resume, false);\n    }\n\n    // show stop only when pause is enabled - looks better that way otherwise button\n    // move left and right between record and stop (preview)\n    previewButton = makeButton(options.selectors.previewButtonClass, options.text.buttons.preview, container.stop, false);\n\n    recordAgainButton = makeButton(options.selectors.recordAgainButtonClass, options.text.buttons.recordAgain, recordAgain, false);\n\n    if (options.audio && options.audio.switch) {\n      audioOffRadioPair = makeRadioButtonPair({\n        id: 'audioOffOption',\n        name: 'audio',\n        value: 'off',\n        label: 'Audio Off',\n        checked: !options.isAudioEnabled(),\n        changeHandler: function changeHandler() {\n          container.disableAudio();\n        }\n      });\n\n      audioOnRadioPair = makeRadioButtonPair({\n        id: 'audioOnOption',\n        name: 'audio',\n        value: 'on',\n        label: 'Audio On (Beta)',\n        checked: options.isAudioEnabled(),\n        changeHandler: function changeHandler() {\n          container.enableAudio();\n        }\n      });\n    }\n  }\n\n  function onFormReady(params) {\n    // no need to show record button when doing a record again\n    if (!isShown(recordAgainButton)) {\n      if (!params.paused) {\n        show(recordButton);\n      }\n    }\n\n    if (!params.paused) {\n      disable(previewButton);\n      hide(previewButton);\n    }\n\n    if (!options.enableAutoValidation) {\n      enable(submitButton);\n    }\n  }\n\n  function onGoingBack() {\n    hide(recordAgainButton);\n    show(recordButton);\n    show(submitButton);\n  }\n\n  function onReplayShown() {\n    self.hide();\n  }\n\n  function onUserMediaReady(options) {\n    onFormReady(options);\n\n    if (isShown(recordButton)) {\n      enable(recordButton);\n    }\n\n    if (isShown(audioOnRadioPair)) {\n      enable(audioOnRadioPair);\n    }\n\n    if (isShown(audioOffRadioPair)) {\n      enable(audioOffRadioPair);\n    }\n\n    if (options.enableAutoValidation) {\n      disable(submitButton);\n    }\n  }\n\n  function onResetting() {\n    disable(submitButton);\n\n    self.reset();\n  }\n\n  function onPreview() {\n    hide(recordButton);\n    hide(previewButton);\n    disable(audioOnRadioPair);\n    disable(audioOffRadioPair);\n\n    show(recordAgainButton);\n    enable(recordAgainButton);\n\n    if (!options.enableAutoValidation) {\n      enable(submitButton);\n    }\n  }\n\n  this.enableSubmit = function () {\n    enable(submitButton);\n  };\n\n  this.adjustButtonsForPause = function () {\n    if (!self.isCountingDown()) {\n      pauseButton && hide(pauseButton);\n      show(resumeButton);\n      enable(resumeButton);\n      hide(recordButton);\n      show(previewButton);\n      enable(previewButton);\n    }\n  };\n\n  function onFirstFrameSent() {\n    hide(recordButton);\n    hide(recordAgainButton);\n\n    if (pauseButton) {\n      show(pauseButton);\n      enable(pauseButton);\n    }\n\n    enable(previewButton);\n    show(previewButton);\n  }\n\n  function onRecording(framesCount) {\n    // it is possible to hide while recording, hence\n    // check framesCount first (coming from recorder)\n    if (framesCount > 1) {\n      onFirstFrameSent();\n    } else {\n      disable(audioOffRadioPair);\n      disable(audioOnRadioPair);\n      disable(recordAgainButton);\n      disable(recordButton);\n    }\n  }\n\n  function onResuming() {\n    hide(resumeButton);\n    hide(recordButton);\n\n    if (pauseButton) {\n      enable(pauseButton);\n      show(pauseButton);\n    }\n  }\n\n  function onStopping() {\n    disable(previewButton);\n    hide(pauseButton);\n    hide(resumeButton);\n  }\n\n  function onCountdown() {\n    disable(recordButton);\n    disable(audioOffRadioPair);\n    disable(audioOnRadioPair);\n  }\n\n  function onSubmitting() {\n    disable(submitButton);\n    disable(recordAgainButton);\n  }\n\n  function onSubmitted() {\n    disable(previewButton);\n    disable(recordAgainButton);\n    disable(recordButton);\n    disable(submitButton);\n  }\n\n  function onInvalid() {\n    if (options.enableAutoValidation) {\n      disable(submitButton);\n    }\n  }\n\n  function onValid() {\n    if (options.enableAutoValidation) {\n      enable(submitButton);\n    }\n  }\n\n  function onHidden() {\n    hide(recordButton);\n    hide(previewButton);\n    hide(recordAgainButton);\n    hide(resumeButton);\n  }\n\n  function onEnablingAudio() {\n    disable(recordButton);\n    disable(audioOnRadioPair);\n    disable(audioOffRadioPair);\n  }\n\n  function onDisablingAudio() {\n    disable(recordButton);\n    disable(audioOnRadioPair);\n    disable(audioOffRadioPair);\n  }\n\n  function recordAgain() {\n    disable(recordAgainButton);\n    container.beginWaiting();\n    container.recordAgain();\n  }\n\n  function onStartingOver() {\n    show(submitButton);\n  }\n\n  function submit() {\n    container.submit();\n  }\n\n  function record(params) {\n    disable(recordButton);\n    container.record(params);\n  }\n\n  function initEvents() {\n    debug('Buttons: initEvents()');\n\n    self.on(_events2.default.USER_MEDIA_READY, function (options) {\n      onUserMediaReady(options);\n    }).on(_events2.default.PREVIEW, function () {\n      onPreview();\n    }).on(_events2.default.PAUSED, function () {\n      self.adjustButtonsForPause();\n    }).on(_events2.default.RECORDING, function (framesCount) {\n      onRecording(framesCount);\n    }).on(_events2.default.FIRST_FRAME_SENT, function () {\n      onFirstFrameSent();\n    }).on(_events2.default.RESUMING, function () {\n      onResuming();\n    }).on(_events2.default.STOPPING, function () {\n      onStopping();\n    }).on(_events2.default.COUNTDOWN, function () {\n      onCountdown();\n    }).on(_events2.default.SUBMITTING, function () {\n      onSubmitting();\n    }).on(_events2.default.RESETTING, function () {\n      onResetting();\n    }).on(_events2.default.INVALID, function () {\n      onInvalid();\n    }).on(_events2.default.VALID, function () {\n      onValid();\n    }).on(_events2.default.SUBMITTED, function () {\n      onSubmitted();\n    }).on(_events2.default.HIDE, function () {\n      onHidden();\n    }).on(_events2.default.FORM_READY, function (options) {\n      onFormReady(options);\n    }).on(_events2.default.REPLAY_SHOWN, function () {\n      onReplayShown();\n    }).on(_events2.default.GOING_BACK, function () {\n      onGoingBack();\n    }).on(_events2.default.ENABLING_AUDIO, function () {\n      onEnablingAudio();\n    }).on(_events2.default.DISABLING_AUDIO, function () {\n      onDisablingAudio();\n    }).on(_events2.default.STARTING_OVER, function () {\n      onStartingOver();\n    }).on(_events2.default.ERROR, function (err) {\n      // since https://github.com/binarykitchen/videomail-client/issues/60\n      // we hide areas to make it easier for the user\n      if (err.hideButtons && err.hideButtons() && options.adjustFormOnBrowserError) {\n        self.hide();\n      }\n    });\n  }\n\n  this.reset = function () {\n    options.debug('Buttons: reset()');\n\n    disable(pauseButton);\n    disable(resumeButton);\n    disable(recordButton);\n    disable(previewButton);\n    disable(recordAgainButton);\n  };\n\n  this.isRecordAgainButtonEnabled = function () {\n    return !recordAgainButton.disabled;\n  };\n\n  this.isRecordButtonEnabled = function () {\n    return !recordButton.disabled;\n  };\n\n  this.setSubmitButton = function (newSubmitButton) {\n    submitButton = newSubmitButton;\n  };\n\n  this.getSubmitButton = function () {\n    return submitButton;\n  };\n\n  this.build = function () {\n    buttonsElement = container.querySelector('.' + options.selectors.buttonsClass);\n\n    if (!buttonsElement) {\n      buttonsElement = (0, _hyperscript2.default)('div.' + options.selectors.buttonsClass);\n\n      container.appendChild(buttonsElement);\n    }\n\n    buildButtons();\n\n    !built && initEvents();\n\n    built = true;\n  };\n\n  this.unload = function () {\n    built = false;\n  };\n\n  this.hide = function (params) {\n    hide(buttonsElement);\n\n    if (params && params.deep) {\n      hide(recordButton);\n      hide(pauseButton);\n      hide(resumeButton);\n      hide(previewButton);\n      hide(recordAgainButton);\n      hide(submitButton);\n    }\n  };\n\n  this.show = function () {\n    show(buttonsElement);\n  };\n\n  this.isCountingDown = function () {\n    return container.isCountingDown();\n  };\n};\n\n_util2.default.inherits(Buttons, _eventEmitter2.default);\n\nexports.default = Buttons;\n\n},{\"./../events\":88,\"./../util/eventEmitter\":95,\"contains\":13,\"hidden\":31,\"hyperscript\":33,\"util\":80}],102:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _insertCss = _dereq_('insert-css');\n\nvar _insertCss2 = _interopRequireDefault(_insertCss);\n\nvar _hidden = _dereq_('hidden');\n\nvar _hidden2 = _interopRequireDefault(_hidden);\n\nvar _util = _dereq_('util');\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _documentVisibility = _dereq_('document-visibility');\n\nvar _documentVisibility2 = _interopRequireDefault(_documentVisibility);\n\nvar _dimension = _dereq_('./dimension');\n\nvar _dimension2 = _interopRequireDefault(_dimension);\n\nvar _visuals = _dereq_('./visuals');\n\nvar _visuals2 = _interopRequireDefault(_visuals);\n\nvar _buttons = _dereq_('./buttons');\n\nvar _buttons2 = _interopRequireDefault(_buttons);\n\nvar _form = _dereq_('./form');\n\nvar _form2 = _interopRequireDefault(_form);\n\nvar _optionsWrapper = _dereq_('./optionsWrapper');\n\nvar _optionsWrapper2 = _interopRequireDefault(_optionsWrapper);\n\nvar _resource = _dereq_('./../resource');\n\nvar _resource2 = _interopRequireDefault(_resource);\n\nvar _events = _dereq_('./../events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _eventEmitter = _dereq_('./../util/eventEmitter');\n\nvar _eventEmitter2 = _interopRequireDefault(_eventEmitter);\n\nvar _videomailError = _dereq_('./../util/videomailError');\n\nvar _videomailError2 = _interopRequireDefault(_videomailError);\n\nvar _mainMinCss = _dereq_('./../styles/css/main.min.css.js');\n\nvar _mainMinCss2 = _interopRequireDefault(_mainMinCss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Container = function Container(options) {\n  _eventEmitter2.default.call(this, options, 'Container');\n\n  var self = this;\n\n  var visibility = (0, _documentVisibility2.default)();\n  var visuals = new _visuals2.default(this, options);\n  var buttons = new _buttons2.default(this, options);\n  var resource = new _resource2.default(options);\n  var htmlElement = document && document.querySelector && document.querySelector('html');\n  var debug = options.debug;\n\n  var hasError = false;\n  var submitted = false;\n  var lastValidation = false;\n\n  var containerElement;\n  var built;\n  var form;\n\n  function prependDefaultCss() {\n    (0, _insertCss2.default)(_mainMinCss2.default, { prepend: true });\n  }\n\n  // since https://github.com/binarykitchen/videomail-client/issues/87\n  function findParentFormElement() {\n    return containerElement.closest('form');\n  }\n\n  function getFormElement() {\n    var formElement;\n\n    if (containerElement.tagName === 'FORM') {\n      formElement = containerElement;\n    } else if (options.selectors.formId) {\n      formElement = document.getElementById(options.selectors.formId);\n    } else {\n      formElement = findParentFormElement();\n    }\n\n    return formElement;\n  }\n\n  function buildForm() {\n    var formElement = getFormElement();\n\n    if (formElement) {\n      debug('Container: buildForm()');\n      form = new _form2.default(self, formElement, options);\n\n      var submitButton = form.findSubmitButton();\n      submitButton && buttons.setSubmitButton(submitButton);\n\n      form.build();\n    }\n  }\n\n  function buildChildren() {\n    debug('Container: buildChildren()');\n\n    if (!containerElement.classList) {\n      self.emit(_events2.default.ERROR, _videomailError2.default.create('Sorry, your browser is too old!', options));\n    } else {\n      containerElement.classList.add('videomail');\n\n      if (!options.playerOnly) {\n        buttons.build();\n      }\n\n      visuals.build();\n    }\n  }\n\n  function processError(err) {\n    hasError = true;\n\n    if (err.stack) {\n      options.logger.error(err.stack);\n    } else {\n      options.logger.error(err);\n    }\n\n    if (options.displayErrors) {\n      visuals.error(err);\n    } else {\n      visuals.reset();\n    }\n  }\n\n  function initEvents() {\n    debug('Container: initEvents()');\n\n    window.addEventListener('beforeunload', function (e) {\n      self.unload(e);\n    });\n\n    if (!options.playerOnly) {\n      visibility.onChange(function (visible) {\n        // built? see https://github.com/binarykitchen/videomail.io/issues/326\n        if (built) {\n          if (visible) {\n            if (options.isAutoPauseEnabled() && self.isCountingDown()) {\n              self.resume();\n            }\n\n            self.emit(_events2.default.VISIBLE);\n          } else {\n            if (options.isAutoPauseEnabled() && (self.isCountingDown() || self.isRecording())) {\n              self.pause('document invisible');\n            }\n\n            self.emit(_events2.default.INVISIBLE);\n          }\n        }\n      });\n    }\n\n    if (options.enableSpace) {\n      if (!options.playerOnly) {\n        window.addEventListener('keypress', function (e) {\n          var tagName = e.target.tagName;\n          var isEditable = e.target.isContentEditable || e.target.contentEditable === 'true' || e.target.contentEditable === true;\n\n          // beware of rich text editors, hence the isEditable check (wordpress plugin issue)\n          if (!isEditable && tagName !== 'INPUT' && tagName !== 'TEXTAREA') {\n            var code = e.keyCode ? e.keyCode : e.which;\n\n            if (code === 32) {\n              e.preventDefault();\n\n              if (options.enablePause) {\n                visuals.pauseOrResume();\n              } else {\n                visuals.recordOrStop();\n              }\n            }\n          }\n        });\n      }\n    }\n\n    // better to keep the one and only error listeners\n    // at one spot, here, because unload() will do a removeAllListeners()\n    self.on(_events2.default.ERROR, function (err) {\n      processError(err);\n      unloadChildren(err);\n\n      if (err.removeDimensions && err.removeDimensions()) {\n        removeDimensions();\n      }\n    });\n\n    if (!options.playerOnly) {\n      self.on(_events2.default.LOADED_META_DATA, function () {\n        correctDimensions();\n      });\n    }\n  }\n\n  function validateOptions() {\n    if (options.hasDefinedWidth() && options.video.width % 2 !== 0) {\n      throw _videomailError2.default.create('Width must be divisible by two.', options);\n    }\n\n    if (options.hasDefinedHeight() && options.video.height % 2 !== 0) {\n      throw _videomailError2.default.create('Height must be divisible by two.', options);\n    }\n  }\n\n  // this will just set the width but not the height because\n  // it can be a form with more inputs elements\n  function correctDimensions() {\n    var width = visuals.getRecorderWidth(true);\n\n    if (width < 1) {\n      throw _videomailError2.default.create('Recorder width cannot be less than 1!', options);\n    } else {\n      containerElement.style.width = width + 'px';\n    }\n  }\n\n  function removeDimensions() {\n    containerElement.style.width = 'auto';\n  }\n\n  function unloadChildren(e) {\n    visuals.unload(e);\n    buttons.unload();\n    self.endWaiting();\n  }\n\n  function hideMySelf() {\n    (0, _hidden2.default)(containerElement, true);\n  }\n\n  // fixes https://github.com/binarykitchen/videomail-client/issues/71\n  function trimEmail(email) {\n    return email.replace(/(^[,\\s]+)|([,\\s]+$)/g, '');\n  }\n\n  function submitVideomail(formData, method, cb) {\n    var FORM_FIELDS = {\n      'subject': options.selectors.subjectInputName,\n      'from': options.selectors.fromInputName,\n      'to': options.selectors.toInputName,\n      'body': options.selectors.bodyInputName,\n      'key': options.selectors.keyInputName,\n      'parentKey': options.selectors.parentKeyInputName,\n      'sendCopy': options.selectors.sendCopyInputName\n    };\n\n    var videomailFormData = {};\n\n    Object.keys(FORM_FIELDS).forEach(function (key) {\n      if (formData.hasOwnProperty(FORM_FIELDS[key])) {\n        videomailFormData[key] = formData[FORM_FIELDS[key]];\n      }\n    });\n\n    if (videomailFormData.from) {\n      videomailFormData.from = trimEmail(videomailFormData.from);\n    }\n\n    if (videomailFormData.to) {\n      videomailFormData.to = trimEmail(videomailFormData.to);\n    }\n\n    // when method is undefined, treat it as a post\n    if (isPost(method) || !method) {\n      videomailFormData.recordingStats = visuals.getRecordingStats();\n      videomailFormData.width = visuals.getRecorderWidth(true);\n      videomailFormData.height = visuals.getRecorderHeight(true);\n\n      resource.post(videomailFormData, cb);\n    } else if (isPut(method)) {\n      resource.put(videomailFormData, cb);\n    }\n  }\n\n  function submitForm(formData, videomailResponse, url, cb) {\n    // for now, accept POSTs only which have an URL unlike null and\n    // treat all other submissions as direct submissions\n\n    if (!url || url === '') {\n      // figure out URL automatically then\n      url = document.baseURI;\n    }\n\n    // can be missing when no videomail was recorded and is not required\n    if (videomailResponse) {\n      formData[options.selectors.aliasInputName] = videomailResponse.videomail.alias;\n    }\n\n    resource.form(formData, url, cb);\n  }\n\n  function finalizeSubmissions(err, method, videomail, response, formResponse) {\n    self.endWaiting();\n\n    if (err) {\n      self.emit(_events2.default.ERROR, err);\n    } else {\n      submitted = true;\n\n      // merge two json response bodies to fake as if it were only one request\n      if (response && formResponse && formResponse.body) {\n        Object.keys(formResponse.body).forEach(function (key) {\n          response[key] = formResponse.body[key];\n        });\n      }\n\n      self.emit(_events2.default.SUBMITTED, videomail, response || formResponse);\n\n      if (formResponse && formResponse.type === 'text/html' && formResponse.text) {\n        // server replied with HTML contents - display these\n        document.body.innerHTML = formResponse.text;\n\n        // todo: figure out how to fire dom's onload event again\n        // todo: or how to run all the scripts over again\n      }\n    }\n  }\n\n  this.addPlayerDimensions = function (videomail, element) {\n    try {\n      videomail.playerHeight = this.calculateHeight({\n        responsive: true,\n        videoWidth: videomail.width,\n        ratio: videomail.height / videomail.width\n      }, element);\n\n      videomail.playerWidth = this.calculateWidth({\n        responsive: true,\n        videoHeight: videomail.playerHeight,\n        ratio: videomail.height / videomail.width\n      });\n\n      return videomail;\n    } catch (exc) {\n      self.emit(_events2.default.ERROR, exc);\n    }\n  };\n\n  this.limitWidth = function (width) {\n    return _dimension2.default.limitWidth(containerElement, width, options);\n  };\n\n  this.limitHeight = function (height) {\n    return _dimension2.default.limitHeight(height, options);\n  };\n\n  this.calculateWidth = function (fnOptions) {\n    return _dimension2.default.calculateWidth(_optionsWrapper2.default.merge(options, fnOptions, true));\n  };\n\n  this.calculateHeight = function (fnOptions, element) {\n    if (!element) {\n      if (containerElement) {\n        element = containerElement;\n      } else {\n        // better than nothing\n        element = document.body;\n      }\n    }\n\n    return _dimension2.default.calculateHeight(element, _optionsWrapper2.default.merge(options, fnOptions, true));\n  };\n\n  this.areVisualsHidden = function () {\n    return visuals.isHidden();\n  };\n\n  this.hasElement = function () {\n    return !!containerElement;\n  };\n\n  this.build = function () {\n    try {\n      containerElement = document.getElementById(options.selectors.containerId);\n\n      // only build when a container element hast been found, otherwise\n      // be silent and do nothing\n      if (containerElement) {\n        options.insertCss && prependDefaultCss();\n\n        !built && initEvents();\n        validateOptions();\n        correctDimensions();\n\n        if (!options.playerOnly) {\n          buildForm();\n        }\n\n        buildChildren();\n\n        if (!hasError) {\n          debug('Container: built.');\n          built = true;\n          self.emit(_events2.default.BUILT);\n        } else {\n          debug('Container: building failed due to an error.');\n        }\n      } else {\n        // commented out since it does too much noise on videomail's view page which is fine\n        // debug('Container: no container element with ID ' + options.selectors.containerId + ' found. Do nothing.')\n      }\n    } catch (exc) {\n      if (visuals.isNotifierBuilt()) {\n        self.emit(_events2.default.ERROR, exc);\n      } else {\n        throw exc;\n      }\n    }\n  };\n\n  this.getSubmitButton = function () {\n    return buttons.getSubmitButton();\n  };\n\n  this.querySelector = function (selector) {\n    return containerElement.querySelector(selector);\n  };\n\n  this.beginWaiting = function () {\n    htmlElement.classList && htmlElement.classList.add('wait');\n  };\n\n  this.endWaiting = function () {\n    htmlElement.classList && htmlElement.classList.remove('wait');\n  };\n\n  this.appendChild = function (child) {\n    containerElement.appendChild(child);\n  };\n\n  this.insertBefore = function (child, reference) {\n    containerElement.insertBefore(child, reference);\n  };\n\n  this.unload = function (e) {\n    debug('Container: unload()', e);\n\n    try {\n      unloadChildren(e);\n      this.removeAllListeners();\n\n      built = submitted = false;\n    } catch (exc) {\n      self.emit(_events2.default.ERROR, exc);\n    }\n  };\n\n  this.show = function () {\n    if (containerElement) {\n      (0, _hidden2.default)(containerElement, false);\n\n      visuals.show();\n\n      if (!hasError) {\n        var paused = self.isPaused();\n\n        if (paused) {\n          buttons.adjustButtonsForPause();\n        }\n\n        // since https://github.com/binarykitchen/videomail-client/issues/60\n        // we hide areas to make it easier for the user\n        buttons.show();\n\n        if (self.isReplayShown()) {\n          self.emit(_events2.default.PREVIEW);\n        } else {\n          self.emit(_events2.default.FORM_READY, { paused: paused });\n        }\n      }\n    }\n  };\n\n  this.hide = function () {\n    debug('Container: hide()');\n\n    hasError = false;\n\n    this.isRecording() && this.pause();\n\n    visuals.hide();\n\n    if (submitted) {\n      buttons.hide();\n      hideMySelf();\n    }\n  };\n\n  this.startOver = function (params) {\n    try {\n      self.emit(_events2.default.STARTING_OVER);\n\n      submitted = false;\n      form.show();\n      visuals.back(params, function () {\n        if (params.keepHidden) {\n          // just enable form, do nothing else.\n          // see example contact_form.html when you submit without videomil\n          // and go back\n          self.enableForm();\n        } else {\n          self.show(params);\n        }\n      });\n    } catch (exc) {\n      self.emit(_events2.default.ERROR, exc);\n    }\n  };\n\n  this.showReplayOnly = function () {\n    hasError = false;\n\n    this.isRecording() && this.pause();\n\n    visuals.showReplayOnly();\n\n    submitted && buttons.hide();\n  };\n\n  this.isNotifying = function () {\n    return visuals.isNotifying();\n  };\n\n  this.isPaused = function () {\n    return visuals.isPaused();\n  };\n\n  this.pause = function (params) {\n    visuals.pause(params);\n  };\n\n  // this code needs a good rewrite :(\n  this.validate = function (force) {\n    var runValidation = true;\n    var valid;\n\n    if (!options.enableAutoValidation) {\n      runValidation = false;\n      lastValidation = true; // needed so that it can be submitted anyway, see submit()\n    } else if (force) {\n      runValidation = force;\n    } else if (self.isNotifying()) {\n      runValidation = false;\n    } else if (visuals.isConnected()) {\n      runValidation = visuals.isUserMediaLoaded() || visuals.isReplayShown();\n    } else if (visuals.isConnecting()) {\n      runValidation = false;\n    }\n\n    if (runValidation) {\n      this.emit(_events2.default.VALIDATING);\n\n      var visualsValid = visuals.validate() && buttons.isRecordAgainButtonEnabled();\n      var whyInvalid;\n\n      if (form) {\n        valid = form.validate();\n\n        if (valid) {\n          if (!this.areVisualsHidden() && !visualsValid) {\n            if (submitted || this.isReady() || this.isRecording() || this.isPaused() || this.isCountingDown()) {\n              valid = false;\n            }\n\n            if (!valid) {\n              whyInvalid = 'Video is not recorded';\n            }\n          }\n        } else {\n          var invalidInput = form.getInvalidElement();\n\n          if (invalidInput) {\n            whyInvalid = 'Form input named ' + invalidInput.name + ' is invalid';\n          } else {\n            whyInvalid = 'Form input(s() are invalid';\n          }\n        }\n      } else {\n        valid = visualsValid;\n      }\n\n      if (valid) {\n        this.emit(_events2.default.VALID);\n      } else {\n        this.emit(_events2.default.INVALID, whyInvalid);\n      }\n\n      lastValidation = valid;\n    }\n\n    return valid;\n  };\n\n  this.disableForm = function (buttonsToo) {\n    form && form.disable(buttonsToo);\n  };\n\n  this.enableForm = function (buttonsToo) {\n    form && form.enable(buttonsToo);\n  };\n\n  this.hasForm = function () {\n    return !!form;\n  };\n\n  this.isReady = function () {\n    return buttons.isRecordButtonEnabled();\n  };\n\n  function isPost(method) {\n    return method && method.toUpperCase() === 'POST';\n  }\n\n  function isPut(method) {\n    return method && method.toUpperCase() === 'PUT';\n  }\n\n  this.submitAll = function (formData, method, url) {\n    var post = isPost(method);\n    var hasVideomailKey = !!formData[options.selectors.keyInputName];\n\n    function startSubmission() {\n      self.beginWaiting();\n      self.disableForm(true);\n      self.emit(_events2.default.SUBMITTING);\n    }\n\n    // a closure so that we can access method\n    var submitVideomailCallback = function submitVideomailCallback(err1, videomail, videomailResponse) {\n      if (err1) {\n        finalizeSubmissions(err1, method, videomail, videomailResponse);\n      } else if (post) {\n        submitForm(formData, videomailResponse, url, function (err2, formResponse) {\n          finalizeSubmissions(err2, method, videomail, videomailResponse, formResponse);\n        });\n      } else {\n        // it's a direct submission\n        finalizeSubmissions(null, method, videomail, videomailResponse);\n      }\n    };\n\n    // !hasVideomailKey makes it possible to submit form when videomail itself\n    // is not optional.\n    if (!hasVideomailKey) {\n      if (options.enableAutoSubmission) {\n        startSubmission();\n        submitForm(formData, null, url, function (err2, formResponse) {\n          finalizeSubmissions(err2, method, null, null, formResponse);\n        });\n      }\n      // ... and when the enableAutoSubmission option is false,\n      // then that can mean, leave it to the framework to process with the form\n      // validation/handling/submission itself. for example the ninja form\n      // will want to highlight which one input are wrong.\n    } else {\n      startSubmission();\n      submitVideomail(formData, method, submitVideomailCallback);\n    }\n  };\n\n  this.isBuilt = function () {\n    return built;\n  };\n\n  this.isReplayShown = function () {\n    return visuals.isReplayShown();\n  };\n\n  this.isDirty = function () {\n    var isDirty = false;\n\n    if (form) {\n      if (visuals.isRecorderUnloaded()) {\n        isDirty = false;\n      } else if (this.isReplayShown() || this.isPaused()) {\n        isDirty = true;\n      }\n    }\n\n    return isDirty;\n  };\n\n  this.getReplay = function () {\n    return visuals.getReplay();\n  };\n\n  this.isOutsideElementOf = function (element) {\n    return element.parentNode !== containerElement && element !== containerElement;\n  };\n\n  this.hideForm = function (params) {\n    // form check needed, see https://github.com/binarykitchen/videomail-client/issues/127\n    form && form.hide();\n    buttons && buttons.hide(params);\n  };\n\n  this.loadForm = function (videomail) {\n    if (form) {\n      form.loadVideomail(videomail);\n      this.validate();\n    }\n  };\n\n  this.enableAudio = function () {\n    options.setAudioEnabled(true);\n    this.emit(_events2.default.ENABLING_AUDIO);\n  };\n\n  this.disableAudio = function () {\n    options.setAudioEnabled(false);\n    this.emit(_events2.default.DISABLING_AUDIO);\n  };\n\n  this.submit = function () {\n    lastValidation && form && form.doTheSubmit();\n  };\n\n  this.isCountingDown = visuals.isCountingDown.bind(visuals);\n  this.isRecording = visuals.isRecording.bind(visuals);\n  this.record = visuals.record.bind(visuals);\n  this.resume = visuals.resume.bind(visuals);\n  this.stop = visuals.stop.bind(visuals);\n  this.recordAgain = visuals.recordAgain.bind(visuals);\n};\n\n_util2.default.inherits(Container, _eventEmitter2.default);\n\nexports.default = Container;\n\n},{\"./../events\":88,\"./../resource\":90,\"./../styles/css/main.min.css.js\":91,\"./../util/eventEmitter\":95,\"./../util/videomailError\":100,\"./buttons\":101,\"./dimension\":103,\"./form\":104,\"./optionsWrapper\":105,\"./visuals\":106,\"document-visibility\":19,\"hidden\":31,\"insert-css\":37,\"util\":80}],103:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _numberIsInteger = _dereq_('number-is-integer');\n\nvar _numberIsInteger2 = _interopRequireDefault(_numberIsInteger);\n\nvar _videomailError = _dereq_('./../util/videomailError');\n\nvar _videomailError2 = _interopRequireDefault(_videomailError);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getOuterWidth(element) {\n  var outerWidth = 0;\n  var rect = element.getBoundingClientRect();\n\n  if (rect) {\n    outerWidth = rect.right - rect.left;\n  }\n\n  if (outerWidth < 1) {\n    // last effort, can happen when replaying only\n    rect = document.body.getBoundingClientRect();\n    outerWidth = rect.right - rect.left;\n  }\n\n  return outerWidth;\n}\n\nfunction figureMinHeight(height, options) {\n  if (options.hasDefinedHeight()) {\n    if (!height) {\n      height = options.video.height;\n    } else {\n      height = Math.min(options.video.height, height);\n    }\n  }\n\n  if ((0, _numberIsInteger2.default)(height) && height < 1) {\n    throw _videomailError2.default.create('Got a video height less than 1 (' + height + ') while figuring out the minimum!', options);\n  }\n\n  // just return it, can be \"auto\"\n  return height;\n}\n\nexports.default = {\n\n  limitWidth: function limitWidth(element, width, options) {\n    var limitedWidth;\n\n    var outerWidth = getOuterWidth(element);\n\n    if (width) {\n      // only when that element has a defined width, apply this logic\n      limitedWidth = outerWidth > 0 && outerWidth < width ? outerWidth : width;\n    } else {\n      // else apply the outer width when the element has no defined width yet\n      limitedWidth = outerWidth;\n    }\n\n    if ((0, _numberIsInteger2.default)(limitedWidth) && limitedWidth < 1) {\n      throw _videomailError2.default.create('Limited width cannot be less than 1!', options);\n    } else {\n      return limitedWidth;\n    }\n  },\n\n  // this is difficult to compute and is not entirely correct.\n  // but good enough for now to ensure some stability.\n  limitHeight: function limitHeight(height, options) {\n    if ((0, _numberIsInteger2.default)(height) && height < 1) {\n      throw _videomailError2.default.create('Passed limit-height argument cannot be less than 1!', options);\n    } else {\n      var limitedHeight = Math.min(height,\n      // document.body.scrollHeight,\n      document.documentElement.clientHeight);\n\n      if (limitedHeight < 1) {\n        throw _videomailError2.default.create('Limited height cannot be less than 1!', options);\n      } else {\n        return limitedHeight;\n      }\n    }\n  },\n\n  calculateWidth: function calculateWidth(options) {\n    var height = options.videoHeight || null;\n    var ratio = options.ratio || options.getRatio();\n\n    height = figureMinHeight(height, options);\n\n    if (options.responsive) {\n      height = this.limitHeight(height, options);\n    }\n\n    if ((0, _numberIsInteger2.default)(height) && height < 1) {\n      throw _videomailError2.default.create('Height cannot be smaller than 1 when calculating width.', options);\n    } else {\n      var calculatedWidth = parseInt(height / ratio);\n\n      if (calculatedWidth < 1) {\n        throw _videomailError2.default.create('Calculated width cannot be smaller than 1!', options);\n      } else {\n        return calculatedWidth;\n      }\n    }\n  },\n\n  calculateHeight: function calculateHeight(element, options) {\n    var width = options.videoWidth || null;\n    var height;\n\n    var ratio = options.ratio || options.getRatio();\n\n    if (options.hasDefinedWidth()) {\n      width = options.video.width;\n    }\n\n    if ((0, _numberIsInteger2.default)(width) && width < 1) {\n      throw _videomailError2.default.create('Unable to calculate height when width is less than 1.', options);\n    } else if (options.responsive) {\n      width = this.limitWidth(element, width, options);\n    }\n\n    if (width) {\n      height = parseInt(width * ratio);\n    }\n\n    if ((0, _numberIsInteger2.default)(height) && height < 1) {\n      throw _videomailError2.default.create('Just calculated a height less than 1 which is wrong.', options);\n    } else {\n      return figureMinHeight(height, options);\n    }\n  }\n};\n\n},{\"./../util/videomailError\":100,\"number-is-integer\":46}],104:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _hyperscript = _dereq_('hyperscript');\n\nvar _hyperscript2 = _interopRequireDefault(_hyperscript);\n\nvar _util = _dereq_('util');\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _hidden = _dereq_('hidden');\n\nvar _hidden2 = _interopRequireDefault(_hidden);\n\nvar _getFormData = _dereq_('get-form-data');\n\nvar _getFormData2 = _interopRequireDefault(_getFormData);\n\nvar _events = _dereq_('./../events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _eventEmitter = _dereq_('./../util/eventEmitter');\n\nvar _eventEmitter2 = _interopRequireDefault(_eventEmitter);\n\nvar _videomailError = _dereq_('./../util/videomailError');\n\nvar _videomailError2 = _interopRequireDefault(_videomailError);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Form = function Form(container, formElement, options) {\n  _eventEmitter2.default.call(this, options, 'Form');\n\n  var self = this;\n\n  var disableContainerValidation;\n  var keyInput;\n\n  function getData() {\n    return (0, _getFormData2.default)(formElement);\n  }\n\n  this.loadVideomail = function (videomail) {\n    var limit = formElement.elements.length;\n\n    var input;\n    var name;\n\n    for (var i = 0; i < limit; i++) {\n      input = formElement.elements[i];\n      name = input.name;\n\n      if (videomail[name]) {\n        input.value = videomail[name];\n      }\n\n      if (name === options.selectors.subjectInputName || name === options.selectors.bodyInputName) {\n        input.disabled = true;\n      }\n    }\n\n    formElement.setAttribute('method', 'put');\n  };\n\n  function isNotButton(element) {\n    return element.tagName !== 'BUTTON' && element.type !== 'submit';\n  }\n\n  function setDisabled(disabled, buttonsToo) {\n    var limit = formElement.elements.length;\n\n    for (var i = 0; i < limit; i++) {\n      if (buttonsToo || !buttonsToo && isNotButton(formElement.elements[i])) {\n        formElement.elements[i].disabled = disabled;\n      }\n    }\n  }\n\n  function hideAll() {\n    var limit = formElement.elements.length;\n\n    for (var i = 0; i < limit; i++) {\n      (0, _hidden2.default)(formElement.elements[i], true);\n    }\n\n    (0, _hidden2.default)(formElement, true);\n  }\n\n  function getInputElements() {\n    return formElement.querySelectorAll('input, textarea');\n  }\n\n  function getSelectElements() {\n    return formElement.querySelectorAll('select');\n  }\n\n  this.disable = function (buttonsToo) {\n    setDisabled(true, buttonsToo);\n  };\n\n  this.enable = function (buttonsToo) {\n    setDisabled(false, buttonsToo);\n  };\n\n  this.build = function () {\n    if (options.enableAutoValidation) {\n      var inputElements = getInputElements();\n      var inputElement;\n\n      for (var i = 0, len = inputElements.length; i < len; i++) {\n        inputElement = inputElements[i];\n\n        if (inputElement.type === 'radio') {\n          inputElement.addEventListener('change', function () {\n            container.validate();\n          });\n        } else {\n          inputElement.addEventListener('input', function () {\n            container.validate();\n          });\n        }\n\n        // because of angular's digest cycle, validate again when it became invalid\n        inputElement.addEventListener('invalid', function () {\n          if (!disableContainerValidation) {\n            container.validate();\n          }\n        });\n      }\n\n      var selectElements = getSelectElements();\n\n      for (var j = 0, len2 = selectElements.length; j < len2; j++) {\n        selectElements[j].addEventListener('change', function () {\n          container.validate();\n        });\n      }\n    }\n\n    keyInput = formElement.querySelector('input[name=\"' + options.selectors.keyInputName + '\"]');\n\n    if (!keyInput) {\n      keyInput = (0, _hyperscript2.default)('input', {\n        name: options.selectors.keyInputName,\n        type: 'hidden'\n      });\n\n      formElement.appendChild(keyInput);\n    }\n\n    this.on(_events2.default.PREVIEW, function (videomailKey) {\n      // beware that preview doesn't always come with a key, i.E.\n      // container.show() can emit PREVIEW without a key when a replay already exists\n      // (can happen when showing - hiding - showing videomail over again)\n\n      // only emit error if key is missing AND the input has no key (value) yet\n      if (!videomailKey && !keyInput.value) {\n        self.emit(_events2.default.ERROR, _videomailError2.default.create('Videomail key for preview is missing!', options));\n      } else if (videomailKey) {\n        keyInput.value = videomailKey;\n      }\n      // else\n      // leave as it and use existing keyInput.value\n    });\n\n    // fixes https://github.com/binarykitchen/videomail-client/issues/91\n    this.on(_events2.default.GOING_BACK, function () {\n      keyInput.value = null;\n    });\n\n    this.on(_events2.default.ERROR, function (err) {\n      // since https://github.com/binarykitchen/videomail-client/issues/60\n      // we hide areas to make it easier for the user to process an error\n      // (= less distractions)\n      if (err.hideForm && err.hideForm() && options.adjustFormOnBrowserError) {\n        hideAll();\n      } else if (err.hideButtons && err.hideButtons() && options.adjustFormOnBrowserError) {\n        hideSubmitButton();\n      }\n    });\n\n    this.on(_events2.default.BUILT, function () {\n      startListeningToSubmitEvents();\n    });\n  };\n\n  function hideSubmitButton() {\n    var submitButton = self.findSubmitButton();\n    (0, _hidden2.default)(submitButton, true);\n  }\n\n  function startListeningToSubmitEvents() {\n    var submitButton = container.getSubmitButton();\n    submitButton.addEventListener('click', self.doTheSubmit.bind(self));\n  }\n\n  this.doTheSubmit = function (e) {\n    if (e) {\n      e.preventDefault();\n    }\n\n    // only submit when there is a container,\n    // otherwise do nothing and leave as it\n    if (container.hasElement()) {\n      container.submitAll(getData(), formElement.getAttribute('method'), formElement.getAttribute('action'));\n    }\n\n    return false; // important to stop submission\n  };\n\n  this.getInvalidElement = function () {\n    var inputElements = getInputElements();\n\n    for (var i = 0, len = inputElements.length; i < len; i++) {\n      if (!inputElements[i].validity.valid) {\n        return inputElements[i];\n      }\n    }\n\n    var selectElements = getSelectElements();\n\n    for (var j = 0, len2 = selectElements.length; j < len2; j++) {\n      if (!selectElements[i].validity.valid) {\n        return selectElements[j];\n      }\n    }\n\n    return null;\n  };\n\n  this.validate = function () {\n    // prevents endless validation loop\n    disableContainerValidation = true;\n\n    var formIsValid = formElement.checkValidity();\n\n    disableContainerValidation = false;\n\n    return formIsValid;\n  };\n\n  this.findSubmitButton = function () {\n    return formElement.querySelector(\"[type='submit']\");\n  };\n\n  this.hide = function () {\n    formElement && (0, _hidden2.default)(formElement, true);\n  };\n\n  this.show = function () {\n    formElement && (0, _hidden2.default)(formElement, false);\n  };\n};\n\n_util2.default.inherits(Form, _eventEmitter2.default);\n\nexports.default = Form;\n\n},{\"./../events\":88,\"./../util/eventEmitter\":95,\"./../util/videomailError\":100,\"get-form-data\":26,\"hidden\":31,\"hyperscript\":33,\"util\":80}],105:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _deepmerge = _dereq_('deepmerge');\n\nvar _deepmerge2 = _interopRequireDefault(_deepmerge);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  addFunctions: function addFunctions(options) {\n    var audioEnabled = options.audio && options.audio.enabled;\n\n    options.hasDefinedHeight = function () {\n      return this.video.height && this.video.height !== 'auto';\n    };\n\n    options.hasDefinedWidth = function () {\n      return this.video.width && this.video.width !== 'auto';\n    };\n\n    options.hasDefinedDimension = function () {\n      return this.hasDefinedWidth() || this.hasDefinedHeight();\n    };\n\n    options.hasDefinedDimensions = function () {\n      return this.hasDefinedWidth() && this.hasDefinedHeight();\n    };\n\n    options.getRatio = function () {\n      var ratio = 1; // just a default one when no computations are possible\n\n      // todo fix this, it's not really an option\n      var hasVideoDimensions = this.videoHeight && this.videoWidth;\n\n      if (this.hasDefinedDimensions()) {\n        if (hasVideoDimensions) {\n          // figure out first which one to pick\n          if (this.videoHeight < this.video.height || this.videoWidth < this.video.width) {\n            ratio = this.videoHeight / this.videoWidth;\n          } else {\n            ratio = this.video.height / this.video.width;\n          }\n        } else {\n          ratio = this.video.height / this.video.width;\n        }\n      } else if (hasVideoDimensions) {\n        ratio = this.videoHeight / this.videoWidth;\n      }\n\n      return ratio;\n    };\n\n    options.isAudioEnabled = function () {\n      return audioEnabled;\n    };\n\n    options.setAudioEnabled = function (enabled) {\n      audioEnabled = enabled;\n    };\n\n    options.isAutoPauseEnabled = function () {\n      return this.enableAutoPause && this.enablePause;\n    };\n  },\n\n  // not very elegant but works! and if you here are reading this, and\n  // start to doubt, rest assured, it's solid and run thousand times over\n  // and over again each day. and other large sites out there have their own\n  // tech debts. hope i have shattered your illusion on perfection?\n  merge: function merge(defaultOptions, newOptions) {\n    var options = (0, _deepmerge2.default)(defaultOptions, newOptions, {\n      arrayMerge: function arrayMerge(destination, source) {\n        return source;\n      }\n    });\n\n    this.addFunctions(options);\n\n    return options;\n  }\n}; // enhances options with useful functions we can reuse everywhere\n\n},{\"deepmerge\":16}],106:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _util = _dereq_('util');\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _hyperscript = _dereq_('hyperscript');\n\nvar _hyperscript2 = _interopRequireDefault(_hyperscript);\n\nvar _hidden = _dereq_('hidden');\n\nvar _hidden2 = _interopRequireDefault(_hidden);\n\nvar _replay = _dereq_('./visuals/replay');\n\nvar _replay2 = _interopRequireDefault(_replay);\n\nvar _recorder = _dereq_('./visuals/recorder');\n\nvar _recorder2 = _interopRequireDefault(_recorder);\n\nvar _notifier = _dereq_('./visuals/notifier');\n\nvar _notifier2 = _interopRequireDefault(_notifier);\n\nvar _recorderInsides = _dereq_('./visuals/inside/recorderInsides');\n\nvar _recorderInsides2 = _interopRequireDefault(_recorderInsides);\n\nvar _eventEmitter = _dereq_('./../util/eventEmitter');\n\nvar _eventEmitter2 = _interopRequireDefault(_eventEmitter);\n\nvar _events = _dereq_('./../events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Visuals = function Visuals(container, options) {\n  _eventEmitter2.default.call(this, options, 'Visuals');\n\n  var self = this;\n\n  // can be overwritten with setter fn\n  var replay = new _replay2.default(this, options);\n\n  var recorder = new _recorder2.default(this, replay, options);\n  var recorderInsides = new _recorderInsides2.default(this, options);\n\n  var notifier = new _notifier2.default(this, options);\n\n  var debug = options.debug;\n\n  var visualsElement;\n  var built;\n\n  function buildNoScriptTag() {\n    var noScriptElement = container.querySelector('noscript');\n\n    if (!noScriptElement) {\n      noScriptElement = (0, _hyperscript2.default)('noscript');\n      noScriptElement.innerHTML = 'Please enable Javascript';\n\n      visualsElement.appendChild(noScriptElement);\n    }\n  }\n\n  function buildChildren() {\n    debug('Visuals: buildChildren()');\n\n    buildNoScriptTag();\n\n    if (!options.playerOnly) {\n      notifier.build();\n      recorderInsides.build();\n    }\n\n    replay.build();\n\n    debug('Visuals: built.');\n  }\n\n  function initEvents() {\n    if (!options.playerOnly) {\n      debug('Visuals: initEvents()');\n\n      self.on(_events2.default.USER_MEDIA_READY, function () {\n        built = true;\n        self.endWaiting();\n        container.enableForm(false);\n      }).on(_events2.default.PREVIEW, function () {\n        self.endWaiting();\n      }).on(_events2.default.BLOCKING, function (blockingOptions) {\n        if (!blockingOptions.hideForm && !options.adjustFormOnBrowserError) {\n          // do nothing, user still can enter form inputs\n          // can be useful when you are on i.E. seeflow's contact page and\n          // still want to tick off the webcam option\n        } else {\n          container.disableForm(true);\n        }\n      }).on(_events2.default.PREVIEW_SHOWN, function () {\n        container.validate(true);\n      }).on(_events2.default.LOADED_META_DATA, function () {\n        correctDimensions();\n      }).on(_events2.default.ERROR, function (err) {\n        if (err.removeDimensions && err.removeDimensions()) {\n          removeDimensions();\n        }\n      });\n    }\n  }\n\n  function correctDimensions() {\n    visualsElement.style.width = self.getRecorderWidth(true) + 'px';\n    visualsElement.style.height = self.getRecorderHeight(true) + 'px';\n  }\n\n  function removeDimensions() {\n    visualsElement.style.width = 'auto';\n    visualsElement.style.height = 'auto';\n  }\n\n  this.getRatio = function () {\n    if (visualsElement.clientWidth) {\n      // special case for safari, see getRatio() in recorder\n      return visualsElement.clientHeight / visualsElement.clientWidth;\n    } else {\n      return 0;\n    }\n  };\n\n  function isRecordable() {\n    return !self.isNotifying() && !replay.isShown() && !self.isCountingDown();\n  }\n\n  this.isCountingDown = function () {\n    return recorderInsides.isCountingDown();\n  };\n\n  this.build = function () {\n    visualsElement = container.querySelector('.' + options.selectors.visualsClass);\n\n    if (!visualsElement) {\n      visualsElement = (0, _hyperscript2.default)('div.' + options.selectors.visualsClass);\n\n      var buttonsElement = container.querySelector('.' + options.selectors.buttonsClass);\n\n      // make sure it's placed before the buttons, but only if it's a child\n      // element of the container = inside the container\n      if (buttonsElement && !container.isOutsideElementOf(buttonsElement)) {\n        container.insertBefore(visualsElement, buttonsElement);\n      } else {\n        container.appendChild(visualsElement);\n      }\n    }\n\n    // do not hide visuals element so that apps can give it a predefined\n    // width or height through css but hide all children\n\n    visualsElement.classList.add('visuals');\n\n    correctDimensions();\n\n    !built && initEvents();\n    buildChildren();\n\n    // needed for replay handling and container.isOutsideElementOf()\n    self.parentNode = visualsElement.parentNode;\n\n    built = true;\n  };\n\n  this.querySelector = function (selector) {\n    return visualsElement && visualsElement.querySelector(selector);\n  };\n\n  this.appendChild = function (child) {\n    visualsElement && visualsElement.appendChild(child);\n  };\n\n  this.removeChild = function (child) {\n    visualsElement.removeChild(child);\n  };\n\n  this.reset = function () {\n    this.endWaiting();\n    recorder.reset();\n  };\n\n  this.beginWaiting = function () {\n    container.beginWaiting();\n  };\n\n  this.endWaiting = function () {\n    container.endWaiting();\n  };\n\n  this.stop = function (params) {\n    recorder.stop(params);\n    recorderInsides.hidePause();\n  };\n\n  this.back = function (params, cb) {\n    if (!cb && params) {\n      cb = params;\n      params = {};\n    }\n\n    replay.hide();\n    notifier.hide();\n\n    if (params.keepHidden) {\n      recorder.hide();\n      cb && cb();\n    } else {\n      recorder.back(cb);\n    }\n  };\n\n  this.recordAgain = function () {\n    this.back(function () {\n      self.once(_events2.default.USER_MEDIA_READY, function () {\n        self.record();\n      });\n    });\n  };\n\n  this.unload = function (e) {\n    try {\n      recorder.unload(e);\n      recorderInsides.unload(e);\n      replay.unload(e);\n\n      built = false;\n    } catch (exc) {\n      this.emit(_events2.default.ERROR, exc);\n    }\n  };\n\n  this.isNotifying = function () {\n    return notifier.isVisible();\n  };\n\n  this.isReplayShown = function () {\n    return replay.isShown();\n  };\n\n  this.pause = function (params) {\n    recorder.pause(params);\n    recorderInsides.showPause();\n  };\n\n  this.resume = function () {\n    if (recorderInsides.isCountingDown()) {\n      recorderInsides.resumeCountdown();\n    } else {\n      recorder.resume();\n    }\n\n    recorderInsides.hidePause();\n  };\n\n  this.pauseOrResume = function () {\n    if (isRecordable.call(this)) {\n      if (this.isRecording()) {\n        this.pause();\n      } else if (recorder.isPaused()) {\n        this.resume();\n      } else if (recorder.isReady()) {\n        this.record();\n      }\n    }\n  };\n\n  this.recordOrStop = function () {\n    if (isRecordable()) {\n      if (this.isRecording()) {\n        this.stop();\n      } else if (recorder.isReady()) {\n        this.record();\n      }\n    }\n  };\n\n  this.record = function () {\n    if (options.video.countdown) {\n      this.emit(_events2.default.COUNTDOWN);\n      recorderInsides.startCountdown(recorder.record.bind(recorder));\n    } else {\n      recorder.record();\n    }\n  };\n\n  this.getRecorder = function () {\n    return recorder;\n  };\n\n  this.getReplay = function () {\n    return replay;\n  };\n\n  this.validate = function () {\n    return recorder.validate() && this.isReplayShown();\n  };\n\n  this.getRecordingStats = function () {\n    return recorder.getRecordingStats();\n  };\n\n  this.getAudioSampleRate = function () {\n    return recorder.getAudioSampleRate();\n  };\n\n  this.isPaused = function () {\n    return recorder.isPaused();\n  };\n\n  this.error = function (err) {\n    notifier.error(err);\n  };\n\n  this.hide = function () {\n    if (visualsElement) {\n      (0, _hidden2.default)(visualsElement, true);\n      this.emit(_events2.default.HIDE);\n    }\n  };\n\n  this.isHidden = function () {\n    if (!built) {\n      return true;\n    } else if (visualsElement) {\n      return (0, _hidden2.default)(visualsElement);\n    }\n  };\n\n  this.showVisuals = function () {\n    visualsElement && (0, _hidden2.default)(visualsElement, false);\n  };\n\n  this.show = function () {\n    !this.isReplayShown() && visualsElement && recorder.build();\n    this.showVisuals();\n  };\n\n  this.showReplayOnly = function () {\n    !this.isReplayShown() && replay.show();\n\n    this.show();\n    recorder.hide();\n    notifier.hide();\n  };\n\n  this.isRecorderUnloaded = function () {\n    return recorder.isUnloaded();\n  };\n\n  this.isConnecting = function () {\n    return recorder.isConnecting();\n  };\n\n  this.getRecorderWidth = function (responsive) {\n    return recorder.getRecorderWidth(responsive);\n  };\n\n  this.getRecorderHeight = function (responsive) {\n    return recorder.getRecorderHeight(responsive);\n  };\n\n  this.limitWidth = function (width) {\n    return container.limitWidth(width, options);\n  };\n\n  this.limitHeight = function (height) {\n    return container.limitHeight(height);\n  };\n\n  this.calculateWidth = function (options) {\n    return container.calculateWidth(options);\n  };\n\n  this.calculateHeight = function (options) {\n    return container.calculateHeight(options);\n  };\n\n  this.getReplay = function () {\n    return replay;\n  };\n\n  this.getBoundingClientRect = function () {\n    // fixes https://github.com/binarykitchen/videomail-client/issues/126\n    return visualsElement && visualsElement.getBoundingClientRect();\n  };\n\n  this.checkTimer = function (intervalSum) {\n    recorderInsides.checkTimer(intervalSum);\n  };\n\n  this.isNotifierBuilt = function () {\n    return notifier && notifier.isBuilt();\n  };\n\n  this.isReplayShown = replay.isShown.bind(replay);\n  this.hideReplay = replay.hide.bind(replay);\n  this.hideRecorder = recorder.hide.bind(recorder);\n  this.isRecording = recorder.isRecording.bind(recorder);\n  this.isUserMediaLoaded = recorder.isUserMediaLoaded.bind(recorder);\n  this.isConnected = recorder.isConnected.bind(recorder);\n};\n\n_util2.default.inherits(Visuals, _eventEmitter2.default);\n\nexports.default = Visuals;\n\n},{\"./../events\":88,\"./../util/eventEmitter\":95,\"./visuals/inside/recorderInsides\":111,\"./visuals/notifier\":112,\"./visuals/recorder\":113,\"./visuals/replay\":114,\"hidden\":31,\"hyperscript\":33,\"util\":80}],107:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (visuals, options) {\n  var self = this;\n\n  var countdownElement;\n  var intervalId;\n  var countdown;\n  var paused;\n\n  function fire(cb) {\n    self.unload();\n    self.hide();\n\n    // keep all callbacks async\n    setTimeout(function () {\n      cb();\n    }, 0);\n  }\n\n  function countBackward(cb) {\n    if (!paused) {\n      options.debug('Countdown', countdown);\n      countdown--;\n\n      if (countdown < 1) {\n        fire(cb);\n      } else {\n        countdownElement.innerHTML = countdown;\n      }\n    }\n  }\n\n  this.start = function (cb) {\n    countdownElement.innerHTML = countdown = options.video.countdown;\n\n    this.show();\n\n    intervalId = setInterval(countBackward.bind(this, cb), 950);\n  };\n\n  this.pause = function () {\n    paused = true;\n  };\n\n  this.resume = function () {\n    paused = false;\n  };\n\n  this.build = function () {\n    countdownElement = visuals.querySelector('.countdown');\n\n    if (!countdownElement) {\n      countdownElement = (0, _hyperscript2.default)('p.countdown');\n\n      this.hide();\n\n      visuals.appendChild(countdownElement);\n    } else {\n      this.hide();\n    }\n  };\n\n  this.show = function () {\n    (0, _hidden2.default)(countdownElement, false);\n  };\n\n  this.isCountingDown = function () {\n    return !!intervalId;\n  };\n\n  this.unload = function () {\n    clearInterval(intervalId);\n    paused = false;\n    intervalId = null;\n  };\n\n  this.hide = function () {\n    (0, _hidden2.default)(countdownElement, true);\n    this.unload();\n  };\n};\n\nvar _hyperscript = _dereq_('hyperscript');\n\nvar _hyperscript2 = _interopRequireDefault(_hyperscript);\n\nvar _hidden = _dereq_('hidden');\n\nvar _hidden2 = _interopRequireDefault(_hidden);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n},{\"hidden\":31,\"hyperscript\":33}],108:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (visuals, options) {\n  if (!options.text.pausedHeader) {\n    throw _videomailError2.default.create('Paused header cannot be empty', options);\n  }\n\n  var pausedBlockElement;\n  var pausedHeaderElement;\n  var pausedHintElement;\n\n  function hasPausedHint() {\n    return options.text.pausedHint;\n  }\n\n  this.build = function () {\n    pausedBlockElement = visuals.querySelector('.paused');\n    pausedHeaderElement = visuals.querySelector('.pausedHeader');\n\n    if (!pausedHeaderElement) {\n      pausedBlockElement = (0, _hyperscript2.default)('div.paused');\n      pausedHeaderElement = (0, _hyperscript2.default)('p.pausedHeader');\n\n      this.hide();\n\n      pausedHeaderElement.innerHTML = options.text.pausedHeader;\n\n      pausedBlockElement.appendChild(pausedHeaderElement);\n\n      if (hasPausedHint()) {\n        pausedHintElement = visuals.querySelector('.pausedHint');\n        pausedHintElement = (0, _hyperscript2.default)('p.pausedHint');\n        pausedHintElement.innerHTML = options.text.pausedHint;\n        pausedBlockElement.appendChild(pausedHintElement);\n      }\n\n      visuals.appendChild(pausedBlockElement);\n    } else {\n      this.hide();\n\n      pausedHeaderElement.innerHTML = options.text.pausedHeader;\n\n      if (hasPausedHint()) {\n        pausedHintElement.innerHTML = options.text.pausedHint;\n      }\n    }\n  };\n\n  this.hide = function () {\n    (0, _hidden2.default)(pausedBlockElement, true);\n  };\n\n  this.show = function () {\n    (0, _hidden2.default)(pausedBlockElement, false);\n  };\n};\n\nvar _hyperscript = _dereq_('hyperscript');\n\nvar _hyperscript2 = _interopRequireDefault(_hyperscript);\n\nvar _hidden = _dereq_('hidden');\n\nvar _hidden2 = _interopRequireDefault(_hidden);\n\nvar _videomailError = _dereq_('./../../../../util/videomailError');\n\nvar _videomailError2 = _interopRequireDefault(_videomailError);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n},{\"./../../../../util/videomailError\":100,\"hidden\":31,\"hyperscript\":33}],109:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (visuals) {\n  var recordNoteElement;\n\n  this.build = function () {\n    recordNoteElement = visuals.querySelector('.recordNote');\n\n    if (!recordNoteElement) {\n      recordNoteElement = (0, _hyperscript2.default)('p.recordNote');\n\n      this.hide();\n\n      visuals.appendChild(recordNoteElement);\n    } else {\n      this.hide();\n    }\n  };\n\n  this.stop = function () {\n    this.hide();\n    recordNoteElement.classList.remove('near');\n    recordNoteElement.classList.remove('nigh');\n  };\n\n  this.setNear = function () {\n    recordNoteElement.classList.add('near');\n  };\n\n  this.setNigh = function () {\n    recordNoteElement.classList.add('nigh');\n  };\n\n  this.hide = function () {\n    (0, _hidden2.default)(recordNoteElement, true);\n  };\n\n  this.show = function () {\n    (0, _hidden2.default)(recordNoteElement, false);\n  };\n};\n\nvar _hyperscript = _dereq_('hyperscript');\n\nvar _hyperscript2 = _interopRequireDefault(_hyperscript);\n\nvar _hidden = _dereq_('hidden');\n\nvar _hidden2 = _interopRequireDefault(_hidden);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n},{\"hidden\":31,\"hyperscript\":33}],110:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (visuals, recordNote, options) {\n  var recordTimerElement;\n\n  var nearComputed = false;\n  var endNighComputed = false;\n\n  var started;\n  var countdown;\n\n  function pad(n) {\n    return n < 10 ? '0' + n : n;\n  }\n\n  function thresholdReached(secs, threshold) {\n    return secs >= options.video.limitSeconds * threshold;\n  }\n\n  function isNear(secs) {\n    if (!nearComputed && thresholdReached(secs, 0.6)) {\n      nearComputed = true;\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  function endIsNigh(secs) {\n    if (!endNighComputed && thresholdReached(secs, 0.8)) {\n      endNighComputed = true;\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  function setNear() {\n    recordTimerElement.classList.add('near');\n  }\n\n  function setNigh() {\n    recordTimerElement.classList.add('nigh');\n  }\n\n  this.check = function (opts) {\n    var newCountdown = getStartSeconds() - Math.floor(opts.intervalSum / 1e3);\n\n    // performance optimisation (another reason we need react here!)\n    if (newCountdown !== countdown) {\n      countdown = newCountdown;\n      update();\n      countdown < 1 && visuals.stop(true);\n    }\n  };\n\n  function update() {\n    var mins = parseInt(countdown / 60, 10);\n    var secs = countdown - mins * 60;\n\n    if (!nearComputed || !endNighComputed) {\n      var remainingSeconds = options.video.limitSeconds - countdown;\n\n      if (isNear(remainingSeconds)) {\n        recordNote.setNear();\n        setNear();\n\n        options.debug('End is near, ' + countdown + ' seconds to go');\n      } else if (endIsNigh(remainingSeconds)) {\n        recordNote.setNigh();\n        setNigh();\n\n        options.debug('End is nigh, ' + countdown + ' seconds to go');\n      }\n    }\n\n    recordTimerElement.innerHTML = mins + ':' + pad(secs);\n  }\n\n  function hide() {\n    (0, _hidden2.default)(recordTimerElement, true);\n  }\n\n  function show() {\n    recordTimerElement.classList.remove('near');\n    recordTimerElement.classList.remove('nigh');\n\n    (0, _hidden2.default)(recordTimerElement, false);\n  }\n\n  function getSecondsRecorded() {\n    return getStartSeconds() - countdown;\n  }\n\n  function getStartSeconds() {\n    return options.video.limitSeconds;\n  }\n\n  this.start = function () {\n    countdown = getStartSeconds();\n    nearComputed = endNighComputed = false;\n    started = true;\n\n    update();\n\n    show();\n  };\n\n  this.pause = function () {\n    recordNote.hide();\n  };\n\n  this.resume = function () {\n    recordNote.show();\n  };\n\n  function isStopped() {\n    return countdown === null;\n  }\n\n  this.stop = function () {\n    if (!isStopped() && started) {\n      options.debug('Stopping record timer. Was recording for about ~' + getSecondsRecorded() + ' seconds.');\n\n      hide();\n      recordNote.stop();\n\n      countdown = null;\n      started = false;\n    }\n  };\n\n  this.build = function () {\n    recordTimerElement = visuals.querySelector('.recordTimer');\n\n    if (!recordTimerElement) {\n      recordTimerElement = (0, _hyperscript2.default)('p.recordTimer');\n\n      hide();\n\n      visuals.appendChild(recordTimerElement);\n    } else {\n      hide();\n    }\n  };\n};\n\nvar _hyperscript = _dereq_('hyperscript');\n\nvar _hyperscript2 = _interopRequireDefault(_hyperscript);\n\nvar _hidden = _dereq_('hidden');\n\nvar _hidden2 = _interopRequireDefault(_hidden);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n},{\"hidden\":31,\"hyperscript\":33}],111:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _util = _dereq_('util');\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _events = _dereq_('./../../../events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _eventEmitter = _dereq_('./../../../util/eventEmitter');\n\nvar _eventEmitter2 = _interopRequireDefault(_eventEmitter);\n\nvar _countdown = _dereq_('./recorder/countdown');\n\nvar _countdown2 = _interopRequireDefault(_countdown);\n\nvar _pausedNote = _dereq_('./recorder/pausedNote');\n\nvar _pausedNote2 = _interopRequireDefault(_pausedNote);\n\nvar _recordNote = _dereq_('./recorder/recordNote');\n\nvar _recordNote2 = _interopRequireDefault(_recordNote);\n\nvar _recordTimer = _dereq_('./recorder/recordTimer');\n\nvar _recordTimer2 = _interopRequireDefault(_recordTimer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar RecorderInsides = function RecorderInsides(visuals, options) {\n  _eventEmitter2.default.call(this, options, 'RecorderInsides');\n\n  var self = this;\n  var debug = options.debug;\n\n  var recordNote = new _recordNote2.default(visuals);\n  var recordTimer = new _recordTimer2.default(visuals, recordNote, options);\n\n  var countdown;\n  var pausedNote;\n  var built;\n\n  if (options.video.countdown) {\n    countdown = new _countdown2.default(visuals, options);\n  }\n\n  if (options.enablePause) {\n    pausedNote = new _pausedNote2.default(visuals, options);\n  }\n\n  function startRecording() {\n    recordTimer.start();\n  }\n\n  function resumeRecording() {\n    recordTimer.resume();\n  }\n\n  function stopRecording() {\n    recordTimer.stop();\n  }\n\n  function pauseRecording() {\n    if (self.isCountingDown()) {\n      countdown.pause();\n    } else {\n      recordTimer.pause();\n    }\n  }\n\n  function onResetting() {\n    self.hidePause();\n    self.hideCountdown();\n    recordTimer.stop();\n  }\n\n  function initEvents() {\n    debug('RecorderInsides: initEvents()');\n\n    self.on(_events2.default.RECORDING, function () {\n      startRecording();\n    }).on(_events2.default.RESUMING, function () {\n      resumeRecording();\n    }).on(_events2.default.STOPPING, function () {\n      stopRecording();\n    }).on(_events2.default.PAUSED, function () {\n      pauseRecording();\n    }).on(_events2.default.RESETTING, onResetting).on(_events2.default.HIDE, function () {\n      self.hideCountdown();\n    });\n  }\n\n  this.build = function () {\n    debug('RecorderInsides: build()');\n\n    countdown && countdown.build();\n    pausedNote && pausedNote.build();\n\n    recordNote.build();\n    recordTimer.build();\n\n    !built && initEvents();\n\n    built = true;\n  };\n\n  this.unload = function () {\n    countdown && countdown.unload();\n\n    built = false;\n  };\n\n  this.showPause = function () {\n    pausedNote && pausedNote.show();\n  };\n\n  this.hidePause = function () {\n    pausedNote && pausedNote.hide();\n  };\n\n  this.hideCountdown = function () {\n    countdown && countdown.hide();\n  };\n\n  this.startCountdown = function (cb) {\n    countdown && countdown.start(cb);\n  };\n\n  this.resumeCountdown = function () {\n    countdown && countdown.resume();\n  };\n\n  this.isCountingDown = function () {\n    return countdown && countdown.isCountingDown();\n  };\n\n  this.checkTimer = function (intervalSum) {\n    recordTimer.check(intervalSum);\n  };\n};\n\n_util2.default.inherits(RecorderInsides, _eventEmitter2.default);\n\nexports.default = RecorderInsides;\n\n},{\"./../../../events\":88,\"./../../../util/eventEmitter\":95,\"./recorder/countdown\":107,\"./recorder/pausedNote\":108,\"./recorder/recordNote\":109,\"./recorder/recordTimer\":110,\"util\":80}],112:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _util = _dereq_('util');\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _hyperscript = _dereq_('hyperscript');\n\nvar _hyperscript2 = _interopRequireDefault(_hyperscript);\n\nvar _hidden = _dereq_('hidden');\n\nvar _hidden2 = _interopRequireDefault(_hidden);\n\nvar _eventEmitter = _dereq_('./../../util/eventEmitter');\n\nvar _eventEmitter2 = _interopRequireDefault(_eventEmitter);\n\nvar _events = _dereq_('./../../events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Notifier = function Notifier(visuals, options) {\n  _eventEmitter2.default.call(this, options, 'Notifier');\n\n  var self = this;\n  var debug = options && options.debug;\n\n  var notifyElement;\n  var messageElement;\n  var explanationElement;\n  var entertainTimeoutId;\n  var entertaining;\n  var built;\n\n  function onStopping(limitReached) {\n    var lead = '';\n\n    visuals.beginWaiting();\n\n    if (limitReached) {\n      debug('Limit reached');\n      lead += options.text.limitReached + '.<br/>';\n    }\n\n    lead += options.text.sending + ' …';\n\n    self.notify(lead, null, {\n      stillWait: true,\n      entertain: options.notifier.entertain\n    });\n  }\n\n  function onConnecting() {\n    self.notify('Connecting …');\n  }\n\n  function onLoadingUserMedia() {\n    self.notify('Loading webcam …');\n  }\n\n  function onProgress(frameProgress, sampleProgress) {\n    var overallProgress;\n\n    if (options.isAudioEnabled()) {\n      overallProgress = 'Video: ' + frameProgress;\n\n      if (sampleProgress) {\n        overallProgress += ', Audio: ' + sampleProgress;\n      }\n    } else {\n      overallProgress = frameProgress;\n    }\n\n    self.setExplanation(overallProgress);\n  }\n\n  function onBeginVideoEncoding() {\n    visuals.beginWaiting();\n\n    var lead = options.text.encoding + ' …';\n\n    self.notify(lead, null, {\n      stillWait: true,\n      entertain: options.notifier.entertain\n    });\n\n    hideExplanation();\n  }\n\n  function initEvents() {\n    debug('Notifier: initEvents()');\n\n    self.on(_events2.default.CONNECTING, function () {\n      onConnecting();\n    }).on(_events2.default.LOADING_USER_MEDIA, function () {\n      onLoadingUserMedia();\n    }).on(_events2.default.USER_MEDIA_READY, function () {\n      self.hide();\n    }).on(_events2.default.LOADED_META_DATA, function () {\n      correctDimensions();\n    }).on(_events2.default.PREVIEW, function () {\n      self.hide();\n    }).on(_events2.default.STOPPING, function (limitReached) {\n      onStopping(limitReached);\n    }).on(_events2.default.PROGRESS, function (frameProgress, sampleProgress) {\n      onProgress(frameProgress, sampleProgress);\n    }).on(_events2.default.BEGIN_VIDEO_ENCODING, function () {\n      onBeginVideoEncoding();\n    });\n  }\n\n  function correctDimensions() {\n    notifyElement.style.width = visuals.getRecorderWidth(true) + 'px';\n    notifyElement.style.height = visuals.getRecorderHeight(true) + 'px';\n  }\n\n  function show() {\n    notifyElement && (0, _hidden2.default)(notifyElement, false);\n  }\n\n  function runEntertainment() {\n    if (options.notifier.entertain) {\n      if (!entertaining) {\n        var randomBackgroundClass = Math.floor(Math.random() * options.notifier.entertainLimit + 1);\n\n        notifyElement.className = 'notifier entertain ' + options.notifier.entertainClass + randomBackgroundClass;\n\n        entertainTimeoutId = setTimeout(runEntertainment, options.notifier.entertainInterval);\n        entertaining = true;\n      }\n    } else {\n      cancelEntertainment();\n    }\n  }\n\n  function cancelEntertainment() {\n    if (notifyElement) {\n      notifyElement.classList.remove('entertain');\n    }\n\n    clearTimeout(entertainTimeoutId);\n    entertainTimeoutId = null;\n    entertaining = false;\n  }\n\n  function setMessage(message, messageOptions) {\n    var problem = messageOptions.problem ? messageOptions.problem : false;\n\n    if (messageElement) {\n      messageElement.innerHTML = (problem ? '&#x2639; ' : '') + message;\n    } else {\n      options.logger.warn('Unable to show following because messageElement is empty:', message);\n    }\n  }\n\n  this.error = function (err) {\n    var message = err.message ? err.message.toString() : err.toString();\n    var explanation = err.explanation ? err.explanation.toString() : null;\n\n    if (!message) {\n      options.debug('Weird empty message generated for error', err);\n    }\n\n    self.notify(message, explanation, {\n      blocking: true,\n      problem: true,\n      hideForm: err.hideForm && err.hideForm(),\n      classList: err.getClassList && err.getClassList(),\n      removeDimensions: err.removeDimensions && err.removeDimensions()\n    });\n  };\n\n  this.setExplanation = function (explanation) {\n    if (!explanationElement) {\n      explanationElement = (0, _hyperscript2.default)('p');\n\n      if (notifyElement) {\n        notifyElement.appendChild(explanationElement);\n      } else {\n        options.logger.warn('Unable to show explanation because notifyElement is empty:', explanation);\n      }\n    }\n\n    explanationElement.innerHTML = explanation;\n\n    (0, _hidden2.default)(explanationElement, false);\n  };\n\n  this.build = function () {\n    options.debug('Notifier: build()');\n\n    notifyElement = visuals.querySelector('.notifier');\n\n    if (!notifyElement) {\n      notifyElement = (0, _hyperscript2.default)('.notifier'); // defaults to div\n\n      this.hide();\n\n      visuals.appendChild(notifyElement);\n    } else {\n      this.hide();\n    }\n\n    !built && initEvents();\n\n    built = true;\n  };\n\n  function hideExplanation() {\n    if (explanationElement) {\n      explanationElement.innerHTML = null;\n      (0, _hidden2.default)(explanationElement, true);\n    }\n  }\n\n  this.hide = function () {\n    cancelEntertainment();\n\n    if (notifyElement) {\n      (0, _hidden2.default)(notifyElement, true);\n      notifyElement.classList.remove('blocking');\n    }\n\n    if (messageElement) {\n      messageElement.innerHTML = null;\n    }\n\n    hideExplanation();\n  };\n\n  this.isVisible = function () {\n    if (!built) {\n      return false;\n    } else {\n      return notifyElement && !(0, _hidden2.default)(notifyElement);\n    }\n  };\n\n  this.isBuilt = function () {\n    return built;\n  };\n\n  this.notify = function (message, explanation, notifyOptions) {\n    options.debug('Notifier: notify()');\n\n    if (!notifyOptions) {\n      notifyOptions = {};\n    }\n\n    var stillWait = notifyOptions.stillWait ? notifyOptions.stillWait : false;\n    var entertain = notifyOptions.entertain ? notifyOptions.entertain : false;\n    var blocking = notifyOptions.blocking ? notifyOptions.blocking : false;\n    var hideForm = notifyOptions.hideForm ? notifyOptions.hideForm : false;\n    var classList = notifyOptions.classList ? notifyOptions.classList : false;\n    var removeDimensions = notifyOptions.removeDimensions ? notifyOptions.removeDimensions : false;\n\n    if (!messageElement && notifyElement) {\n      messageElement = (0, _hyperscript2.default)('h2');\n\n      if (explanationElement) {\n        notifyElement.insertBefore(messageElement, explanationElement);\n      } else {\n        notifyElement.appendChild(messageElement);\n      }\n    }\n\n    if (notifyElement) {\n      // reset\n      if (!entertain) {\n        notifyElement.className = 'notifier';\n      }\n\n      if (classList) {\n        classList.forEach(function (className) {\n          notifyElement.classList.add(className);\n        });\n      }\n\n      if (removeDimensions) {\n        notifyElement.style.width = 'auto';\n        notifyElement.style.height = 'auto';\n      }\n    }\n\n    if (blocking) {\n      notifyElement && notifyElement.classList.add('blocking');\n      this.emit(_events2.default.BLOCKING, { hideForm: hideForm });\n    } else {\n      this.emit(_events2.default.NOTIFYING);\n    }\n\n    visuals.hideReplay();\n    visuals.hideRecorder();\n\n    setMessage(message, notifyOptions);\n\n    if (explanation && explanation.length > 0) {\n      this.setExplanation(explanation);\n    }\n\n    if (entertain) {\n      runEntertainment();\n    } else {\n      cancelEntertainment();\n    }\n\n    // just as a safety in case if an error is thrown in the middle of the build process\n    // and visuals aren't built/shown yet.\n    visuals.showVisuals();\n\n    show();\n\n    !stillWait && visuals.endWaiting();\n  };\n};\n\n_util2.default.inherits(Notifier, _eventEmitter2.default);\n\nexports.default = Notifier;\n\n},{\"./../../events\":88,\"./../../util/eventEmitter\":95,\"hidden\":31,\"hyperscript\":33,\"util\":80}],113:[function(_dereq_,module,exports){\n(function (Buffer){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _websocketStream = _dereq_('websocket-stream');\n\nvar _websocketStream2 = _interopRequireDefault(_websocketStream);\n\nvar _canvasToBuffer = _dereq_('canvas-to-buffer');\n\nvar _canvasToBuffer2 = _interopRequireDefault(_canvasToBuffer);\n\nvar _util = _dereq_('util');\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _hyperscript = _dereq_('hyperscript');\n\nvar _hyperscript2 = _interopRequireDefault(_hyperscript);\n\nvar _hidden = _dereq_('hidden');\n\nvar _hidden2 = _interopRequireDefault(_hidden);\n\nvar _animitter = _dereq_('animitter');\n\nvar _animitter2 = _interopRequireDefault(_animitter);\n\nvar _safeJsonStringify = _dereq_('safe-json-stringify');\n\nvar _safeJsonStringify2 = _interopRequireDefault(_safeJsonStringify);\n\nvar _userMedia = _dereq_('./userMedia');\n\nvar _userMedia2 = _interopRequireDefault(_userMedia);\n\nvar _events = _dereq_('./../../events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _constants = _dereq_('./../../constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _eventEmitter = _dereq_('./../../util/eventEmitter');\n\nvar _eventEmitter2 = _interopRequireDefault(_eventEmitter);\n\nvar _browser = _dereq_('./../../util/browser');\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _humanize = _dereq_('./../../util/humanize');\n\nvar _humanize2 = _interopRequireDefault(_humanize);\n\nvar _pretty = _dereq_('./../../util/pretty');\n\nvar _pretty2 = _interopRequireDefault(_pretty);\n\nvar _videomailError = _dereq_('./../../util/videomailError');\n\nvar _videomailError2 = _interopRequireDefault(_videomailError);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// credits http://1lineart.kulaone.com/#/\nvar PIPE_SYMBOL = '°º¤ø,¸¸,ø¤º°`°º¤ø,¸,ø¤°º¤ø,¸¸,ø¤º°`°º¤ø,¸ ';\n\nvar Recorder = function Recorder(visuals, replay, options) {\n  _eventEmitter2.default.call(this, options, 'Recorder');\n\n  // validate some options this class needs\n  if (!options || !options.video || !options.video.fps) {\n    throw _videomailError2.default.create('FPS must be defined', options);\n  }\n\n  var self = this;\n  var browser = new _browser2.default(options);\n  var debug = options.debug;\n\n  var loop = null;\n\n  var originalAnimationFrameObject;\n\n  var samplesCount = 0;\n  var framesCount = 0;\n\n  var recordingStats = {};\n\n  var confirmedFrameNumber = 0;\n  var confirmedSampleNumber = 0;\n\n  var recorderElement;\n  var userMedia;\n\n  var userMediaTimeout;\n  var retryTimeout;\n\n  var bytesSum;\n\n  var frameProgress;\n  var sampleProgress;\n\n  var canvas;\n  var ctx;\n\n  var userMediaLoaded;\n  var userMediaLoading;\n  var submitting;\n  var unloaded;\n  var stopTime;\n  var stream;\n  var connecting;\n  var connected;\n  var blocking;\n  var built;\n  var key;\n  var waitingTime;\n\n  var pingInterval;\n\n  var frame;\n\n  var recordingBufferLength;\n  var recordingBuffer;\n\n  function writeStream(buffer, opts) {\n    if (stream) {\n      if (stream.destroyed) {\n        // prevents https://github.com/binarykitchen/videomail.io/issues/393\n        stopPings();\n\n        self.emit(_events2.default.ERROR, _videomailError2.default.create('Already disconnected', 'Sorry, connection to the server has been destroyed. Please reload.', options));\n      } else {\n        var onFlushedCallback = opts && opts.onFlushedCallback;\n\n        try {\n          stream.write(buffer, function () {\n            onFlushedCallback && onFlushedCallback(opts);\n          });\n        } catch (exc) {\n          self.emit(_events2.default.ERROR, _videomailError2.default.create('Failed writing to server', 'stream.write() failed because of ' + (0, _pretty2.default)(exc), options));\n        }\n      }\n    }\n  }\n\n  function sendPings() {\n    pingInterval = window.setInterval(function () {\n      debug('Recorder: pinging...');\n      writeStream(Buffer.from(''));\n    }, options.timeouts.pingInterval);\n  }\n\n  function stopPings() {\n    clearInterval(pingInterval);\n  }\n\n  function onAudioSample(audioSample) {\n    samplesCount++;\n\n    var audioBuffer = audioSample.toBuffer();\n\n    // if (options.verbose) {\n    //     debug(\n    //         'Sample #' + samplesCount + ' (' + audioBuffer.length + ' bytes):'\n    //     )\n    // }\n\n    writeStream(audioBuffer);\n  }\n\n  function show() {\n    recorderElement && (0, _hidden2.default)(recorderElement, false);\n  }\n\n  function onUserMediaReady() {\n    try {\n      debug('Recorder: onUserMediaReady()');\n\n      userMediaLoading = blocking = unloaded = submitting = false;\n      userMediaLoaded = true;\n\n      loop = createLoop();\n\n      show();\n      self.emit(_events2.default.USER_MEDIA_READY, { paused: self.isPaused() });\n    } catch (exc) {\n      self.emit(_events2.default.ERROR, exc);\n    }\n  }\n\n  function clearRetryTimeout() {\n    debug('Recorder: clearRetryTimeout()');\n\n    retryTimeout && clearTimeout(retryTimeout);\n    retryTimeout = null;\n  }\n\n  function clearUserMediaTimeout() {\n    if (userMediaTimeout) {\n      debug('Recorder: clearUserMediaTimeout()');\n\n      userMediaTimeout && clearTimeout(userMediaTimeout);\n      userMediaTimeout = null;\n    }\n  }\n\n  function calculateFrameProgress() {\n    return (confirmedFrameNumber / (framesCount || 1) * 100).toFixed(2) + '%';\n  }\n\n  function calculateSampleProgress() {\n    return (confirmedSampleNumber / (samplesCount || 1) * 100).toFixed(2) + '%';\n  }\n\n  function updateOverallProgress() {\n    // when progresses aren't initialized,\n    // then do a first calculation to avoid `infinite` or `null` displays\n\n    if (!frameProgress) {\n      frameProgress = calculateFrameProgress();\n    }\n\n    if (!sampleProgress) {\n      sampleProgress = calculateSampleProgress();\n    }\n\n    self.emit(_events2.default.PROGRESS, frameProgress, sampleProgress);\n  }\n\n  function updateFrameProgress(args) {\n    confirmedFrameNumber = args.frame ? args.frame : confirmedFrameNumber;\n\n    frameProgress = calculateFrameProgress();\n\n    updateOverallProgress();\n  }\n\n  function updateSampleProgress(args) {\n    confirmedSampleNumber = args.sample ? args.sample : confirmedSampleNumber;\n\n    sampleProgress = calculateSampleProgress();\n\n    updateOverallProgress();\n  }\n\n  function preview(args) {\n    confirmedFrameNumber = confirmedSampleNumber = samplesCount = framesCount = 0;\n\n    sampleProgress = frameProgress = null;\n\n    key = args.key;\n\n    if (args.mp4) {\n      replay.setMp4Source(args.mp4 + _constants2.default.SITE_NAME_LABEL + '/' + options.siteName + '/videomail.mp4', true);\n    }\n\n    if (args.webm) {\n      replay.setWebMSource(args.webm + _constants2.default.SITE_NAME_LABEL + '/' + options.siteName + '/videomail.webm', true);\n    }\n\n    self.hide();\n\n    var width = self.getRecorderWidth(true);\n    var height = self.getRecorderHeight(true);\n\n    self.emit(_events2.default.PREVIEW, key, width, height);\n\n    // keep it for recording stats\n    waitingTime = Date.now() - stopTime;\n\n    recordingStats.waitingTime = waitingTime;\n\n    if (options.debug) {\n      debug('While recording, %s have been transferred and waiting time was %s', _humanize2.default.filesize(bytesSum, 2), _humanize2.default.toTime(waitingTime));\n    }\n  }\n\n  function initSocket(cb) {\n    if (!connected) {\n      connecting = true;\n\n      debug('Recorder: initialising web socket to %s', options.socketUrl);\n\n      self.emit(_events2.default.CONNECTING);\n\n      // https://github.com/maxogden/websocket-stream#binary-sockets\n\n      // we use query parameters here because we cannot set custom headers in web sockets,\n      // see https://github.com/websockets/ws/issues/467\n\n      var url2Connect = options.socketUrl + '?' + encodeURIComponent(_constants2.default.SITE_NAME_LABEL) + '=' + encodeURIComponent(options.siteName);\n\n      try {\n        // websocket options cannot be set on client side, only on server, see\n        // https://github.com/maxogden/websocket-stream/issues/116#issuecomment-296421077\n        stream = (0, _websocketStream2.default)(url2Connect, {\n          perMessageDeflate: false,\n          // see https://github.com/maxogden/websocket-stream/issues/117#issuecomment-298826011\n          objectMode: true\n        });\n      } catch (exc) {\n        connecting = connected = false;\n\n        var err;\n\n        if (typeof _websocketStream2.default === 'undefined') {\n          err = _videomailError2.default.create('There is no websocket', 'Cause: ' + (0, _pretty2.default)(exc), options);\n        } else {\n          err = _videomailError2.default.create('Failed to connect to server', 'Please upgrade your browser. Your current version does not seem to support websockets.', options, {\n            browserProblem: true\n          });\n        }\n\n        self.emit(_events2.default.ERROR, err);\n      }\n\n      if (stream) {\n        // // useful for debugging streams\n        //\n        // if (!stream.originalEmit) {\n        //   stream.originalEmit = stream.emit\n        // }\n        //\n        // stream.emit = function (type) {\n        //   if (stream) {\n        //     debug(PIPE_SYMBOL + 'Debugging stream event:', type)\n        //     var args = Array.prototype.slice.call(arguments, 0)\n        //     return stream.originalEmit.apply(stream, args)\n        //   }\n        // }\n\n        stream.on('close', function (err) {\n          debug(PIPE_SYMBOL + 'Stream has closed');\n\n          connecting = connected = false;\n\n          if (err) {\n            self.emit(_events2.default.ERROR, err || 'Unhandled websocket error');\n          } else {\n            self.emit(_events2.default.DISCONNECTED);\n\n            // prevents from https://github.com/binarykitchen/videomail.io/issues/297 happening\n            cancelAnimationFrame();\n          }\n        });\n\n        stream.on('connect', function () {\n          debug(PIPE_SYMBOL + 'Stream *connect* event emitted');\n\n          if (!connected) {\n            connected = true;\n            connecting = unloaded = false;\n\n            self.emit(_events2.default.CONNECTED);\n\n            debug('Going to ask for webcam permissons now ...');\n\n            cb && cb();\n          }\n        });\n\n        stream.on('data', function (data) {\n          debug(PIPE_SYMBOL + 'Stream *data* event emitted');\n\n          var command;\n\n          try {\n            command = JSON.parse(data.toString());\n          } catch (exc) {\n            debug('Failed to parse command:', exc);\n\n            self.emit(_events2.default.ERROR, _videomailError2.default.create('Invalid server command',\n            // toString() since https://github.com/binarykitchen/videomail.io/issues/288\n            'Contact us asap. Bad commmand was ' + data.toString() + '. ', options));\n          } finally {\n            executeCommand.call(self, command);\n          }\n        });\n\n        stream.on('error', function (err) {\n          debug(PIPE_SYMBOL + 'Stream *error* event emitted', err);\n\n          connecting = connected = false;\n\n          // setting custom text since that err object isn't really an error\n          // on iphones when locked, and unlocked, this err is actually\n          // an event object with stuff we can't use at all (an external bug)\n          self.emit(_events2.default.ERROR, _videomailError2.default.create('Connection error', 'Data exchange has been interrupted. Please reload.', options));\n        });\n\n        // just experimental\n\n        stream.on('drain', function () {\n          debug(PIPE_SYMBOL + 'Stream *drain* event emitted (should not happen!)');\n        });\n\n        stream.on('preend', function () {\n          debug(PIPE_SYMBOL + 'Stream *preend* event emitted');\n        });\n\n        stream.on('end', function () {\n          debug(PIPE_SYMBOL + 'Stream *end* event emitted');\n        });\n\n        stream.on('drain', function () {\n          debug(PIPE_SYMBOL + 'Stream *drain* event emitted');\n        });\n\n        stream.on('pipe', function () {\n          debug(PIPE_SYMBOL + 'Stream *pipe* event emitted');\n        });\n\n        stream.on('unpipe', function () {\n          debug(PIPE_SYMBOL + 'Stream *unpipe* event emitted');\n        });\n\n        stream.on('resume', function () {\n          debug(PIPE_SYMBOL + 'Stream *resume* event emitted');\n        });\n\n        stream.on('uncork', function () {\n          debug(PIPE_SYMBOL + 'Stream *uncork* event emitted');\n        });\n\n        stream.on('readable', function () {\n          debug(PIPE_SYMBOL + 'Stream *preend* event emitted');\n        });\n\n        stream.on('prefinish', function () {\n          debug(PIPE_SYMBOL + 'Stream *preend* event emitted');\n        });\n\n        stream.on('finish', function () {\n          debug(PIPE_SYMBOL + 'Stream *preend* event emitted');\n        });\n      }\n    }\n  }\n\n  function showUserMedia() {\n    // use connected flag to prevent this from happening\n    // https://github.com/binarykitchen/videomail.io/issues/323\n    return connected && (isNotifying() || !isHidden() || blocking);\n  }\n\n  function userMediaErrorCallback(err) {\n    userMediaLoading = false;\n    clearUserMediaTimeout();\n\n    debug('Recorder: userMediaErrorCallback()', ', Webcam characteristics:', userMedia.getCharacteristics());\n\n    var errorListeners = self.listeners(_events2.default.ERROR);\n\n    if (errorListeners.length) {\n      if (err.name !== _videomailError2.default.MEDIA_DEVICE_NOT_SUPPORTED) {\n        self.emit(_events2.default.ERROR, _videomailError2.default.create(err, options));\n      } else {\n        // do not emit but retry since MEDIA_DEVICE_NOT_SUPPORTED can be a race condition\n        debug('Recorder: ignore user media error', err);\n      }\n\n      // retry after a while\n      retryTimeout = setTimeout(initSocket, options.timeouts.userMedia);\n    } else {\n      if (unloaded) {\n        // can happen that container is unloaded but some user media related callbacks\n        // are still in process. in that case ignore error.\n        debug('Recorder: already unloaded. Not going to throw error', err);\n      } else {\n        debug('Recorder: no error listeners attached but throwing error', err);\n\n        // weird situation, throw it instead of emitting since there are no error listeners\n        throw _videomailError2.default.create(err, 'Unable to process this error since there are no error listeners anymore.', options);\n      }\n    }\n  }\n\n  function getUserMediaCallback(localStream) {\n    debug('Recorder: getUserMediaCallback()');\n\n    if (showUserMedia()) {\n      try {\n        clearUserMediaTimeout();\n\n        userMedia.init(localStream, onUserMediaReady.bind(self), onAudioSample.bind(self), function (err) {\n          self.emit(_events2.default.ERROR, err);\n        });\n      } catch (exc) {\n        self.emit(_events2.default.ERROR, exc);\n      }\n    }\n  }\n\n  function loadGenuineUserMedia() {\n    if (!navigator) {\n      throw new Error('Navigator is missing!');\n    }\n\n    debug('Recorder: loadGenuineUserMedia()');\n\n    self.emit(_events2.default.ASKING_WEBCAM_PERMISSION);\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      // prefer the front camera (if one is available) over the rear one\n      var constraints = {\n        video: {\n          facingMode: 'user',\n          frameRate: { ideal: options.video.fps }\n        },\n        audio: options.isAudioEnabled()\n      };\n\n      if (browser.isOkSafari()) {\n        // do not use those width/height constraints yet,\n        // current safari would throw an error\n        // todo in https://github.com/binarykitchen/videomail-client/issues/142\n\n      } else {\n        if (options.hasDefinedWidth()) {\n          constraints.video.width = { ideal: options.video.width };\n        } else {\n          // otherwise try to apply the same width as the element is having\n          // but there is no 100% guarantee that this will happen. not\n          // all webcam drivers behave the same way\n          constraints.video.width = { ideal: self.limitWidth() };\n        }\n\n        if (options.hasDefinedHeight()) {\n          constraints.video.height = { ideal: options.video.height };\n        }\n      }\n\n      debug('Recorder: navigator.mediaDevices.getUserMedia()', constraints);\n\n      navigator.mediaDevices.getUserMedia(constraints).then(getUserMediaCallback).catch(userMediaErrorCallback);\n    } else {\n      debug('Recorder: navigator.getUserMedia()');\n\n      navigator.getUserMedia_({\n        video: true,\n        audio: options.isAudioEnabled()\n      }, getUserMediaCallback, userMediaErrorCallback);\n    }\n  }\n\n  function loadUserMedia() {\n    if (userMediaLoaded) {\n      debug('Recorder: skipping loadUserMedia() because it is already loaded');\n      onUserMediaReady();\n      return false;\n    } else if (userMediaLoading) {\n      debug('Recorder: skipping loadUserMedia() because it is already asking for permission');\n      return false;\n    }\n\n    debug('Recorder: loadUserMedia()');\n\n    self.emit(_events2.default.LOADING_USER_MEDIA);\n\n    try {\n      userMediaTimeout = setTimeout(function () {\n        if (!self.isReady()) {\n          self.emit(_events2.default.ERROR, browser.getNoAccessIssue());\n        }\n      }, options.timeouts.userMedia);\n\n      userMediaLoading = true;\n\n      loadGenuineUserMedia();\n    } catch (exc) {\n      debug('Recorder: failed to load genuine user media');\n\n      userMediaLoading = false;\n\n      var errorListeners = self.listeners(_events2.default.ERROR);\n\n      if (errorListeners.length) {\n        self.emit(_events2.default.ERROR, exc);\n      } else {\n        debug('Recorder: no error listeners attached but throwing exception', exc);\n        throw exc; // throw it further\n      }\n    }\n  }\n\n  function executeCommand(command) {\n    try {\n      debug('Server commanded: %s', command.command, command.args ? ', ' + (0, _safeJsonStringify2.default)(command.args) : '');\n\n      switch (command.command) {\n        case 'ready':\n          if (!userMediaTimeout) {\n            loadUserMedia();\n          }\n          break;\n        case 'preview':\n          preview(command.args);\n          break;\n        case 'error':\n          this.emit(_events2.default.ERROR, _videomailError2.default.create('Oh no, server error!', command.args.err.toString() || '(No explanation given)', options));\n          break;\n        case 'confirmFrame':\n          updateFrameProgress(command.args);\n          break;\n        case 'confirmSample':\n          updateSampleProgress(command.args);\n          break;\n        case 'beginAudioEncoding':\n          this.emit(_events2.default.BEGIN_AUDIO_ENCODING);\n          break;\n        case 'beginVideoEncoding':\n          this.emit(_events2.default.BEGIN_VIDEO_ENCODING);\n          break;\n        default:\n          this.emit(_events2.default.ERROR, 'Unknown server command: ' + command.command);\n          break;\n      }\n    } catch (exc) {\n      self.emit(_events2.default.ERROR, exc);\n    }\n  }\n\n  function isNotifying() {\n    return visuals.isNotifying();\n  }\n\n  function isHidden() {\n    return !recorderElement || (0, _hidden2.default)(recorderElement);\n  }\n\n  function writeCommand(command, args, cb) {\n    if (!cb && args && args.constructor === Function) {\n      cb = args;\n      args = null;\n    }\n\n    if (!connected) {\n      debug('Reconnecting for the command', command, '…');\n\n      initSocket(function () {\n        writeCommand(command, args);\n        cb && cb();\n      });\n    } else if (stream) {\n      debug('$ %s', command, args ? (0, _safeJsonStringify2.default)(args) : '');\n\n      var commandObj = {\n        command: command,\n        args: args\n\n        // todo commented out because for some reasons server does not accept such a long\n        // array of many log lines. to examine later.\n        //\n        // add some useful debug info to examine weird stuff like this one\n        // UnprocessableError: Unable to encode a video with FPS near zero.\n        // todo consider removing this later or have it for debug=1 only?\n        //\n        // if (options.logger && options.logger.getLines) {\n        //   commandObj.logLines = options.logger.getLines()\n        // }\n\n      };writeStream(Buffer.from((0, _safeJsonStringify2.default)(commandObj)));\n\n      if (cb) {\n        // keep all callbacks async\n        setTimeout(function () {\n          cb();\n        }, 0);\n      }\n    }\n  }\n\n  function disconnect() {\n    if (connected) {\n      debug('Recorder: disconnect()');\n\n      if (userMedia) {\n        // prevents https://github.com/binarykitchen/videomail-client/issues/114\n        userMedia.unloadRemainingEventListeners();\n      }\n\n      if (submitting) {\n        // server will disconnect socket automatically after submitting\n        connecting = connected = false;\n      } else if (stream) {\n        // force to disconnect socket right now to clean temp files on server\n        // event listeners will do the rest\n        stream.end();\n        stream = undefined;\n      }\n    }\n  }\n\n  function cancelAnimationFrame() {\n    loop && loop.dispose();\n  }\n\n  function getIntervalSum() {\n    return loop.getElapsedTime();\n  }\n\n  function getAvgInterval() {\n    return getIntervalSum() / framesCount;\n  }\n\n  this.getRecordingStats = function () {\n    return recordingStats;\n  };\n\n  this.getAudioSampleRate = function () {\n    return userMedia.getAudioSampleRate();\n  };\n\n  this.stop = function (params) {\n    debug('stop()', params);\n\n    var limitReached = params.limitReached;\n\n    this.emit(_events2.default.STOPPING, limitReached);\n\n    loop.complete();\n\n    stopTime = Date.now();\n\n    recordingStats = {\n      avgFps: loop.getFPS(),\n      wantedFps: options.video.fps,\n      avgInterval: getAvgInterval(),\n      wantedInterval: 1e3 / options.video.fps,\n\n      intervalSum: getIntervalSum(),\n      framesCount: framesCount,\n      videoType: replay.getVideoType()\n    };\n\n    if (options.isAudioEnabled()) {\n      recordingStats.samplesCount = samplesCount;\n      recordingStats.sampleRate = userMedia.getAudioSampleRate();\n    }\n\n    writeCommand('stop', recordingStats);\n\n    // beware, resetting will set framesCount to zero, so leave this here\n    this.reset();\n  };\n\n  this.back = function (cb) {\n    this.emit(_events2.default.GOING_BACK);\n\n    show();\n    this.reset();\n\n    writeCommand('back', cb);\n  };\n\n  function reInitialiseAudio() {\n    debug('Recorder: reInitialiseAudio()');\n\n    clearUserMediaTimeout();\n\n    // important to free memory\n    userMedia && userMedia.stop();\n\n    userMediaLoaded = key = canvas = ctx = null;\n\n    loadUserMedia();\n  }\n\n  this.unload = function (e) {\n    if (!unloaded) {\n      var cause;\n\n      if (e) {\n        cause = e.name || e.statusText || e.toString();\n      }\n\n      debug('Recorder: unload()' + (cause ? ', cause: ' + cause : ''));\n\n      this.reset();\n\n      clearUserMediaTimeout();\n\n      disconnect();\n\n      unloaded = true;\n\n      built = false;\n    }\n  };\n\n  this.reset = function () {\n    // no need to reset when already unloaded\n    if (!unloaded) {\n      debug('Recorder: reset()');\n\n      this.emit(_events2.default.RESETTING);\n\n      cancelAnimationFrame();\n\n      // important to free memory\n      userMedia && userMedia.stop();\n\n      replay.reset();\n\n      userMediaLoaded = key = canvas = ctx = waitingTime = null;\n    }\n  };\n\n  this.validate = function () {\n    return connected && framesCount > 0 && canvas === null;\n  };\n\n  this.isReady = function () {\n    return userMedia.isReady();\n  };\n\n  this.pause = function (params) {\n    var e = params && params.event;\n\n    if (e instanceof window.Event) {\n      params.eventType = e.type;\n    }\n\n    debug('pause()', params);\n\n    userMedia.pause();\n    loop.stop();\n\n    this.emit(_events2.default.PAUSED);\n\n    sendPings();\n  };\n\n  this.isPaused = function () {\n    return userMedia && userMedia.isPaused();\n  };\n\n  this.resume = function () {\n    debug('Recorder: resume()');\n\n    stopPings();\n\n    this.emit(_events2.default.RESUMING);\n\n    userMedia.resume();\n    loop.start();\n  };\n\n  function onFlushed(opts) {\n    var frameNumber = opts && opts.frameNumber;\n\n    if (frameNumber === 1) {\n      self.emit(_events2.default.FIRST_FRAME_SENT);\n    }\n  }\n\n  function createLoop() {\n    var newLoop = (0, _animitter2.default)({ fps: options.video.fps }, draw);\n\n    // remember it first\n    originalAnimationFrameObject = newLoop.getRequestAnimationFrameObject();\n\n    return newLoop;\n  }\n\n  function draw(deltaTime, elapsedTime) {\n    try {\n      // ctx and stream might become null while unloading\n      if (!self.isPaused() && stream && ctx) {\n        if (framesCount === 0) {\n          self.emit(_events2.default.SENDING_FIRST_FRAME);\n        }\n\n        framesCount++;\n\n        ctx.drawImage(userMedia.getRawVisuals(), 0, 0, canvas.width, canvas.height);\n\n        recordingBuffer = frame.toBuffer();\n        recordingBufferLength = recordingBuffer.length;\n\n        if (recordingBufferLength < 1) {\n          throw _videomailError2.default.create('Failed to extract webcam data.', options);\n        }\n\n        bytesSum += recordingBufferLength;\n\n        writeStream(recordingBuffer, {\n          frameNumber: framesCount,\n          onFlushedCallback: onFlushed\n        });\n\n        // if (options.verbose) {\n        //   debug(\n        //     'Frame #' + framesCount + ' (' + recordingBufferLength + ' bytes):',\n        //     ' delta=' + deltaTime + 'ms, ' +\n        //     ' elapsed=' + elapsedTime + 'ms'\n        //   )\n        // }\n\n        visuals.checkTimer({ intervalSum: elapsedTime });\n      }\n    } catch (exc) {\n      self.emit(_events2.default.ERROR, exc);\n    }\n  }\n\n  this.record = function () {\n    if (unloaded) {\n      return false;\n    }\n\n    // reconnect when needed\n    if (!connected) {\n      debug('Recorder: reconnecting before recording ...');\n\n      initSocket(function () {\n        self.once(_events2.default.USER_MEDIA_READY, self.record);\n      });\n\n      return false;\n    }\n\n    try {\n      canvas = userMedia.createCanvas();\n    } catch (exc) {\n      self.emit(_events2.default.ERROR, _videomailError2.default.create('Failed to create canvas.', exc, options));\n\n      return false;\n    }\n\n    ctx = canvas.getContext('2d');\n\n    if (!canvas.width) {\n      self.emit(_events2.default.ERROR, _videomailError2.default.create('Canvas has an invalid width.', options));\n\n      return false;\n    }\n\n    if (!canvas.height) {\n      self.emit(_events2.default.ERROR, _videomailError2.default.create('Canvas has an invalid height.', options));\n\n      return false;\n    }\n\n    bytesSum = 0;\n\n    frame = new _canvasToBuffer2.default(canvas, options);\n\n    debug('Recorder: record()');\n    userMedia.record();\n\n    self.emit(_events2.default.RECORDING, framesCount);\n\n    loop.start();\n  };\n\n  function setAnimationFrameObject(newObj) {\n    // must stop and then start to make it become effective, see\n    // https://github.com/hapticdata/animitter/issues/5#issuecomment-292019168\n    if (loop) {\n      var isRecording = self.isRecording();\n\n      loop.stop();\n      loop.setRequestAnimationFrameObject(newObj);\n\n      if (isRecording) {\n        loop.start();\n      }\n    }\n  }\n\n  function restoreAnimationFrameObject() {\n    debug('Recorder: restoreAnimationFrameObject()');\n\n    setAnimationFrameObject(originalAnimationFrameObject);\n  }\n\n  function loopWithTimeouts() {\n    debug('Recorder: loopWithTimeouts()');\n\n    var wantedInterval = 1e3 / options.video.fps;\n\n    var processingTime = 0;\n    var start;\n\n    function raf(fn) {\n      return setTimeout(function () {\n        start = Date.now();\n        fn();\n        processingTime = Date.now() - start;\n      },\n      // reducing wanted interval by respecting the time it takes to\n      // compute internally since this is not multi-threaded like\n      // requestAnimationFrame\n      wantedInterval - processingTime);\n    }\n\n    function cancel(id) {\n      clearTimeout(id);\n    }\n\n    setAnimationFrameObject({\n      requestAnimationFrame: raf,\n      cancelAnimationFrame: cancel\n    });\n  }\n\n  function buildElement() {\n    recorderElement = (0, _hyperscript2.default)('video.' + options.selectors.userMediaClass);\n    visuals.appendChild(recorderElement);\n  }\n\n  function correctDimensions() {\n    if (options.hasDefinedWidth()) {\n      recorderElement.width = self.getRecorderWidth(true);\n    }\n\n    if (options.hasDefinedHeight()) {\n      recorderElement.height = self.getRecorderHeight(true);\n    }\n  }\n\n  function initEvents() {\n    debug('Recorder: initEvents()');\n\n    self.on(_events2.default.SUBMITTING, function () {\n      submitting = true;\n    }).on(_events2.default.SUBMITTED, function () {\n      submitting = false;\n      self.unload();\n    }).on(_events2.default.BLOCKING, function () {\n      blocking = true;\n      clearUserMediaTimeout();\n    }).on(_events2.default.HIDE, function () {\n      self.hide();\n    }).on(_events2.default.LOADED_META_DATA, function () {\n      correctDimensions();\n    }).on(_events2.default.DISABLING_AUDIO, function () {\n      reInitialiseAudio();\n    }).on(_events2.default.ENABLING_AUDIO, function () {\n      reInitialiseAudio();\n    }).on(_events2.default.INVISIBLE, function () {\n      loopWithTimeouts();\n    }).on(_events2.default.VISIBLE, function () {\n      restoreAnimationFrameObject();\n    });\n  }\n\n  this.build = function () {\n    var err = browser.checkRecordingCapabilities();\n\n    if (!err) {\n      err = browser.checkBufferTypes();\n    }\n\n    if (err) {\n      this.emit(_events2.default.ERROR, err);\n    } else {\n      recorderElement = visuals.querySelector('video.' + options.selectors.userMediaClass);\n\n      if (!recorderElement) {\n        buildElement();\n      }\n\n      correctDimensions();\n\n      // prevent audio feedback, see\n      // https://github.com/binarykitchen/videomail-client/issues/35\n      recorderElement.muted = true;\n\n      // for iphones, see https://github.com/webrtc/samples/issues/929\n      recorderElement.setAttribute('playsinline', true);\n      recorderElement.setAttribute('webkit-playsinline', 'webkit-playsinline');\n\n      if (!userMedia) {\n        userMedia = new _userMedia2.default(this, options);\n      }\n\n      show();\n\n      if (!built) {\n        initEvents();\n\n        if (!connected) {\n          initSocket();\n        } else {\n          loadUserMedia();\n        }\n      } else {\n        loadUserMedia();\n      }\n\n      built = true;\n    }\n  };\n\n  this.isPaused = function () {\n    return userMedia && userMedia.isPaused() && !loop.isRunning();\n  };\n\n  this.isRecording = function () {\n    // checking for stream.destroyed needed since\n    // https://github.com/binarykitchen/videomail.io/issues/296\n    return loop && loop.isRunning() && !this.isPaused() && !isNotifying() && stream && !stream.destroyed;\n  };\n\n  this.hide = function () {\n    if (!isHidden()) {\n      recorderElement && (0, _hidden2.default)(recorderElement, true);\n\n      clearUserMediaTimeout();\n      clearRetryTimeout();\n    }\n  };\n\n  this.isUnloaded = function () {\n    return unloaded;\n  };\n\n  // these two return the true dimensions of the webcam area.\n  // needed because on mobiles they might be different.\n\n  this.getRecorderWidth = function (responsive) {\n    if (userMedia && userMedia.hasVideoWidth()) {\n      return userMedia.getRawWidth(responsive);\n    } else if (responsive && options.hasDefinedWidth()) {\n      return this.limitWidth(options.video.width);\n    }\n  };\n\n  this.getRecorderHeight = function (responsive) {\n    if (userMedia) {\n      return userMedia.getRawHeight(responsive);\n    } else if (responsive && options.hasDefinedHeight()) {\n      return this.calculateHeight(responsive);\n    }\n  };\n\n  function getRatio() {\n    var ratio;\n\n    if (userMedia) {\n      var userMediaVideoWidth = userMedia.getVideoWidth();\n\n      // avoid division by zero\n      if (userMediaVideoWidth < 1) {\n        // use as a last resort fallback computation (needed for safari 11)\n        ratio = visuals.getRatio();\n      } else {\n        ratio = userMedia.getVideoHeight() / userMediaVideoWidth;\n      }\n    } else {\n      ratio = options.getRatio();\n    }\n\n    return ratio;\n  }\n\n  this.calculateWidth = function (responsive) {\n    var videoHeight;\n\n    if (userMedia) {\n      videoHeight = userMedia.getVideoHeight();\n    } else if (recorderElement) {\n      videoHeight = recorderElement.videoHeight || recorderElement.height;\n    }\n\n    return visuals.calculateWidth({\n      responsive: responsive,\n      ratio: getRatio(),\n      videoHeight: videoHeight\n    });\n  };\n\n  this.calculateHeight = function (responsive) {\n    var videoWidth;\n\n    if (userMedia) {\n      videoWidth = userMedia.getVideoWidth();\n    } else if (recorderElement) {\n      videoWidth = recorderElement.videoWidth || recorderElement.width;\n    }\n\n    return visuals.calculateHeight({\n      responsive: responsive,\n      ratio: getRatio(),\n      videoWidth: videoWidth\n    });\n  };\n\n  this.getRawVisualUserMedia = function () {\n    return recorderElement;\n  };\n\n  this.isConnected = function () {\n    return connected;\n  };\n\n  this.isConnecting = function () {\n    return connecting;\n  };\n\n  this.limitWidth = function (width) {\n    return visuals.limitWidth(width);\n  };\n\n  this.limitHeight = function (height) {\n    return visuals.limitHeight(height);\n  };\n\n  this.isUserMediaLoaded = function () {\n    return userMediaLoaded;\n  };\n};\n\n_util2.default.inherits(Recorder, _eventEmitter2.default);\n\nexports.default = Recorder;\n\n}).call(this,_dereq_(\"buffer\").Buffer)\n},{\"./../../constants\":87,\"./../../events\":88,\"./../../util/browser\":93,\"./../../util/eventEmitter\":95,\"./../../util/humanize\":96,\"./../../util/pretty\":98,\"./../../util/videomailError\":100,\"./userMedia\":115,\"animitter\":2,\"buffer\":8,\"canvas-to-buffer\":9,\"hidden\":31,\"hyperscript\":33,\"safe-json-stringify\":67,\"util\":80,\"websocket-stream\":82}],114:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _util = _dereq_('util');\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _hyperscript = _dereq_('hyperscript');\n\nvar _hyperscript2 = _interopRequireDefault(_hyperscript);\n\nvar _hidden = _dereq_('hidden');\n\nvar _hidden2 = _interopRequireDefault(_hidden);\n\nvar _addEventlistenerWithOptions = _dereq_('add-eventlistener-with-options');\n\nvar _addEventlistenerWithOptions2 = _interopRequireDefault(_addEventlistenerWithOptions);\n\nvar _events = _dereq_('./../../events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _browser = _dereq_('./../../util/browser');\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _eventEmitter = _dereq_('./../../util/eventEmitter');\n\nvar _eventEmitter2 = _interopRequireDefault(_eventEmitter);\n\nvar _videomailError = _dereq_('./../../util/videomailError');\n\nvar _videomailError2 = _interopRequireDefault(_videomailError);\n\nvar _iphoneInlineVideo = _dereq_('iphone-inline-video');\n\nvar _iphoneInlineVideo2 = _interopRequireDefault(_iphoneInlineVideo);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Replay = function Replay(parentElement, options) {\n  _eventEmitter2.default.call(this, options, 'Replay');\n\n  var self = this;\n  var browser = new _browser2.default(options);\n  var debug = options.debug;\n\n  var built;\n  var replayElement;\n  var videomail;\n\n  function buildElement() {\n    debug('Replay: buildElement()');\n\n    replayElement = (0, _hyperscript2.default)('video.' + options.selectors.replayClass);\n\n    if (!replayElement.setAttribute) {\n      throw _videomailError2.default.create('Please upgrade browser', options);\n    }\n\n    parentElement.appendChild(replayElement);\n  }\n\n  function isStandalone() {\n    return parentElement.constructor.name === 'HTMLDivElement';\n  }\n\n  function copyAttributes(newVideomail) {\n    var attributeContainer;\n\n    Object.keys(newVideomail).forEach(function (attribute) {\n      attributeContainer = parentElement.querySelector('.' + attribute);\n\n      if (attributeContainer) {\n        attributeContainer.innerHTML = newVideomail[attribute];\n      }\n    });\n  }\n\n  function correctDimensions(options) {\n    var width, height;\n\n    if (videomail && videomail.playerWidth) {\n      width = videomail.playerWidth;\n    } else if (parentElement.calculateWidth) {\n      width = parentElement.calculateWidth(options);\n    }\n\n    if (videomail && videomail.playerHeight) {\n      height = videomail.playerHeight;\n    } else if (parentElement.calculateHeight) {\n      height = parentElement.calculateHeight(options);\n    }\n\n    if (width > 0) {\n      replayElement.style.width = width + 'px';\n    } else {\n      replayElement.style.width = 'auto';\n    }\n\n    if (height > 0) {\n      replayElement.style.height = height + 'px';\n    } else {\n      replayElement.style.height = 'auto';\n    }\n  }\n\n  this.setVideomail = function (newVideomail) {\n    videomail = newVideomail;\n\n    if (videomail) {\n      if (videomail.webm) {\n        this.setWebMSource(videomail.webm);\n      }\n\n      if (videomail.mp4) {\n        this.setMp4Source(videomail.mp4);\n      }\n\n      if (videomail.poster) {\n        replayElement.setAttribute('poster', videomail.poster);\n      }\n\n      copyAttributes(videomail);\n    }\n\n    var hasAudio = videomail && videomail.recordingStats && videomail.recordingStats.sampleRate > 0;\n\n    this.show(videomail && videomail.width, videomail && videomail.height, hasAudio);\n  };\n\n  this.show = function (recorderWidth, recorderHeight, hasAudio) {\n    if (videomail) {\n      correctDimensions({\n        responsive: true,\n        // beware that recorderWidth and recorderHeight can be null sometimes\n        videoWidth: recorderWidth || replayElement.videoWidth,\n        videoHeight: recorderHeight || replayElement.videoHeight\n      });\n    }\n\n    (0, _hidden2.default)(replayElement, false);\n\n    // parent element can be any object, be careful!\n    if (parentElement) {\n      if (parentElement.style) {\n        (0, _hidden2.default)(parentElement, false);\n      } else if (parentElement.show) {\n        parentElement.show();\n      }\n    }\n\n    if (hasAudio) {\n      // https://github.com/binarykitchen/videomail-client/issues/115\n      // do not set mute to false as this will mess up. just do not mention this attribute at all\n      replayElement.setAttribute('volume', 1);\n    } else if (!options.isAudioEnabled()) {\n      replayElement.setAttribute('muted', true);\n    }\n\n    // this must be called after setting the sources and when becoming visible\n    // see https://github.com/bfred-it/iphone-inline-video/issues/16\n    _iphoneInlineVideo2.default && (0, _iphoneInlineVideo2.default)(replayElement, {\n      iPad: true\n    });\n\n    // this forces to actually fetch the videos from the server\n    replayElement.load();\n\n    if (!videomail) {\n      self.emit(_events2.default.PREVIEW_SHOWN);\n    } else {\n      self.emit(_events2.default.REPLAY_SHOWN);\n    }\n  };\n\n  this.build = function () {\n    debug('Replay: build()');\n\n    replayElement = parentElement.querySelector('video.' + options.selectors.replayClass);\n\n    if (!replayElement) {\n      buildElement();\n    }\n\n    this.hide();\n\n    replayElement.setAttribute('autoplay', true);\n    replayElement.setAttribute('autostart', true);\n    replayElement.setAttribute('autobuffer', true);\n    replayElement.setAttribute('playsinline', true);\n    replayElement.setAttribute('webkit-playsinline', 'webkit-playsinline');\n    replayElement.setAttribute('controls', 'controls');\n    replayElement.setAttribute('preload', 'auto');\n\n    if (!built) {\n      if (!isStandalone()) {\n        this.on(_events2.default.PREVIEW, function (key, recorderWidth, recorderHeight) {\n          self.show(recorderWidth, recorderHeight);\n        });\n      }\n\n      // makes use of passive option automatically for better performance\n      // https://www.npmjs.com/package/add-eventlistener-with-options\n      (0, _addEventlistenerWithOptions2.default)(replayElement, 'touchstart', function (e) {\n        try {\n          e && e.preventDefault();\n        } catch (exc) {\n          // ignore errors like\n          // Unable to preventDefault inside passive event listener invocation.\n        }\n\n        if (this.paused) {\n          play();\n        } else {\n          pause();\n        }\n      });\n\n      replayElement.onclick = function (e) {\n        e && e.preventDefault();\n\n        if (this.paused) {\n          play();\n        } else {\n          pause();\n        }\n      };\n    }\n\n    built = true;\n\n    debug('Replay: built.');\n  };\n\n  this.unload = function () {\n    built = false;\n  };\n\n  this.getVideoSource = function (type) {\n    var sources = replayElement.getElementsByTagName('source');\n    var l = sources.length;\n    var videoType = 'video/' + type;\n\n    var source;\n\n    if (l) {\n      var i;\n\n      for (i = 0; i < l && !source; i++) {\n        if (sources[i].getAttribute('type') === videoType) {\n          source = sources[i];\n        }\n      }\n    }\n\n    return source;\n  };\n\n  function setVideoSource(type, src, bustCache) {\n    var source = self.getVideoSource(type);\n\n    if (src && bustCache) {\n      src += '?' + Date.now();\n    }\n\n    if (!source) {\n      if (src) {\n        source = (0, _hyperscript2.default)('source', {\n          src: src,\n          type: 'video/' + type\n        });\n\n        replayElement.appendChild(source);\n      }\n    } else {\n      if (src) {\n        source.setAttribute('src', src);\n      } else {\n        replayElement.removeChild(source);\n      }\n    }\n  }\n\n  this.setMp4Source = function (src, bustCache) {\n    setVideoSource('mp4', src, bustCache);\n  };\n\n  this.setWebMSource = function (src, bustCache) {\n    setVideoSource('webm', src, bustCache);\n  };\n\n  this.getVideoType = function () {\n    return browser.getVideoType(replayElement);\n  };\n\n  function pause(cb) {\n    // avoids race condition, inspired by\n    // http://stackoverflow.com/questions/36803176/how-to-prevent-the-play-request-was-interrupted-by-a-call-to-pause-error\n    setTimeout(function () {\n      try {\n        replayElement.pause();\n      } catch (exc) {\n        // just ignore, see https://github.com/binarykitchen/videomail.io/issues/386\n        options.logger.warn(exc);\n      }\n\n      cb && cb();\n    }, 15);\n  }\n\n  function play() {\n    if (replayElement && replayElement.play) {\n      var p;\n\n      try {\n        p = replayElement.play();\n      } catch (exc) {\n        // this in the hope to catch InvalidStateError, see\n        // https://github.com/binarykitchen/videomail-client/issues/149\n        options.logger.warn('Caught replay exception:', exc);\n      }\n\n      if (p && typeof Promise !== 'undefined' && p instanceof Promise) {\n        p.catch(function (reason) {\n          options.logger.warn('Caught pending replay promise exception: %s', reason);\n        });\n      }\n    }\n  }\n\n  this.reset = function (cb) {\n    // pause video to make sure it won't consume any memory\n    pause(function () {\n      if (replayElement) {\n        self.setMp4Source(null);\n        self.setWebMSource(null);\n      }\n\n      cb && cb();\n    });\n  };\n\n  this.hide = function () {\n    if (isStandalone()) {\n      (0, _hidden2.default)(parentElement, true);\n    } else {\n      replayElement && (0, _hidden2.default)(replayElement, true);\n    }\n  };\n\n  this.isShown = function () {\n    return replayElement && !(0, _hidden2.default)(replayElement);\n  };\n\n  this.getParentElement = function () {\n    return parentElement;\n  };\n};\n\n_util2.default.inherits(Replay, _eventEmitter2.default);\n\nexports.default = Replay;\n\n},{\"./../../events\":88,\"./../../util/browser\":93,\"./../../util/eventEmitter\":95,\"./../../util/videomailError\":100,\"add-eventlistener-with-options\":1,\"hidden\":31,\"hyperscript\":33,\"iphone-inline-video\":39,\"util\":80}],115:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (recorder, options) {\n  _eventEmitter2.default.call(this, options, 'UserMedia');\n\n  var rawVisualUserMedia = recorder && recorder.getRawVisualUserMedia();\n  var browser = new _browser2.default(options);\n  var self = this;\n\n  var paused = false;\n  var record = false;\n\n  var audioRecorder;\n  var currentVisualStream;\n\n  function attachMediaStream(stream) {\n    currentVisualStream = stream;\n\n    if (typeof rawVisualUserMedia.srcObject !== 'undefined') {\n      rawVisualUserMedia.srcObject = stream;\n    } else if (typeof rawVisualUserMedia.src !== 'undefined') {\n      var URL = window.URL || window.webkitURL;\n      rawVisualUserMedia.src = URL.createObjectURL(stream) || stream;\n    } else {\n      throw _videomailError2.default.create('Error attaching stream to element.', 'Contact the developer about this', options);\n    }\n  }\n\n  function setVisualStream(localMediaStream) {\n    if (localMediaStream) {\n      attachMediaStream(localMediaStream);\n    } else {\n      rawVisualUserMedia.removeAttribute('srcObject');\n      rawVisualUserMedia.removeAttribute('src');\n\n      currentVisualStream = null;\n    }\n  }\n\n  function getVisualStream() {\n    if (rawVisualUserMedia.mozSrcObject) {\n      return rawVisualUserMedia.mozSrcObject;\n    } else if (rawVisualUserMedia.srcObject) {\n      return rawVisualUserMedia.srcObject;\n    } else {\n      return currentVisualStream;\n    }\n  }\n\n  function hasEnded() {\n    if (rawVisualUserMedia.ended) {\n      return rawVisualUserMedia.ended;\n    } else {\n      var visualStream = getVisualStream();\n      return visualStream && visualStream.ended;\n    }\n  }\n\n  function hasInvalidDimensions() {\n    if (rawVisualUserMedia.videoWidth && rawVisualUserMedia.videoWidth < 3 || rawVisualUserMedia.height && rawVisualUserMedia.height < 3) {\n      return true;\n    }\n  }\n\n  function getTracks(localMediaStream) {\n    var tracks;\n\n    if (localMediaStream && localMediaStream.getTracks) {\n      tracks = localMediaStream.getTracks();\n    }\n\n    return tracks;\n  }\n\n  function getVideoTracks(localMediaStream) {\n    var videoTracks;\n\n    if (localMediaStream && localMediaStream.getVideoTracks) {\n      videoTracks = localMediaStream.getVideoTracks();\n    }\n\n    return videoTracks;\n  }\n\n  function getFirstVideoTrack(localMediaStream) {\n    var videoTracks = getVideoTracks(localMediaStream);\n    var videoTrack;\n\n    if (videoTracks && videoTracks[0]) {\n      videoTrack = videoTracks[0];\n    }\n\n    return videoTrack;\n  }\n\n  function logEvent(event, params) {\n    options.debug('UserMedia: ...', EVENT_ASCII, 'event', event, (0, _safeJsonStringify2.default)(params));\n  }\n\n  function isPromise(anything) {\n    return anything && typeof Promise !== 'undefined' && anything instanceof Promise;\n  }\n\n  function outputEvent(e) {\n    logEvent(e.type, { readyState: rawVisualUserMedia.readyState });\n\n    // remove myself\n    rawVisualUserMedia.removeEventListener && rawVisualUserMedia.removeEventListener(e.type, outputEvent);\n  }\n\n  this.unloadRemainingEventListeners = function () {\n    options.debug('UserMedia: unloadRemainingEventListeners()');\n\n    _mediaEvents2.default.forEach(function (eventName) {\n      rawVisualUserMedia.removeEventListener(eventName, outputEvent);\n    });\n  };\n\n  this.init = function (localMediaStream, videoCallback, audioCallback, endedEarlyCallback) {\n    this.stop(localMediaStream, true);\n\n    var onPlayReached = false;\n    var onLoadedMetaDataReached = false;\n    var playingPromiseReached = false;\n\n    if (options && options.isAudioEnabled()) {\n      audioRecorder = audioRecorder || new _audioRecorder2.default(this, options);\n    }\n\n    function audioRecord() {\n      self.removeListener(_events2.default.SENDING_FIRST_FRAME, audioRecord);\n      audioRecorder && audioRecorder.record(audioCallback);\n    }\n\n    function unloadAllEventListeners() {\n      options.debug('UserMedia: unloadAllEventListeners()');\n\n      self.removeListener(_events2.default.SENDING_FIRST_FRAME, audioRecord);\n\n      rawVisualUserMedia.removeEventListener && rawVisualUserMedia.removeEventListener('play', onPlay);\n\n      rawVisualUserMedia.removeEventListener && rawVisualUserMedia.removeEventListener('loadedmetadata', onLoadedMetaData);\n\n      self.unloadRemainingEventListeners();\n    }\n\n    function play() {\n      // Resets the media element and restarts the media resource. Any pending events are discarded.\n      try {\n        rawVisualUserMedia.load();\n\n        // fixes https://github.com/binarykitchen/videomail.io/issues/401\n        // see https://github.com/MicrosoftEdge/Demos/blob/master/photocapture/scripts/demo.js#L27\n        if (rawVisualUserMedia.paused) {\n          options.debug('UserMedia: play()', 'media.readyState=' + rawVisualUserMedia.readyState, 'media.paused=' + rawVisualUserMedia.paused, 'media.ended=' + rawVisualUserMedia.ended, 'media.played=' + (0, _pretty2.default)(rawVisualUserMedia.played));\n\n          var p;\n\n          try {\n            p = rawVisualUserMedia.play();\n          } catch (exc) {\n            // this in the hope to catch InvalidStateError, see\n            // https://github.com/binarykitchen/videomail-client/issues/149\n            options.logger.warn('Caught raw usermedia play exception:', exc);\n          }\n\n          // using the promise here just experimental for now\n          // and this to catch any weird errors early if possible\n          if (isPromise(p)) {\n            p.then(function () {\n              if (!playingPromiseReached) {\n                options.debug('UserMedia: play promise successful. Playing now.');\n                playingPromiseReached = true;\n              }\n            }).catch(function (reason) {\n              // promise can be interrupted, i.E. when switching tabs\n              // and promise can get resumed when switching back to tab, hence\n              // do not treat this like an error\n              options.logger.warn('Caught pending usermedia promise exception: %s', reason.toString());\n            });\n          }\n        }\n      } catch (exc) {\n        unloadAllEventListeners();\n        endedEarlyCallback(exc);\n      }\n    }\n\n    function fireCallbacks() {\n      var readyState = rawVisualUserMedia.readyState;\n\n      // ready state, see https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/readyState\n      options.debug('UserMedia: fireCallbacks(' + 'readyState=' + readyState + ', ' + 'onPlayReached=' + onPlayReached + ', ' + 'onLoadedMetaDataReached=' + onLoadedMetaDataReached + ')');\n\n      if (onPlayReached && onLoadedMetaDataReached) {\n        videoCallback();\n\n        if (audioRecorder && audioCallback) {\n          try {\n            audioRecorder.init(localMediaStream);\n            self.on(_events2.default.SENDING_FIRST_FRAME, audioRecord);\n          } catch (exc) {\n            unloadAllEventListeners();\n            endedEarlyCallback(exc);\n          }\n        }\n      }\n    }\n\n    function onPlay() {\n      try {\n        logEvent('play', {\n          readyState: rawVisualUserMedia.readyState,\n          audio: options.isAudioEnabled(),\n          width: rawVisualUserMedia.width,\n          height: rawVisualUserMedia.height,\n          videoWidth: rawVisualUserMedia.videoWidth,\n          videoHeight: rawVisualUserMedia.videoHeight\n        });\n\n        rawVisualUserMedia.removeEventListener && rawVisualUserMedia.removeEventListener('play', onPlay);\n\n        if (hasEnded() || hasInvalidDimensions()) {\n          endedEarlyCallback(_videomailError2.default.create('Already busy', 'Probably another browser window is using your webcam?', options));\n        } else {\n          onPlayReached = true;\n          fireCallbacks();\n        }\n      } catch (exc) {\n        unloadAllEventListeners();\n        endedEarlyCallback(exc);\n      }\n    }\n\n    // player modifications to perform that must wait until `loadedmetadata` has been triggered\n    function onLoadedMetaData() {\n      logEvent('loadedmetadata', {\n        readyState: rawVisualUserMedia.readyState,\n        paused: rawVisualUserMedia.paused,\n        width: rawVisualUserMedia.width,\n        height: rawVisualUserMedia.height,\n        videoWidth: rawVisualUserMedia.videoWidth,\n        videoHeight: rawVisualUserMedia.videoHeight\n      });\n\n      rawVisualUserMedia.removeEventListener && rawVisualUserMedia.removeEventListener('loadedmetadata', onLoadedMetaData);\n\n      if (!hasEnded() && !hasInvalidDimensions()) {\n        self.emit(_events2.default.LOADED_META_DATA);\n\n        // for android devices, we cannot call play() unless meta data has been loaded!\n        // todo consider removing that if it's not the case anymore (for better performance)\n        if (browser.isAndroid()) {\n          play();\n        }\n\n        onLoadedMetaDataReached = true;\n        fireCallbacks();\n      }\n    }\n\n    try {\n      var videoTrack = getFirstVideoTrack(localMediaStream);\n\n      if (!videoTrack) {\n        options.debug('UserMedia: detected (but no video tracks exist');\n      } else if (!videoTrack.enabled) {\n        throw _videomailError2.default.create('Webcam is disabled', 'The video track seems to be disabled. Enable it in your system.', options);\n      } else {\n        var description;\n\n        if (videoTrack.label && videoTrack.label.length > 0) {\n          description = videoTrack.label;\n        }\n\n        description += ' with enabled=' + videoTrack.enabled;\n        description += ', muted=' + videoTrack.muted;\n        description += ', remote=' + videoTrack.remote;\n        description += ', readyState=' + videoTrack.readyState;\n        description += ', error=' + videoTrack.error;\n\n        options.debug('UserMedia: ' + videoTrack.kind + ' detected.', description || '');\n      }\n\n      // very useful i think, so leave this and just use options.debug()\n      var heavyDebugging = true;\n\n      if (heavyDebugging) {\n        _mediaEvents2.default.forEach(function (eventName) {\n          rawVisualUserMedia.addEventListener(eventName, outputEvent, false);\n        });\n      }\n\n      rawVisualUserMedia.addEventListener('loadedmetadata', onLoadedMetaData);\n      rawVisualUserMedia.addEventListener('play', onPlay);\n\n      // experimental, not sure if this is ever needed/called? since 2 apr 2017\n      // An error occurs while fetching the media data.\n      // Error can be an object with the code MEDIA_ERR_NETWORK or higher.\n      // networkState equals either NETWORK_EMPTY or NETWORK_IDLE, depending on when the download was aborted.\n      rawVisualUserMedia.addEventListener('error', function (err) {\n        options.logger.warn('Caught video element error event: %s', (0, _pretty2.default)(err));\n      });\n\n      setVisualStream(localMediaStream);\n\n      play();\n    } catch (exc) {\n      self.emit(_events2.default.ERROR, exc);\n    }\n  };\n\n  this.isReady = function () {\n    return !!rawVisualUserMedia.src;\n  };\n\n  this.stop = function (visualStream, aboutToInitialize) {\n    try {\n      // do not stop \"too much\" when going to initialize anyway\n      if (!aboutToInitialize) {\n        if (!visualStream) {\n          visualStream = getVisualStream();\n        }\n\n        var tracks = getTracks(visualStream);\n        var newStopApiFound = false;\n\n        if (tracks) {\n          tracks.forEach(function (track) {\n            if (track.stop) {\n              newStopApiFound = true;\n              track.stop();\n            }\n          });\n        }\n\n        // will probably become obsolete in one year (after june 2017)\n        !newStopApiFound && visualStream && visualStream.stop && visualStream.stop();\n\n        setVisualStream(null);\n\n        audioRecorder && audioRecorder.stop();\n\n        audioRecorder = null;\n      }\n\n      paused = record = false;\n    } catch (exc) {\n      self.emit(_events2.default.ERROR, exc);\n    }\n  };\n\n  this.createCanvas = function () {\n    return (0, _hyperscript2.default)('canvas', {\n      width: this.getRawWidth(true),\n      height: this.getRawHeight(true)\n    });\n  };\n\n  this.getVideoHeight = function () {\n    return rawVisualUserMedia.videoHeight;\n  };\n\n  this.getVideoWidth = function () {\n    return rawVisualUserMedia.videoWidth;\n  };\n\n  this.hasVideoWidth = function () {\n    return this.getVideoWidth() > 0;\n  };\n\n  this.getRawWidth = function (responsive) {\n    var rawWidth = this.getVideoWidth();\n    var widthDefined = options.hasDefinedWidth();\n\n    if (widthDefined || options.hasDefinedHeight()) {\n      if (!responsive && widthDefined) {\n        rawWidth = options.video.width;\n      } else {\n        rawWidth = recorder.calculateWidth(responsive);\n      }\n    }\n\n    if (responsive) {\n      rawWidth = recorder.limitWidth(rawWidth);\n    }\n\n    return rawWidth;\n  };\n\n  this.getRawHeight = function (responsive) {\n    var rawHeight;\n\n    if (options.hasDefinedDimension()) {\n      rawHeight = recorder.calculateHeight(responsive);\n\n      if (rawHeight < 1) {\n        throw _videomailError2.default.create('Bad dimensions', 'Calculated raw height cannot be less than 1!', options);\n      }\n    } else {\n      rawHeight = this.getVideoHeight();\n\n      if (rawHeight < 1) {\n        throw _videomailError2.default.create('Bad dimensions', 'Raw video height from DOM element cannot be less than 1!', options);\n      }\n    }\n\n    if (responsive) {\n      rawHeight = recorder.limitHeight(rawHeight);\n    }\n\n    return rawHeight;\n  };\n\n  this.getRawVisuals = function () {\n    return rawVisualUserMedia;\n  };\n\n  this.pause = function () {\n    paused = true;\n  };\n\n  this.isPaused = function () {\n    return paused;\n  };\n\n  this.resume = function () {\n    paused = false;\n  };\n\n  this.record = function () {\n    record = true;\n  };\n\n  this.isRecording = function () {\n    return record;\n  };\n\n  this.getAudioSampleRate = function () {\n    if (audioRecorder) {\n      return audioRecorder.getSampleRate();\n    } else {\n      return -1;\n    }\n  };\n\n  this.getCharacteristics = function () {\n    return {\n      audioSampleRate: this.getAudioSampleRate(),\n      muted: rawVisualUserMedia && rawVisualUserMedia.muted,\n      width: rawVisualUserMedia && rawVisualUserMedia.width,\n      height: rawVisualUserMedia && rawVisualUserMedia.height,\n      videoWidth: rawVisualUserMedia && rawVisualUserMedia.videoWidth,\n      videoHeight: rawVisualUserMedia && rawVisualUserMedia.videoHeight\n    };\n  };\n};\n\nvar _hyperscript = _dereq_('hyperscript');\n\nvar _hyperscript2 = _interopRequireDefault(_hyperscript);\n\nvar _safeJsonStringify = _dereq_('safe-json-stringify');\n\nvar _safeJsonStringify2 = _interopRequireDefault(_safeJsonStringify);\n\nvar _audioRecorder = _dereq_('./../../util/audioRecorder');\n\nvar _audioRecorder2 = _interopRequireDefault(_audioRecorder);\n\nvar _videomailError = _dereq_('./../../util/videomailError');\n\nvar _videomailError2 = _interopRequireDefault(_videomailError);\n\nvar _eventEmitter = _dereq_('./../../util/eventEmitter');\n\nvar _eventEmitter2 = _interopRequireDefault(_eventEmitter);\n\nvar _mediaEvents = _dereq_('./../../util/mediaEvents');\n\nvar _mediaEvents2 = _interopRequireDefault(_mediaEvents);\n\nvar _pretty = _dereq_('./../../util/pretty');\n\nvar _pretty2 = _interopRequireDefault(_pretty);\n\nvar _browser = _dereq_('./../../util/browser');\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _events = _dereq_('./../../events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EVENT_ASCII = '|—O—|';\n\n},{\"./../../events\":88,\"./../../util/audioRecorder\":92,\"./../../util/browser\":93,\"./../../util/eventEmitter\":95,\"./../../util/mediaEvents\":97,\"./../../util/pretty\":98,\"./../../util/videomailError\":100,\"hyperscript\":33,\"safe-json-stringify\":67}],\"videomail-client\":[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _standardize = _dereq_('./util/standardize');\n\nvar _standardize2 = _interopRequireDefault(_standardize);\n\nvar _client = _dereq_('./client');\n\nvar _client2 = _interopRequireDefault(_client);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nif (!navigator) {\n  throw new Error('Navigator is missing!');\n} else {\n  // Ensures Videomail functionality is not broken on exotic browsers with shims.\n  (0, _standardize2.default)(window, navigator);\n}\n\nexports.default = _client2.default;\n\n// also add that so that we can require() it the normal ES5 way\n\nmodule.exports = _client2.default;\n\n},{\"./client\":86,\"./util/standardize\":99}]},{},[\"videomail-client\"])(\"videomail-client\")\n});"]}