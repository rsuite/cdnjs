!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.vegaTooltip={})}(this,function(t){"use strict";var e,n=(function(t,e){function o(i,o){var r=[],l=[];return null==o&&(o=function(t,e){return r[0]===e?"[Circular ~]":"[Circular ~."+l.slice(0,r.indexOf(e)).join(".")+"]"}),function(t,e){if(0<r.length){var n=r.indexOf(this);~n?r.splice(n+1):r.push(this),~n?l.splice(n,1/0,t):l.push(t),~r.indexOf(e)&&(e=o.call(this,t,e))}else r.push(e);return null==i?e:i.call(this,t,e)}}(t.exports=function(t,e,n,i){return JSON.stringify(t,o(e,i),n)}).getSerialize=o}(e={exports:{}},e.exports),e.exports),i=n.getSerialize,o=Object.freeze({default:n,__moduleExports:n,getSerialize:i});function r(t,e,n){return t.fields=e||[],t.fname=n,t}function u(t){throw Error(t)}var p=Array.isArray;function c(t){return t===Object(t)}function f(t){return"string"==typeof t}function l(t){return p(t)?"["+t.map(l)+"]":c(t)||f(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}var s,a,d,h,g=[],b=(d=function(t){var e,n,i,o=[],r=null,l=0,s=t.length,a="";function d(){o.push(a+t.substring(e,n)),a="",e=n+1}for(t+="",e=n=0;n<s;++n)if("\\"===(i=t[n]))a+=t.substring(e,n),e=++n;else if(i===r)d(),r=null,l=-1;else{if(r)continue;e===l&&'"'===i?(e=n+1,r=i):e===l&&"'"===i?(e=n+1,r=i):"."!==i||l?"["===i?(e<n&&d(),l=e=n+1):"]"===i&&(l||u("Access path missing open bracket: "+t),0<l&&d(),l=0,e=n+1):e<n?d():e=n+1}return l&&u("Access path missing closing bracket: "+t),r&&u("Access path missing closing quote: "+t),e<n&&(n++,d()),o}(s="id"),h="return _["+d.map(l).join("][")+"];",r(Function("_",h),[s=1===d.length?d[0]:s],a||s),r(function(t){return t},g,"identity"),r(function(){return 0},g,"zero"),r(function(){return 1},g,"one"),r(function(){return!0},g,"true"),r(function(){return!1},g,"false"),Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}),v=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&(n[i[o]]=t[i[o]])}return n},m=n||o,y={offsetX:10,offsetY:10,id:"vg-tooltip-element",styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:O},x="\n.vg-tooltip {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0,0,0,0.1);\n\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n.vg-tooltip.visible {\n  visibility: visible;\n}\n.vg-tooltip h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n.vg-tooltip table {\n  border-spacing: 0;\n}\n.vg-tooltip td {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n.vg-tooltip td.key {\n  color: #808080;\n  max-width: 150px;\n  text-align: right;\n  padding-right: 4px;\n}\n.vg-tooltip td.value {\n  max-width: 200px;\n  text-align: left;\n}\n\n/* Dark and light color themes */\n.vg-tooltip.dark-theme {\n  background-color: rgba(32, 32, 32, 0.9);\n  border: 1px solid #f5f5f5;\n  color: white;\n}\n.vg-tooltip.dark-theme td.key {\n  color: #bfbfbf;\n}\n\n.vg-tooltip.light-theme {\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n.vg-tooltip.light-theme td.key {\n  color: #808080;\n}\n";function O(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}var w=function(){function t(t){if(this.options=b({},y,t),this.call=this.handler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){var e=document.createElement("style");e.setAttribute("id",this.options.styleId),e.innerHTML=x,document.querySelector("head").appendChild(e)}var n=document.getElementById(this.options.id);n?this.el=n:(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.querySelector("body").appendChild(this.el))}return t.prototype.handler=function(t,e,n,i){if(void 0!==e.vegaType){this.el.innerHTML=this.formatValue(i),this.el.classList.add("visible",this.options.theme+"-theme");var o=this.el.getBoundingClientRect().width,r=e.clientX+this.options.offsetX;r+o>window.innerWidth&&(r=e.clientX-this.options.offsetX-o);var l=this.el.getBoundingClientRect().height,s=e.clientY+this.options.offsetY;s+l>window.innerHeight&&(s=+e.clientY-this.options.offsetY-l),this.el.setAttribute("style","top: "+s+"px; left: "+r+"px")}else this.el.classList.remove("visible",this.options.theme+"-theme")},t.prototype.formatValue=function(t){var e=this.options.sanitize;if(p(t))return"["+t.map(function(t){return e(f(t)?t:m(t))}).join(", ")+"]";if(c(t)){var n="",i=t,o=i.title,r=v(i,["title"]);o&&(n+="<h2>"+o+"</h2>"),n+="<table>";for(var l=0,s=Object.keys(r);l<s.length;l++){var a=s[l],d=r[a];c(d)&&(d=m(d)),n+='<tr><td class="key">'+e(a)+':</td><td class="value">'+e(d)+"</td></tr>"}return n+="</table>"}return e(String(t))},t}();t.DEFAULT_OPTIONS=y,t.escapeHTML=O,t.Handler=w,t.default=function(t,e){var n=new w(e);return t.tooltip(n.call).hover().run(),n},Object.defineProperty(t,"__esModule",{value:!0})});